!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.bayesjs=n():t.bayesjs=n()}("undefined"!=typeof self?self:this,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)e.d(r,u,function(n){return t[n]}.bind(null,u));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=6)}([function(t,n,e){"use strict";e.r(n);var r=function(){return!1},u=function(){return!0},o={"@@functional/placeholder":!0};function i(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function c(t){return function n(e){return 0===arguments.length||i(e)?n:t.apply(this,arguments)}}function s(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return i(e)?n:c(function(n){return t(e,n)});default:return i(e)&&i(r)?n:i(e)?c(function(n){return t(n,r)}):i(r)?c(function(n){return t(e,n)}):t(e,r)}}}var f=s(function(t,n){return Number(t)+Number(n)});function a(t,n){var e;n=n||[];var r=(t=t||[]).length,u=n.length,o=[];for(e=0;e<r;)o[o.length]=t[e],e+=1;for(e=0;e<u;)o[o.length]=n[e],e+=1;return o}function l(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,u){return n.apply(this,arguments)};case 5:return function(t,e,r,u,o){return n.apply(this,arguments)};case 6:return function(t,e,r,u,o,i){return n.apply(this,arguments)};case 7:return function(t,e,r,u,o,i,c){return n.apply(this,arguments)};case 8:return function(t,e,r,u,o,i,c,s){return n.apply(this,arguments)};case 9:return function(t,e,r,u,o,i,c,s,f){return n.apply(this,arguments)};case 10:return function(t,e,r,u,o,i,c,s,f,a){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function d(t,n,e){return function(){for(var r=[],u=0,o=t,c=0;c<n.length||u<arguments.length;){var s;c<n.length&&(!i(n[c])||u>=arguments.length)?s=n[c]:(s=arguments[u],u+=1),r[c]=s,i(s)||(o-=1),c+=1}return o<=0?e.apply(this,r):l(o,d(t,r,e))}}var p=s(function(t,n){return 1===t?c(n):l(t,d(t,[],n))}),h=c(function(t){return p(t.length,function(){var n=0,e=arguments[0],r=arguments[arguments.length-1],u=Array.prototype.slice.call(arguments,0);return u[0]=function(){var t=e.apply(this,a(arguments,[n,r]));return n+=1,t},t.apply(this,u)})});function y(t){return function n(e,r,u){switch(arguments.length){case 0:return n;case 1:return i(e)?n:s(function(n,r){return t(e,n,r)});case 2:return i(e)&&i(r)?n:i(e)?s(function(n,e){return t(n,r,e)}):i(r)?s(function(n,r){return t(e,n,r)}):c(function(n){return t(e,r,n)});default:return i(e)&&i(r)&&i(u)?n:i(e)&&i(r)?s(function(n,e){return t(n,e,u)}):i(e)&&i(u)?s(function(n,e){return t(n,r,e)}):i(r)&&i(u)?s(function(n,r){return t(e,n,r)}):i(e)?c(function(n){return t(n,r,u)}):i(r)?c(function(n){return t(e,n,u)}):i(u)?c(function(n){return t(e,r,n)}):t(e,r,u)}}}var g=y(function(t,n,e){if(t>=e.length||t<-e.length)return e;var r=(t<0?e.length:0)+t,u=a(e);return u[r]=n(e[r]),u}),v=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function m(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function b(t,n,e){return function(){if(0===arguments.length)return e();var r=Array.prototype.slice.call(arguments,0),u=r.pop();if(!v(u)){for(var o=0;o<t.length;){if("function"==typeof u[t[o]])return u[t[o]].apply(u,r);o+=1}if(m(u))return n.apply(null,r)(u)}return e.apply(this,arguments)}}function w(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var N={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},j=function(){function t(t,n){this.xf=n,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)||(this.all=!1,t=w(this.xf["@@transducer/step"](t,!1))),t},t}(),E=s(b(["all"],s(function(t,n){return new j(t,n)}),function(t,n){for(var e=0;e<n.length;){if(!t(n[e]))return!1;e+=1}return!0})),O=s(function(t,n){return n>t?n:t});function S(t,n){for(var e=0,r=n.length,u=Array(r);e<r;)u[e]=t(n[e]),e+=1;return u}function x(t){return"[object String]"===Object.prototype.toString.call(t)}var k=c(function(t){return!!v(t)||!!t&&("object"==typeof t&&(!x(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),_=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();function A(t){return new _(t)}var q=s(function(t,n){return l(t.length,function(){return t.apply(n,arguments)})});function P(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function I(t,n,e,r){return t["@@transducer/result"](e[r](q(t["@@transducer/step"],t),n))}var $="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function M(t,n,e){if("function"==typeof t&&(t=A(t)),k(e))return function(t,n,e){for(var r=0,u=e.length;r<u;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return I(t,n,e,"fantasy-land/reduce");if(null!=e[$])return P(t,n,e[$]());if("function"==typeof e.next)return P(t,n,e);if("function"==typeof e.reduce)return I(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}var C=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},t}(),T=s(function(t,n){return new C(t,n)});function L(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var W=Object.prototype.toString,F=function(){return"[object Arguments]"===W.call(arguments)?function(t){return"[object Arguments]"===W.call(t)}:function(t){return L("callee",t)}}(),B=!{toString:null}.propertyIsEnumerable("toString"),z=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],R=function(){return arguments.propertyIsEnumerable("length")}(),G=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},D="function"!=typeof Object.keys||R?c(function(t){if(Object(t)!==t)return[];var n,e,r=[],u=R&&F(t);for(n in t)!L(n,t)||u&&"length"===n||(r[r.length]=n);if(B)for(e=z.length-1;e>=0;)L(n=z[e],t)&&!G(r,n)&&(r[r.length]=n),e-=1;return r}):c(function(t){return Object(t)!==t?[]:Object.keys(t)}),U=s(b(["fantasy-land/map","map"],T,function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return p(n.length,function(){return t.call(this,n.apply(this,arguments))});case"[object Object]":return M(function(e,r){return e[r]=t(n[r]),e},{},D(n));default:return S(t,n)}})),V=Number.isInteger||function(t){return t<<0===t},J=s(function(t,n){var e=t<0?n.length+t:t;return x(n)?n.charAt(e):n[e]}),K=s(function(t,n){return t.map(function(t){for(var e,r=n,u=0;u<t.length;){if(null==r)return;e=t[u],r=V(e)?J(e,r):r[e],u+=1}return r})}),H=s(function(t,n){return K([t],n)[0]}),X=s(function(t,n){return H([t],n)}),Y=s(function(t,n){return U(X(t),n)}),Z=y(M),Q=c(function(t){return p(Z(O,0,Y("length",t)),function(){for(var n=0,e=t.length;n<e;){if(!t[n].apply(this,arguments))return!1;n+=1}return!0})}),tt=c(function(t){return function(){return t}}),nt=s(function(t,n){return t&&n}),et=function(){function t(t,n){this.xf=n,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.any=!0,t=w(this.xf["@@transducer/step"](t,!0))),t},t}(),rt=s(b(["any"],s(function(t,n){return new et(t,n)}),function(t,n){for(var e=0;e<n.length;){if(t(n[e]))return!0;e+=1}return!1})),ut=c(function(t){return p(Z(O,0,Y("length",t)),function(){for(var n=0,e=t.length;n<e;){if(t[n].apply(this,arguments))return!0;n+=1}return!1})}),ot=s(function(t,n){return"function"==typeof n["fantasy-land/ap"]?n["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(n):"function"==typeof t?function(e){return t(e)(n(e))}:M(function(t,e){return a(t,U(e,n))},[],t)});function it(t,n){for(var e=0,r=n.length-(t-1),u=new Array(r>=0?r:0);e<r;)u[e]=Array.prototype.slice.call(n,e,e+t),e+=1;return u}var ct=function(){function t(t,n){this.xf=n,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.store(n),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return a(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},t}(),st=s(b([],s(function(t,n){return new ct(t,n)}),it)),ft=s(function(t,n){return a(n,[t])}),at=s(function(t,n){return t.apply(this,n)}),lt=c(function(t){for(var n=D(t),e=n.length,r=[],u=0;u<e;)r[u]=t[n[u]],u+=1;return r});function dt(t,n){return D(n).reduce(function(e,r){return e[r]=t(n[r]),e},{})}var pt=c(function t(n){return n=dt(function(n){return"function"==typeof n?n:t(n)},n),p(Z(O,0,Y("length",lt(n))),function(){var t=arguments;return dt(function(n){return at(n,t)},n)})}),ht=s(function(t,n){return n(t)}),yt=y(function(t,n,e){var r=t(n),u=t(e);return r<u?-1:r>u?1:0}),gt=y(function(t,n,e){var r={};for(var u in e)r[u]=e[u];return r[t]=n,r}),vt=c(function(t){return null==t}),mt=y(function t(n,e,r){if(0===n.length)return e;var u=n[0];if(n.length>1){var o=!vt(r)&&L(u,r)?r[u]:V(n[1])?[]:{};e=t(Array.prototype.slice.call(n,1),e,o)}if(V(u)&&v(r)){var i=[].concat(r);return i[u]=e,i}return gt(u,e,r)}),bt=s(function(t,n){switch(t){case 0:return function(){return n.call(this)};case 1:return function(t){return n.call(this,t)};case 2:return function(t,e){return n.call(this,t,e)};case 3:return function(t,e,r){return n.call(this,t,e,r)};case 4:return function(t,e,r,u){return n.call(this,t,e,r,u)};case 5:return function(t,e,r,u,o){return n.call(this,t,e,r,u,o)};case 6:return function(t,e,r,u,o,i){return n.call(this,t,e,r,u,o,i)};case 7:return function(t,e,r,u,o,i,c){return n.call(this,t,e,r,u,o,i,c)};case 8:return function(t,e,r,u,o,i,c,s){return n.call(this,t,e,r,u,o,i,c,s)};case 9:return function(t,e,r,u,o,i,c,s,f){return n.call(this,t,e,r,u,o,i,c,s,f)};case 10:return function(t,e,r,u,o,i,c,s,f,a){return n.call(this,t,e,r,u,o,i,c,s,f,a)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),wt=c(function(t){return bt(2,t)});function Nt(t){var n=Object.prototype.toString.call(t);return"[object Function]"===n||"[object AsyncFunction]"===n||"[object GeneratorFunction]"===n||"[object AsyncGeneratorFunction]"===n}var jt=s(function(t,n){var e=p(t,n);return p(t,function(){return M(ot,U(e,arguments[0]),Array.prototype.slice.call(arguments,1))})}),Et=c(function(t){return jt(t.length,t)}),Ot=s(function(t,n){return Nt(t)?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:Et(nt)(t,n)}),St=c(function(t){return p(t.length,t)}),xt=St(function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))});function kt(t){return function n(e){for(var r,u,o,i=[],c=0,s=e.length;c<s;){if(k(e[c]))for(o=0,u=(r=t?n(e[c]):e[c]).length;o<u;)i[i.length]=r[o],o+=1;else i[i.length]=e[c];c+=1}return i}}var _t=function(t){var n=function(t){return{"@@transducer/init":N.init,"@@transducer/result":function(n){return t["@@transducer/result"](n)},"@@transducer/step":function(n,e){var r=t["@@transducer/step"](n,e);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(t);return{"@@transducer/init":N.init,"@@transducer/result":function(t){return n["@@transducer/result"](t)},"@@transducer/step":function(t,e){return k(e)?M(n,t,e):M(n,t,[e])}}},At=s(b(["fantasy-land/chain","chain"],s(function(t,n){return U(t,_t(n))}),function(t,n){return"function"==typeof n?function(e){return t(n(e))(e)}:kt(!1)(U(t,n))})),qt=y(function(t,n,e){if(t>n)throw new Error("min must not be greater than max in clamp(min, max, value)");return e<t?t:e>n?n:e});function Pt(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var It=c(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function $t(t,n,e,r){var u=function(u){for(var o=n.length,i=0;i<o;){if(t===n[i])return e[i];i+=1}for(var c in n[i+1]=t,e[i+1]=u,t)u[c]=r?$t(t[c],n,e,!0):t[c];return u};switch(It(t)){case"Object":return u({});case"Array":return u([]);case"Date":return new Date(t.valueOf());case"RegExp":return Pt(t);default:return t}}var Mt=c(function(t){return null!=t&&"function"==typeof t.clone?t.clone():$t(t,[],[],!0)}),Ct=c(function(t){return function(n,e){return t(n,e)?-1:t(e,n)?1:0}}),Tt=c(function(t){return!t}),Lt=Et(Tt);function Wt(t,n){return function(){return n.call(this,t.apply(this,arguments))}}function Ft(t,n){return function(){var e=arguments.length;if(0===e)return n();var r=arguments[e-1];return v(r)||"function"!=typeof r[t]?n.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,e-1))}}var Bt=y(Ft("slice",function(t,n,e){return Array.prototype.slice.call(e,t,n)})),zt=c(Ft("tail",Bt(1,1/0)));function Rt(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return l(arguments[0].length,Z(Wt,arguments[0],zt(arguments)))}var Gt=c(function(t){return x(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()});function Dt(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Rt.apply(this,Gt(arguments))}function Ut(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var t=Array.prototype.slice.call(arguments),n=t.pop();return Dt(Dt.apply(this,U(At,t)),n)}function Vt(t,n){return function(){var e=this;return t.apply(e,arguments).then(function(t){return n.call(e,t)})}}function Jt(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return l(arguments[0].length,Z(Vt,arguments[0],zt(arguments)))}function Kt(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return Jt.apply(this,Gt(arguments))}var Ht=J(0);function Xt(t){return t}var Yt=c(Xt),Zt=s(function(t,n){if(n.length<=0)return Yt;var e=Ht(n),r=zt(n);return l(e.length,function(){return M(function(n,e){return t.call(this,e,n)},e.apply(this,arguments),r)})}),Qt=s(function(t,n){return Zt.apply(this,[t,Gt(n)])});function tn(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function nn(t,n,e){for(var r=0,u=e.length;r<u;){if(t(n,e[r]))return!0;r+=1}return!1}var en="function"==typeof Object.is?Object.is:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};function rn(t,n,e,r){var u=tn(t);function o(t,n){return un(t,n,e.slice(),r.slice())}return!nn(function(t,n){return!nn(o,n,t)},tn(n),u)}function un(t,n,e,r){if(en(t,n))return!0;var u=It(t);if(u!==It(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var n=String(t).match(/^function (\w*)/);return null==n?"":n[1]}(t.constructor))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!en(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!en(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var o=e.length-1;o>=0;){if(e[o]===t)return r[o]===n;o-=1}switch(u){case"Map":return t.size===n.size&&rn(t.entries(),n.entries(),e.concat([t]),r.concat([n]));case"Set":return t.size===n.size&&rn(t.values(),n.values(),e.concat([t]),r.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=D(t);if(i.length!==D(n).length)return!1;var c=e.concat([t]),s=r.concat([n]);for(o=i.length-1;o>=0;){var f=i[o];if(!L(f,n)||!un(n[f],t[f],c,s))return!1;o-=1}return!0}var on=s(function(t,n){return un(t,n,[],[])});function cn(t,n,e){var r,u;if("function"==typeof t.indexOf)switch(typeof n){case"number":if(0===n){for(r=1/n;e<t.length;){if(0===(u=t[e])&&1/u===r)return e;e+=1}return-1}if(n!=n){for(;e<t.length;){if("number"==typeof(u=t[e])&&u!=u)return e;e+=1}return-1}return t.indexOf(n,e);case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,e);case"object":if(null===n)return t.indexOf(n,e)}for(;e<t.length;){if(on(t[e],n))return e;e+=1}return-1}function sn(t,n){return cn(n,t,0)>=0}function fn(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var an=function(t){return(t<10?"0":"")+t},ln="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+an(t.getUTCMonth()+1)+"-"+an(t.getUTCDate())+"T"+an(t.getUTCHours())+":"+an(t.getUTCMinutes())+":"+an(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function dn(t){return function(){return!t.apply(this,arguments)}}function pn(t,n){for(var e=0,r=n.length,u=[];e<r;)t(n[e])&&(u[u.length]=n[e]),e+=1;return u}function hn(t){return"[object Object]"===Object.prototype.toString.call(t)}var yn=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},t}(),gn=s(b(["filter"],s(function(t,n){return new yn(t,n)}),function(t,n){return hn(n)?M(function(e,r){return t(n[r])&&(e[r]=n[r]),e},{},D(n)):pn(t,n)})),vn=s(function(t,n){return gn(dn(t),n)});function mn(t,n){var e=function(e){var r=n.concat([t]);return sn(e,r)?"<Circular>":mn(e,r)},r=function(t,n){return S(function(n){return fn(n)+": "+e(t[n])},n.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+S(e,t).join(", ")+"))";case"[object Array]":return"["+S(e,t).concat(r(t,vn(function(t){return/^\d+$/.test(t)},D(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+e(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?e(NaN):fn(ln(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+e(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+e(t.valueOf())+")":fn(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var u=t.toString();if("[object Object]"!==u)return u}return"{"+r(t,D(t)).join(", ")+"}"}}var bn=c(function(t){return mn(t,[])}),wn=s(function(t,n){if(v(t)){if(v(n))return t.concat(n);throw new TypeError(bn(n)+" is not an array")}if(x(t)){if(x(n))return t+n;throw new TypeError(bn(n)+" is not a string")}if(null!=t&&Nt(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(null!=t&&Nt(t.concat))return t.concat(n);throw new TypeError(bn(t)+' does not have a method named "concat" or "fantasy-land/concat"')}),Nn=c(function(t){return l(Z(O,0,U(function(t){return t[0].length},t)),function(){for(var n=0;n<t.length;){if(t[n][0].apply(this,arguments))return t[n][1].apply(this,arguments);n+=1}})}),jn=s(function(t,n){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new n}:St(bt(t,function(t,e,r,u,o,i,c,s,f,a){switch(arguments.length){case 1:return new n(t);case 2:return new n(t,e);case 3:return new n(t,e,r);case 4:return new n(t,e,r,u);case 5:return new n(t,e,r,u,o);case 6:return new n(t,e,r,u,o,i);case 7:return new n(t,e,r,u,o,i,c);case 8:return new n(t,e,r,u,o,i,c,s);case 9:return new n(t,e,r,u,o,i,c,s,f);case 10:return new n(t,e,r,u,o,i,c,s,f,a)}}))}),En=c(function(t){return jn(t.length,t)}),On=s(sn),Sn=s(function(t,n){return p(Z(O,0,Y("length",n)),function(){var e=arguments,r=this;return t.apply(r,S(function(t){return t.apply(r,e)},n))})}),xn=function(){function t(t,n,e,r){this.valueFn=t,this.valueAcc=n,this.keyFn=e,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){var n;for(n in this.inputs)if(L(n,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[n]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){var e=this.keyFn(n);return this.inputs[e]=this.inputs[e]||[e,this.valueAcc],this.inputs[e][1]=this.valueFn(this.inputs[e][1],n),t},t}(),kn=d(4,[],b([],d(4,[],function(t,n,e,r){return new xn(t,n,e,r)}),function(t,n,e,r){return M(function(r,u){var o=e(u);return r[o]=t(L(o,r)?r[o]:$t(n,[],[],!1),u),r},{},r)})),_n=kn(function(t,n){return t+1},0),An=f(-1),qn=s(function(t,n){return null==n||n!=n?t:n}),Pn=y(function(t,n,e){var r=t(n),u=t(e);return r>u?-1:r<u?1:0});function In(t,n,e){var r,u=typeof t;switch(u){case"string":case"number":return 0===t&&1/t==-1/0?!!e._items["-0"]||(n&&(e._items["-0"]=!0),!1):null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):u in e._items?t in e._items[u]||(n&&(e._items[u][t]=!0),!1):(n&&(e._items[u]={},e._items[u][t]=!0),!1);case"boolean":if(u in e._items){var o=t?1:0;return!!e._items[u][o]||(n&&(e._items[u][o]=!0),!1)}return n&&(e._items[u]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):u in e._items?!!sn(t,e._items[u])||(n&&e._items[u].push(t),!1):(n&&(e._items[u]=[t]),!1);case"undefined":return!!e._items[u]||(n&&(e._items[u]=!0),!1);case"object":if(null===t)return!!e._items.null||(n&&(e._items.null=!0),!1);default:return(u=Object.prototype.toString.call(t))in e._items?!!sn(t,e._items[u])||(n&&e._items[u].push(t),!1):(n&&(e._items[u]=[t]),!1)}}var $n=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!In(t,!0,this)},t.prototype.has=function(t){return In(t,!1,this)},t}(),Mn=s(function(t,n){for(var e=[],r=0,u=t.length,o=n.length,i=new $n,c=0;c<o;c+=1)i.add(n[c]);for(;r<u;)i.add(t[r])&&(e[e.length]=t[r]),r+=1;return e}),Cn=y(function(t,n,e){for(var r=[],u=0,o=n.length;u<o;)nn(t,n[u],e)||nn(t,n[u],r)||r.push(n[u]),u+=1;return r}),Tn=s(function(t,n){var e={};for(var r in n)e[r]=n[r];return delete e[t],e}),Ln=y(function(t,n,e){var r=Array.prototype.slice.call(e,0);return r.splice(t,n),r}),Wn=y(function(t,n,e){return g(t,tt(n),e)}),Fn=s(function t(n,e){switch(n.length){case 0:return e;case 1:return V(n[0])&&v(e)?Ln(n[0],1,e):Tn(n[0],e);default:var r=n[0],u=Array.prototype.slice.call(n,1);return null==e[r]?e:V(r)&&v(e)?Wn(r,t(u,e[r]),e):gt(r,t(u,e[r]),e)}}),Bn=s(function(t,n){return t/n}),zn=function(){function t(t,n){this.xf=n,this.n=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,n)},t}(),Rn=s(b(["drop"],s(function(t,n){return new zn(t,n)}),function(t,n){return Bt(Math.max(0,t),1/0,n)})),Gn=function(){function t(t,n){this.xf=n,this.n=t,this.i=0}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){this.i+=1;var e=0===this.n?t:this.xf["@@transducer/step"](t,n);return this.n>=0&&this.i>=this.n?w(e):e},t}(),Dn=s(b(["take"],s(function(t,n){return new Gn(t,n)}),function(t,n){return Bt(0,t<0?1/0:t,n)}));function Un(t,n){return Dn(t<n.length?n.length-t:0,n)}var Vn=function(){function t(t,n){this.xf=n,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(n),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t}(),Jn=s(b([],s(function(t,n){return new Vn(t,n)}),Un));function Kn(t,n){for(var e=n.length-1;e>=0&&t(n[e]);)e-=1;return Bt(0,e+1,n)}var Hn=function(){function t(t,n){this.f=t,this.retained=[],this.xf=n}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.retain(t,n):this.flush(t,n)},t.prototype.flush=function(t,n){return t=M(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,n)},t.prototype.retain=function(t,n){return this.retained.push(n),t},t}(),Xn=s(b([],s(function(t,n){return new Hn(t,n)}),Kn)),Yn=function(){function t(t,n){this.xf=n,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){var e=!1;return this.seenFirstValue?this.pred(this.lastValue,n)&&(e=!0):this.seenFirstValue=!0,this.lastValue=n,e?t:this.xf["@@transducer/step"](t,n)},t}(),Zn=s(function(t,n){return new Yn(t,n)}),Qn=J(-1),te=s(b([],Zn,function(t,n){var e=[],r=1,u=n.length;if(0!==u)for(e[0]=n[0];r<u;)t(Qn(e),n[r])||(e[e.length]=n[r]),r+=1;return e})),ne=c(b([],Zn(on),te(on))),ee=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){if(this.f){if(this.f(n))return t;this.f=null}return this.xf["@@transducer/step"](t,n)},t}(),re=s(b(["dropWhile"],s(function(t,n){return new ee(t,n)}),function(t,n){for(var e=0,r=n.length;e<r&&t(n[e]);)e+=1;return Bt(e,1/0,n)})),ue=s(function(t,n){return t||n}),oe=s(function(t,n){return Nt(t)?function(){return t.apply(this,arguments)||n.apply(this,arguments)}:Et(ue)(t,n)}),ie=c(function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():v(t)?[]:x(t)?"":hn(t)?{}:F(t)?function(){return arguments}():void 0}),ce=s(function(t,n){return Rn(t>=0?n.length-t:0,n)}),se=s(function(t,n){return on(ce(t.length,n),t)}),fe=y(function(t,n,e){return on(t(n),t(e))}),ae=y(function(t,n,e){return on(n[t],e[t])}),le=s(function t(n,e){var r,u,o,i=e instanceof Array?[]:{};for(u in e)o=typeof(r=n[u]),i[u]="function"===o?r(e[u]):r&&"object"===o?t(r,e[u]):e[u];return i}),de=function(){function t(t,n){this.xf=n,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.found=!0,t=w(this.xf["@@transducer/step"](t,n))),t},t}(),pe=s(b(["find"],s(function(t,n){return new de(t,n)}),function(t,n){for(var e=0,r=n.length;e<r;){if(t(n[e]))return n[e];e+=1}})),he=function(){function t(t,n){this.xf=n,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.found=!0,t=w(this.xf["@@transducer/step"](t,this.idx))),t},t}(),ye=s(b([],s(function(t,n){return new he(t,n)}),function(t,n){for(var e=0,r=n.length;e<r;){if(t(n[e]))return e;e+=1}return-1})),ge=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.last=n),t},t}(),ve=s(b([],s(function(t,n){return new ge(t,n)}),function(t,n){for(var e=n.length-1;e>=0;){if(t(n[e]))return n[e];e-=1}})),me=function(){function t(t,n){this.xf=n,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.lastIdx=this.idx),t},t}(),be=s(b([],s(function(t,n){return new me(t,n)}),function(t,n){for(var e=n.length-1;e>=0;){if(t(n[e]))return e;e-=1}return-1})),we=c(kt(!0)),Ne=c(function(t){return p(t.length,function(n,e){var r=Array.prototype.slice.call(arguments,0);return r[0]=e,r[1]=n,t.apply(this,r)})}),je=s(Ft("forEach",function(t,n){for(var e=n.length,r=0;r<e;)t(n[r]),r+=1;return n})),Ee=s(function(t,n){for(var e=D(n),r=0;r<e.length;){var u=e[r];t(n[u],u,n),r+=1}return n}),Oe=c(function(t){for(var n={},e=0;e<t.length;)n[t[e][0]]=t[e][1],e+=1;return n}),Se=s(Ft("groupBy",kn(function(t,n){return null==t&&(t=[]),t.push(n),t},null))),xe=s(function(t,n){for(var e=[],r=0,u=n.length;r<u;){for(var o=r+1;o<u&&t(n[o-1],n[o]);)o+=1;e.push(n.slice(r,o)),r=o}return e}),ke=s(function(t,n){return t>n}),_e=s(function(t,n){return t>=n}),Ae=s(function(t,n){if(0===t.length||vt(n))return!1;for(var e=n,r=0;r<t.length;){if(vt(e)||!L(t[r],e))return!1;e=e[t[r]],r+=1}return!0}),qe=s(function(t,n){return Ae([t],n)}),Pe=s(function(t,n){return t in n}),Ie=s(en),$e=y(function(t,n,e){return p(Math.max(t.length,n.length,e.length),function(){return t.apply(this,arguments)?n.apply(this,arguments):e.apply(this,arguments)})}),Me=f(1),Ce=s(sn),Te=kn(function(t,n){return n},null),Le=s(function(t,n){return"function"!=typeof n.indexOf||v(n)?cn(n,t,0):n.indexOf(t)}),We=Bt(0,-1),Fe=y(function(t,n,e){return pn(function(n){return nn(t,n,e)},n)}),Be=y(function(t,n,e){t=t<e.length&&t>=0?t:e.length;var r=Array.prototype.slice.call(e,0);return r.splice(t,0,n),r}),ze=y(function(t,n,e){return t=t<e.length&&t>=0?t:e.length,[].concat(Array.prototype.slice.call(e,0,t),n,Array.prototype.slice.call(e,t))}),Re=s(function(t,n){for(var e,r,u=new $n,o=[],i=0;i<n.length;)e=t(r=n[i]),u.add(e)&&o.push(r),i+=1;return o}),Ge=Re(Yt),De=s(function(t,n){var e,r;return t.length>n.length?(e=t,r=n):(e=n,r=t),Ge(pn(Ne(sn)(e),r))}),Ue=s(Ft("intersperse",function(t,n){for(var e=[],r=0,u=n.length;r<u;)r===u-1?e.push(n[r]):e.push(n[r],t),r+=1;return e}));var Ve="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),e=1,r=arguments.length;e<r;){var u=arguments[e];if(null!=u)for(var o in u)L(o,u)&&(n[o]=u[o]);e+=1}return n},Je=s(function(t,n){var e={};return e[t]=n,e}),Ke={"@@transducer/init":Array,"@@transducer/step":function(t,n){return t.push(n),t},"@@transducer/result":Xt},He={"@@transducer/init":String,"@@transducer/step":function(t,n){return t+n},"@@transducer/result":Xt},Xe={"@@transducer/init":Object,"@@transducer/step":function(t,n){return Ve(t,k(n)?Je(n[0],n[1]):n)},"@@transducer/result":Xt};var Ye=y(function(t,n,e){return m(t)?M(n(t),t["@@transducer/init"](),e):M(n(function(t){if(m(t))return t;if(k(t))return Ke;if("string"==typeof t)return He;if("object"==typeof t)return Xe;throw new Error("Cannot create transformer for "+t)}(t)),$t(t,[],[],!1),e)}),Ze=c(function(t){for(var n=D(t),e=n.length,r=0,u={};r<e;){var o=n[r],i=t[o],c=L(i,u)?u[i]:u[i]=[];c[c.length]=o,r+=1}return u}),Qe=c(function(t){for(var n=D(t),e=n.length,r=0,u={};r<e;){var o=n[r];u[t[o]]=o,r+=1}return u}),tr=s(function(t,n){return p(t+1,function(){var e=arguments[t];if(null!=e&&Nt(e[n]))return e[n].apply(e,Array.prototype.slice.call(arguments,0,t));throw new TypeError(bn(e)+' does not have a method named "'+n+'"')})}),nr=s(function(t,n){return null!=n&&n.constructor===t||n instanceof t}),er=c(function(t){return null!=t&&on(t,ie(t))}),rr=tr(1,"join"),ur=c(function(t){return Sn(function(){return Array.prototype.slice.call(arguments,0)},t)}),or=c(function(t){var n,e=[];for(n in t)e[e.length]=n;return e}),ir=s(function(t,n){if("function"!=typeof n.lastIndexOf||v(n)){for(var e=n.length-1;e>=0;){if(on(n[e],t))return e;e-=1}return-1}return n.lastIndexOf(t)});function cr(t){return"[object Number]"===Object.prototype.toString.call(t)}var sr=c(function(t){return null!=t&&cr(t.length)?t.length:NaN}),fr=s(function(t,n){return function(e){return function(r){return U(function(t){return n(t,r)},e(t(r)))}}}),ar=c(function(t){return fr(J(t),Wn(t))}),lr=c(function(t){return fr(H(t),mt(t))}),dr=c(function(t){return fr(X(t),gt(t))}),pr=s(function(t,n){return t<n}),hr=s(function(t,n){return t<=n}),yr=y(function(t,n,e){for(var r=0,u=e.length,o=[],i=[n];r<u;)i=t(i[0],e[r]),o[r]=i[1],r+=1;return[i[0],o]}),gr=y(function(t,n,e){for(var r=e.length-1,u=[],o=[n];r>=0;)o=t(o[0],e[r]),u[r]=o[1],r-=1;return[o[0],u]}),vr=s(function(t,n){return M(function(e,r){return e[r]=t(n[r],r,n),e},{},D(n))}),mr=s(function(t,n){return n.match(t)||[]}),br=s(function(t,n){return V(t)?!V(n)||n<1?NaN:(t%n+n)%n:NaN}),wr=y(function(t,n,e){return t(e)>t(n)?e:n}),Nr=Z(f,0),jr=c(function(t){return Nr(t)/t.length}),Er=c(function(t){var n=t.length;if(0===n)return NaN;var e=2-n%2,r=(n-e)/2;return jr(Array.prototype.slice.call(t,0).sort(function(t,n){return t<n?-1:t>n?1:0}).slice(r,r+e))}),Or=s(function(t,n){var e={};return l(n.length,function(){var r=t.apply(this,arguments);return L(r,e)||(e[r]=n.apply(this,arguments)),e[r]})}),Sr=s(function(t,n){return Ve({},t,n)}),xr=c(function(t){return Ve.apply(null,[{}].concat(t))}),kr=y(function(t,n,e){var r,u={};for(r in n)L(r,n)&&(u[r]=L(r,e)?t(r,n[r],e[r]):n[r]);for(r in e)L(r,e)&&!L(r,u)&&(u[r]=e[r]);return u}),_r=y(function t(n,e,r){return kr(function(e,r,u){return hn(r)&&hn(u)?t(n,r,u):n(e,r,u)},e,r)}),Ar=s(function(t,n){return _r(function(t,n,e){return n},t,n)}),qr=s(function(t,n){return _r(function(t,n,e){return e},t,n)}),Pr=y(function(t,n,e){return _r(function(n,e,r){return t(e,r)},n,e)}),Ir=s(function(t,n){return Ve({},n,t)}),$r=s(function(t,n){return Ve({},t,n)}),Mr=y(function(t,n,e){return kr(function(n,e,r){return t(e,r)},n,e)}),Cr=s(function(t,n){return n<t?n:t}),Tr=y(function(t,n,e){return t(e)<t(n)?e:n}),Lr=s(function(t,n){return t%n}),Wr=y(function(t,n,e){var r=e.length,u=e.slice(),o=t<0?r+t:t,i=n<0?r+n:n,c=u.splice(o,1);return o<0||o>=e.length||i<0||i>=e.length?e:[].concat(u.slice(0,i)).concat(c).concat(u.slice(i,e.length))}),Fr=s(function(t,n){return t*n}),Br=c(function(t){return-t}),zr=s(function(t,n){return E(dn(t),n)}),Rr=c(function(t){return p(t<0?1:t+1,function(){return J(t,arguments)})}),Gr=y(function(t,n,e){return t(n(e))});function Dr(t){return[t]}var Ur=c(Dr),Vr=s(function(t,n){for(var e={},r={},u=0,o=t.length;u<o;)r[t[u]]=1,u+=1;for(var i in n)r.hasOwnProperty(i)||(e[i]=n[i]);return e}),Jr=c(function(t){var n,e=!1;return l(t.length,function(){return e?n:(e=!0,n=t.apply(this,arguments))})});function Kr(t,n){if(null==n||!Nt(n.then))throw new TypeError("`"+t+"` expected a Promise, received "+mn(n,[]))}var Hr=s(function(t,n){return Kr("otherwise",n),n.then(null,t)}),Xr=function(t){return{value:t,map:function(n){return Xr(n(t))}}},Yr=y(function(t,n,e){return t(function(t){return Xr(n(t))})(e).value}),Zr=s(function(t,n){return[t,n]});function Qr(t){return s(function(n,e){return l(Math.max(0,n.length-e.length),function(){return n.apply(this,t(e,arguments))})})}var tu=Qr(a),nu=Qr(Ne(a)),eu=ur([gn,vn]),ru=y(function(t,n,e){return on(H(t,e),n)}),uu=y(function(t,n,e){return qn(t,H(n,e))}),ou=y(function(t,n,e){return t(H(n,e))}),iu=s(function(t,n){for(var e={},r=0;r<t.length;)t[r]in n&&(e[t[r]]=n[t[r]]),r+=1;return e}),cu=s(function(t,n){for(var e={},r=0,u=t.length;r<u;){var o=t[r];e[o]=n[o],r+=1}return e}),su=s(function(t,n){var e={};for(var r in n)t(n[r],r,n)&&(e[r]=n[r]);return e});function fu(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return Ut.apply(this,Gt(arguments))}var au=s(function(t,n){return a([t],n)}),lu=Z(Fr,1),du=s(function(t,n){return p(n.length,function(){for(var e=[],r=0;r<n.length;)e.push(n[r].call(this,arguments[r])),r+=1;return t.apply(this,e.concat(Array.prototype.slice.call(arguments,n.length)))})}),pu=du(S,[cu,Yt]),hu=y(function(t,n,e){return on(n,e[t])}),yu=y(function(t,n,e){return nr(t,e[n])}),gu=y(function(t,n,e){return uu(t,[n],e)}),vu=y(function(t,n,e){return t(e[n])}),mu=s(function(t,n){return t.map(function(t){return H([t],n)})}),bu=s(function(t,n){if(!cr(t)||!cr(n))throw new TypeError("Both arguments to range must be numbers");for(var e=[],r=t;r<n;)e.push(r),r+=1;return e}),wu=y(function(t,n,e){for(var r=e.length-1;r>=0;)n=t(e[r],n),r-=1;return n}),Nu=d(4,[],function(t,n,e,r){return M(function(e,r){return t(e,r)?n(e,r):w(e)},e,r)}),ju=c(w),Eu=s(function(t,n){var e,r=Number(n),u=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(e=new Array(r);u<r;)e[u]=t(u),u+=1;return e}),Ou=s(function(t,n){return Eu(tt(t),n)}),Su=y(function(t,n,e){return e.replace(t,n)}),xu=y(function(t,n,e){for(var r=0,u=e.length,o=[n];r<u;)n=t(n,e[r]),o[r+1]=n,r+=1;return o}),ku=s(function(t,n){return"function"==typeof n.sequence?n.sequence(t):wu(function(t,n){return ot(U(au,t),n)},t([]),n)}),_u=y(function(t,n,e){return Yr(t,tt(n),e)}),Au=s(function(t,n){return Array.prototype.slice.call(n,0).sort(t)}),qu=s(function(t,n){return Array.prototype.slice.call(n,0).sort(function(n,e){var r=t(n),u=t(e);return r<u?-1:r>u?1:0})}),Pu=s(function(t,n){return Array.prototype.slice.call(n,0).sort(function(n,e){for(var r=0,u=0;0===r&&u<t.length;)r=t[u](n,e),u+=1;return r})}),Iu=tr(1,"split"),$u=s(function(t,n){return[Bt(0,t,n),Bt(t,sr(n),n)]}),Mu=s(function(t,n){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var e=[],r=0;r<n.length;)e.push(Bt(r,r+=t,n));return e}),Cu=s(function(t,n){for(var e=0,r=n.length,u=[];e<r&&!t(n[e]);)u.push(n[e]),e+=1;return[u,Array.prototype.slice.call(n,e)]}),Tu=s(function(t,n){return on(Dn(t.length,n),t)}),Lu=s(function(t,n){return Number(t)-Number(n)}),Wu=s(function(t,n){return wn(Mn(t,n),Mn(n,t))}),Fu=y(function(t,n,e){return wn(Cn(t,n,e),Cn(t,e,n))}),Bu=s(function(t,n){for(var e=n.length-1;e>=0&&t(n[e]);)e-=1;return Bt(e+1,1/0,n)}),zu=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):w(t)},t}(),Ru=s(b(["takeWhile"],s(function(t,n){return new zu(t,n)}),function(t,n){for(var e=0,r=n.length;e<r&&t(n[e]);)e+=1;return Bt(0,e,n)})),Gu=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n),this.xf["@@transducer/step"](t,n)},t}(),Du=s(b([],s(function(t,n){return new Gu(t,n)}),function(t,n){return t(n),n}));var Uu=s(function(t,n){if(e=t,"[object RegExp]"!==Object.prototype.toString.call(e))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+bn(t));var e;return Pt(t).test(n)}),Vu=s(function(t,n){return Kr("andThen",n),n.then(t)}),Ju=tr(0,"toLowerCase"),Ku=c(function(t){var n=[];for(var e in t)L(e,t)&&(n[n.length]=[e,t[e]]);return n}),Hu=c(function(t){var n=[];for(var e in t)n[n.length]=[e,t[e]];return n}),Xu=tr(0,"toUpperCase"),Yu=p(4,function(t,n,e,r){return M(t("function"==typeof n?A(n):n),e,r)}),Zu=c(function(t){for(var n=0,e=[];n<t.length;){for(var r=t[n],u=0;u<r.length;)void 0===e[u]&&(e[u]=[]),e[u].push(r[u]),u+=1;n+=1}return e}),Qu=y(function(t,n,e){return"function"==typeof e["fantasy-land/traverse"]?e["fantasy-land/traverse"](n,t):ku(t,U(n,e))}),to="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",no=c("function"==typeof String.prototype.trim&&!to.trim()&&"​".trim()?function(t){return t.trim()}:function(t){var n=new RegExp("^["+to+"]["+to+"]*"),e=new RegExp("["+to+"]["+to+"]*$");return t.replace(n,"").replace(e,"")}),eo=s(function(t,n){return l(t.length,function(){try{return t.apply(this,arguments)}catch(t){return n.apply(this,a([t],arguments))}})}),ro=c(function(t){return function(){return t(Array.prototype.slice.call(arguments,0))}}),uo=c(function(t){return bt(1,t)}),oo=s(function(t,n){return p(t,function(){for(var e,r=1,u=n,o=0;r<=t&&"function"==typeof u;)e=r===t?arguments.length:o+u.length,u=u.apply(this,Array.prototype.slice.call(arguments,o,e)),r+=1,o=e;return u})}),io=s(function(t,n){for(var e=t(n),r=[];e&&e.length;)r[r.length]=e[0],e=t(e[1]);return r}),co=s(Dt(Ge,a)),so=s(function(t,n){for(var e,r=0,u=n.length,o=[];r<u;)nn(t,e=n[r],o)||(o[o.length]=e),r+=1;return o}),fo=y(function(t,n,e){return so(t,a(n,e))}),ao=y(function(t,n,e){return t(e)?e:n(e)}),lo=At(Xt),po=y(function(t,n,e){for(var r=e;!t(r);)r=n(r);return r}),ho=c(function(t){var n,e=[];for(n in t)e[e.length]=t[n];return e}),yo=function(t){return{value:t,"fantasy-land/map":function(){return this}}},go=s(function(t,n){return t(yo)(n).value}),vo=y(function(t,n,e){return t(e)?n(e):e}),mo=s(function(t,n){for(var e in t)if(L(e,t)&&!t[e](n[e]))return!1;return!0}),bo=s(function(t,n){return mo(U(on,t),n)}),wo=s(function(t,n){return vn(Ne(sn)(t),n)}),No=s(function(t,n){return Boolean(!t^!n)}),jo=s(function(t,n){for(var e,r=0,u=t.length,o=n.length,i=[];r<u;){for(e=0;e<o;)i[i.length]=[t[r],n[e]],e+=1;r+=1}return i}),Eo=s(function(t,n){for(var e=[],r=0,u=Math.min(t.length,n.length);r<u;)e[r]=[t[r],n[r]],r+=1;return e}),Oo=s(function(t,n){for(var e=0,r=Math.min(t.length,n.length),u={};e<r;)u[t[e]]=n[e],e+=1;return u}),So=y(function(t,n,e){for(var r=[],u=0,o=Math.min(n.length,e.length);u<o;)r[u]=t(n[u],e[u]),u+=1;return r}),xo=c(function(t){return p(t.length,function(){var n=arguments;return function(){return t.apply(this,n)}})});e.d(n,"F",function(){return r}),e.d(n,"T",function(){return u}),e.d(n,"__",function(){return o}),e.d(n,"add",function(){return f}),e.d(n,"addIndex",function(){return h}),e.d(n,"adjust",function(){return g}),e.d(n,"all",function(){return E}),e.d(n,"allPass",function(){return Q}),e.d(n,"always",function(){return tt}),e.d(n,"and",function(){return nt}),e.d(n,"any",function(){return rt}),e.d(n,"anyPass",function(){return ut}),e.d(n,"ap",function(){return ot}),e.d(n,"aperture",function(){return st}),e.d(n,"append",function(){return ft}),e.d(n,"apply",function(){return at}),e.d(n,"applySpec",function(){return pt}),e.d(n,"applyTo",function(){return ht}),e.d(n,"ascend",function(){return yt}),e.d(n,"assoc",function(){return gt}),e.d(n,"assocPath",function(){return mt}),e.d(n,"binary",function(){return wt}),e.d(n,"bind",function(){return q}),e.d(n,"both",function(){return Ot}),e.d(n,"call",function(){return xt}),e.d(n,"chain",function(){return At}),e.d(n,"clamp",function(){return qt}),e.d(n,"clone",function(){return Mt}),e.d(n,"comparator",function(){return Ct}),e.d(n,"complement",function(){return Lt}),e.d(n,"compose",function(){return Dt}),e.d(n,"composeK",function(){return Ut}),e.d(n,"composeP",function(){return Kt}),e.d(n,"composeWith",function(){return Qt}),e.d(n,"concat",function(){return wn}),e.d(n,"cond",function(){return Nn}),e.d(n,"construct",function(){return En}),e.d(n,"constructN",function(){return jn}),e.d(n,"contains",function(){return On}),e.d(n,"converge",function(){return Sn}),e.d(n,"countBy",function(){return _n}),e.d(n,"curry",function(){return St}),e.d(n,"curryN",function(){return p}),e.d(n,"dec",function(){return An}),e.d(n,"defaultTo",function(){return qn}),e.d(n,"descend",function(){return Pn}),e.d(n,"difference",function(){return Mn}),e.d(n,"differenceWith",function(){return Cn}),e.d(n,"dissoc",function(){return Tn}),e.d(n,"dissocPath",function(){return Fn}),e.d(n,"divide",function(){return Bn}),e.d(n,"drop",function(){return Rn}),e.d(n,"dropLast",function(){return Jn}),e.d(n,"dropLastWhile",function(){return Xn}),e.d(n,"dropRepeats",function(){return ne}),e.d(n,"dropRepeatsWith",function(){return te}),e.d(n,"dropWhile",function(){return re}),e.d(n,"either",function(){return oe}),e.d(n,"empty",function(){return ie}),e.d(n,"endsWith",function(){return se}),e.d(n,"eqBy",function(){return fe}),e.d(n,"eqProps",function(){return ae}),e.d(n,"equals",function(){return on}),e.d(n,"evolve",function(){return le}),e.d(n,"filter",function(){return gn}),e.d(n,"find",function(){return pe}),e.d(n,"findIndex",function(){return ye}),e.d(n,"findLast",function(){return ve}),e.d(n,"findLastIndex",function(){return be}),e.d(n,"flatten",function(){return we}),e.d(n,"flip",function(){return Ne}),e.d(n,"forEach",function(){return je}),e.d(n,"forEachObjIndexed",function(){return Ee}),e.d(n,"fromPairs",function(){return Oe}),e.d(n,"groupBy",function(){return Se}),e.d(n,"groupWith",function(){return xe}),e.d(n,"gt",function(){return ke}),e.d(n,"gte",function(){return _e}),e.d(n,"has",function(){return qe}),e.d(n,"hasIn",function(){return Pe}),e.d(n,"hasPath",function(){return Ae}),e.d(n,"head",function(){return Ht}),e.d(n,"identical",function(){return Ie}),e.d(n,"identity",function(){return Yt}),e.d(n,"ifElse",function(){return $e}),e.d(n,"inc",function(){return Me}),e.d(n,"includes",function(){return Ce}),e.d(n,"indexBy",function(){return Te}),e.d(n,"indexOf",function(){return Le}),e.d(n,"init",function(){return We}),e.d(n,"innerJoin",function(){return Fe}),e.d(n,"insert",function(){return Be}),e.d(n,"insertAll",function(){return ze}),e.d(n,"intersection",function(){return De}),e.d(n,"intersperse",function(){return Ue}),e.d(n,"into",function(){return Ye}),e.d(n,"invert",function(){return Ze}),e.d(n,"invertObj",function(){return Qe}),e.d(n,"invoker",function(){return tr}),e.d(n,"is",function(){return nr}),e.d(n,"isEmpty",function(){return er}),e.d(n,"isNil",function(){return vt}),e.d(n,"join",function(){return rr}),e.d(n,"juxt",function(){return ur}),e.d(n,"keys",function(){return D}),e.d(n,"keysIn",function(){return or}),e.d(n,"last",function(){return Qn}),e.d(n,"lastIndexOf",function(){return ir}),e.d(n,"length",function(){return sr}),e.d(n,"lens",function(){return fr}),e.d(n,"lensIndex",function(){return ar}),e.d(n,"lensPath",function(){return lr}),e.d(n,"lensProp",function(){return dr}),e.d(n,"lift",function(){return Et}),e.d(n,"liftN",function(){return jt}),e.d(n,"lt",function(){return pr}),e.d(n,"lte",function(){return hr}),e.d(n,"map",function(){return U}),e.d(n,"mapAccum",function(){return yr}),e.d(n,"mapAccumRight",function(){return gr}),e.d(n,"mapObjIndexed",function(){return vr}),e.d(n,"match",function(){return mr}),e.d(n,"mathMod",function(){return br}),e.d(n,"max",function(){return O}),e.d(n,"maxBy",function(){return wr}),e.d(n,"mean",function(){return jr}),e.d(n,"median",function(){return Er}),e.d(n,"memoizeWith",function(){return Or}),e.d(n,"merge",function(){return Sr}),e.d(n,"mergeAll",function(){return xr}),e.d(n,"mergeDeepLeft",function(){return Ar}),e.d(n,"mergeDeepRight",function(){return qr}),e.d(n,"mergeDeepWith",function(){return Pr}),e.d(n,"mergeDeepWithKey",function(){return _r}),e.d(n,"mergeLeft",function(){return Ir}),e.d(n,"mergeRight",function(){return $r}),e.d(n,"mergeWith",function(){return Mr}),e.d(n,"mergeWithKey",function(){return kr}),e.d(n,"min",function(){return Cr}),e.d(n,"minBy",function(){return Tr}),e.d(n,"modulo",function(){return Lr}),e.d(n,"move",function(){return Wr}),e.d(n,"multiply",function(){return Fr}),e.d(n,"nAry",function(){return bt}),e.d(n,"negate",function(){return Br}),e.d(n,"none",function(){return zr}),e.d(n,"not",function(){return Tt}),e.d(n,"nth",function(){return J}),e.d(n,"nthArg",function(){return Rr}),e.d(n,"o",function(){return Gr}),e.d(n,"objOf",function(){return Je}),e.d(n,"of",function(){return Ur}),e.d(n,"omit",function(){return Vr}),e.d(n,"once",function(){return Jr}),e.d(n,"or",function(){return ue}),e.d(n,"otherwise",function(){return Hr}),e.d(n,"over",function(){return Yr}),e.d(n,"pair",function(){return Zr}),e.d(n,"partial",function(){return tu}),e.d(n,"partialRight",function(){return nu}),e.d(n,"partition",function(){return eu}),e.d(n,"path",function(){return H}),e.d(n,"paths",function(){return K}),e.d(n,"pathEq",function(){return ru}),e.d(n,"pathOr",function(){return uu}),e.d(n,"pathSatisfies",function(){return ou}),e.d(n,"pick",function(){return iu}),e.d(n,"pickAll",function(){return cu}),e.d(n,"pickBy",function(){return su}),e.d(n,"pipe",function(){return Rt}),e.d(n,"pipeK",function(){return fu}),e.d(n,"pipeP",function(){return Jt}),e.d(n,"pipeWith",function(){return Zt}),e.d(n,"pluck",function(){return Y}),e.d(n,"prepend",function(){return au}),e.d(n,"product",function(){return lu}),e.d(n,"project",function(){return pu}),e.d(n,"prop",function(){return X}),e.d(n,"propEq",function(){return hu}),e.d(n,"propIs",function(){return yu}),e.d(n,"propOr",function(){return gu}),e.d(n,"propSatisfies",function(){return vu}),e.d(n,"props",function(){return mu}),e.d(n,"range",function(){return bu}),e.d(n,"reduce",function(){return Z}),e.d(n,"reduceBy",function(){return kn}),e.d(n,"reduceRight",function(){return wu}),e.d(n,"reduceWhile",function(){return Nu}),e.d(n,"reduced",function(){return ju}),e.d(n,"reject",function(){return vn}),e.d(n,"remove",function(){return Ln}),e.d(n,"repeat",function(){return Ou}),e.d(n,"replace",function(){return Su}),e.d(n,"reverse",function(){return Gt}),e.d(n,"scan",function(){return xu}),e.d(n,"sequence",function(){return ku}),e.d(n,"set",function(){return _u}),e.d(n,"slice",function(){return Bt}),e.d(n,"sort",function(){return Au}),e.d(n,"sortBy",function(){return qu}),e.d(n,"sortWith",function(){return Pu}),e.d(n,"split",function(){return Iu}),e.d(n,"splitAt",function(){return $u}),e.d(n,"splitEvery",function(){return Mu}),e.d(n,"splitWhen",function(){return Cu}),e.d(n,"startsWith",function(){return Tu}),e.d(n,"subtract",function(){return Lu}),e.d(n,"sum",function(){return Nr}),e.d(n,"symmetricDifference",function(){return Wu}),e.d(n,"symmetricDifferenceWith",function(){return Fu}),e.d(n,"tail",function(){return zt}),e.d(n,"take",function(){return Dn}),e.d(n,"takeLast",function(){return ce}),e.d(n,"takeLastWhile",function(){return Bu}),e.d(n,"takeWhile",function(){return Ru}),e.d(n,"tap",function(){return Du}),e.d(n,"test",function(){return Uu}),e.d(n,"andThen",function(){return Vu}),e.d(n,"times",function(){return Eu}),e.d(n,"toLower",function(){return Ju}),e.d(n,"toPairs",function(){return Ku}),e.d(n,"toPairsIn",function(){return Hu}),e.d(n,"toString",function(){return bn}),e.d(n,"toUpper",function(){return Xu}),e.d(n,"transduce",function(){return Yu}),e.d(n,"transpose",function(){return Zu}),e.d(n,"traverse",function(){return Qu}),e.d(n,"trim",function(){return no}),e.d(n,"tryCatch",function(){return eo}),e.d(n,"type",function(){return It}),e.d(n,"unapply",function(){return ro}),e.d(n,"unary",function(){return uo}),e.d(n,"uncurryN",function(){return oo}),e.d(n,"unfold",function(){return io}),e.d(n,"union",function(){return co}),e.d(n,"unionWith",function(){return fo}),e.d(n,"uniq",function(){return Ge}),e.d(n,"uniqBy",function(){return Re}),e.d(n,"uniqWith",function(){return so}),e.d(n,"unless",function(){return ao}),e.d(n,"unnest",function(){return lo}),e.d(n,"until",function(){return po}),e.d(n,"update",function(){return Wn}),e.d(n,"useWith",function(){return du}),e.d(n,"values",function(){return lt}),e.d(n,"valuesIn",function(){return ho}),e.d(n,"view",function(){return go}),e.d(n,"when",function(){return vo}),e.d(n,"where",function(){return mo}),e.d(n,"whereEq",function(){return bo}),e.d(n,"without",function(){return wo}),e.d(n,"xor",function(){return No}),e.d(n,"xprod",function(){return jo}),e.d(n,"zip",function(){return Eo}),e.d(n,"zipObj",function(){return Oo}),e.d(n,"zipWith",function(){return So}),e.d(n,"thunkify",function(){return xo})},function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(e(3)),r(e(12)),r(e(2)),r(e(13)),r(e(14))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0);n.isNotNil=r.complement(r.isNil),n.isNotEmpty=r.complement(r.isEmpty),n.includesFlipped=r.curryN(2,r.flip(r.includes)),n.isString=r.is(String),n.isNumber=r.is(Number),n.isObject=r.is(Object),n.isNotString=r.complement(n.isString),n.isNotNumber=r.complement(n.isNumber),n.isNotObject=r.complement(n.isObject),n.propIsNotNil=r.pipe(r.prop,n.isNotNil),n.objectEqualsByIntersectionKeys=(t,n)=>{const e=r.pick(r.intersection(r.keys(t),r.keys(n)));return r.equals(e(t),e(n))},n.objectEqualsByFirstObjectKeys=(t,n)=>{const e=r.keys(t);return r.equals(r.pick(e,t),r.pick(e,n))};const u=r.invoker(1,"localeCompare");n.sortStringsAsc=r.sort(r.flip(u))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(6),o=e(2),i=(t,n)=>t.every(t=>-1!==n.indexOf(t));n.createNetwork=(...t)=>{const n=(t=>{const n=[...t].sort((t,n)=>t.parents.length-n.parents.length),e=[];return()=>{for(let t=0;t<n.length;t++){const r=n[t];if(0===r.parents.length||i(r.parents,e))return e.push(r.id),n.splice(t,1),r}}})(t);return t.reduce(t=>{const e=n();return r.isNil(e)?t:Object.assign({},u.addNode(t,e))},{})},n.getNodeParents=r.prop("parents"),n.getNodeId=r.prop("id"),n.getNodeStates=r.prop("states"),n.hasNodeParents=r.pipe(n.getNodeParents,o.isNotEmpty),n.getNodeParentsAndId=r.converge(r.append,[r.prop("id"),r.prop("parents")]),n.hasNotNodeParents=r.complement(n.hasNodeParents),n.getNodesFromNetwork=r.values,n.filterNodeWithParents=r.filter(n.hasNodeParents),n.getNodeIdsWithoutParents=r.pipe(n.getNodesFromNetwork,r.filter(n.hasNotNodeParents),r.map(n.getNodeId))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.prepareEvidence=function(t,n){const e={};if(!n)return e;for(const r of Object.keys(n)){const u=n[r],o=t[r];if(!o)throw new Error(`Evidence refers to unknown node '${r}'.`);const i={};for(const t of o.states)i[t]=0;if("string"==typeof u){if(!o.states.includes(u))throw new Error(`Hard evidence for '${r}' has unknown state '${u}'.`);i[u]=1}else{let t=0;for(const n of o.states){const e=u[n];if(void 0!==e){if(!Number.isFinite(e)||e<0)throw new Error(`Soft evidence for '${r}' state '${n}' must be a non-negative finite number.`);i[n]=e,t+=e}}if(t<=0)throw new Error(`Soft evidence for '${r}' has zero total weight across states.`);for(const n of o.states)i[n]=i[n]/t}e[r]=i}return e}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(1),u=e(17),o=e(22),i=e(0),c=e(4),s=e(8),f=e(9);n.infer=(t,n,e={})=>{const{cliques:s,sepSets:f,junctionTree:a}=u.default(t),l=c.prepareEvidence(t,e);return((t,n,e)=>{const u=r.filterCliquesByNodeCombinations(t,e),o=n[r.getCliqueWithLessNodes(u).id],c=r.filterCliquePotentialsByNodeCombinations(o,e),s=r.mapPotentialsThen(c);return i.sum(s)})(s,o.default(s,t,a,f,e,l),n)},n.rawInfer=(t,n={})=>{const{cliques:e,sepSets:r,junctionTree:i}=u.default(t),s=c.prepareEvidence(t,n);return{cliques:e,cliquesPotentials:o.default(e,t,i,r,n,s)}},n.getPreNormalizedPotentials=(t,n={})=>{const{cliques:e,sepSets:r,junctionTree:o}=u.default(t),i=c.prepareEvidence(t,n),a=s.default(e,t,i||{});return{cliques:e,cliquesPotentials:f.default(t,o,e,r,a)}}},function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0});const u=e(10);n.inferences={enumeration:u.enumeration,junctionTree:u.junctionTree,variableElimination:u.variableElimination},r(e(25)),n.infer=u.junctionTree.infer,r(e(31)),r(e(34))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1),o=r.pluck("id"),i=r.reduce((t,n)=>{const e=r.map(t=>[t,n.id],n.parents);return r.concat(t,e)},[]),c=(t=[])=>{let n=t;return{getValue:()=>n,setValue:t=>{n=t},add:t=>{n=r.append(t,n)},reject:t=>{n=r.reject(t,n)},any:t=>r.any(t,n)}},s=r.curry((t,n)=>r.any(r.equals(t),n)),f=r.curry((t,n,e)=>r.equals([t,n],e)||r.equals([n,t],e));n.createGraphBuilder=(t={})=>{const e=u.getNodesFromNetwork(t),a=c(o(e)),l=c(i(e)),d=(t,n)=>l.any(f(t,n));return{getNodes:()=>e,setNodeIds:t=>a.setValue(t),setEdges:t=>l.setValue(t),getNodesId:a.getValue,getEdges:l.getValue,addNodeId:t=>a.add(t),removeNodeId:t=>{l.reject(s(t)),a.reject(r.equals(t))},hasNodeId:t=>a.any(r.equals(t)),addEdge:(t,n)=>l.add([t,n]),removeEdge:(t,n)=>{l.reject(f(t,n))},hasEdge:d,hasNotEdge:r.complement(d),getNodeEdges:t=>r.reduce((n,[e,u])=>r.equals(t,e)?r.append(u,n):r.equals(t,u)?r.append(e,n):n,[],l.getValue()),clone:()=>{const e=n.createGraphBuilder(t);return e.setNodeIds(a.getValue()),e.setEdges(l.getValue()),e}}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1),o=(t,n)=>{const e=new Set;return r.reduce((t,o)=>r.assoc(o.id,((t,n,e)=>u.getNodesFromNetwork(t).reduce((t,o)=>u.hasNodeIdAndParentsInClique(n,o)&&!e.has(o.id)?(e.add(o.id),r.append(o.id,t)):t,[]))(n,o,e),t),{},t.sort((t,n)=>t.nodeIds.length-n.nodeIds.length))},i=(t,n)=>{const e=n.cpt,u=((t,n)=>r.reduce((t,e)=>r.assoc(e,n[e],t),{},t.parents))(n,t),o=r.find(r.pipe(r.prop("when"),r.equals(u)),e);if(o)return o.then[t[n.id]];throw new Error("Not found combination in node")},c=(t,n,e)=>{const o=r.map(n=>t[n],e),c=r.map((t=>n=>u.hasNodeParents(n)?i(t,n):((t,n)=>n.cpt[t[n.id]])(t,n))(n),o);return r.reduce(r.multiply,1,c)},s=(t,n,e,r)=>{let u=c(n,t,r);for(const n of Object.keys(e)){const r=e[n],o=t[n];void 0!==o&&(u*=r[o]||0)}return u},f=(t,n,e,o)=>{const i=u.buildCombinations(n,t.nodeIds);return r.map(((t,n,e,r)=>u=>({when:u,then:s(u,n,e,r[t.id])}))(t,n,e,o),i)};n.default=(t,n,e)=>{const r=o(t,n),u={};for(const o of t)u[o.id]=f(o,n,e,r);return u}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1),o=e(23),i=r.curry((t,n,e)=>e.ca===n&&e.cb===t);n.findSepSetWithCliques=(t,n,e)=>r.find(r.anyPass([i(t,n),i(n,t)]),e);const c=r.map(t=>({when:t,then:0})),s=r.reduce((t,n)=>r.assoc(n.id,new Map,t),{});n.marginalizePotentials=(t,n,e)=>r.reduce((t,n)=>{const o=r.sum(e.filter(t=>u.objectEqualsByFirstObjectKeys(n.when,t.when)).map(r.prop("then"))),i=r.assoc("then",o,n);return r.append(i,t)},[],c(u.buildCombinations(t,n)));const f=r.pipe(r.path([0,"when"]),r.keys),a=r.curry((t,n,e)=>((t,n,e)=>{const u=r.pick(t);return r.equals(u(n.when),u(e.when))})(t,n,e)?r.assoc("then",r.multiply(e.then,n.then),e):e),l=(t,e,o,i,c,s)=>{const l=c<s?c:s,d=c<s?s:c,p=i[l].get(d),h=((t,e,r,u)=>{const o=n.findSepSetWithCliques(r,u,e);if(o)return o.sharedNodes.sort();throw new Error(`SepSet not found for cliques with id: "${r}" and "${u}"`)})(0,e,c,s),y=n.marginalizePotentials(t,h,o[c]),g=p?((t,n)=>r.map(t=>{const{when:e,then:o}=t,i=n.find(t=>u.objectEqualsByFirstObjectKeys(e,t.when));return i?r.assoc("then",r.divide(o,i.then||1),t):t},t))(y,p):y;o[s]=((t,n)=>{const e=f(n),u=a(e);return r.reduce((t,n)=>r.map(u(n),t),t,n)})(o[s],g),i[l].set(d,y)};n.default=(t,n,e,u,i)=>{const c=s(e),f=o.getConnectedComponents(n);return r.reduce((e,[r])=>{const o=((t,n,e,r,u,o)=>{const i=(o,c)=>{const s=n.getNodeEdges(o);for(const t of s)c&&t===c||i(t,o);c&&l(t,e,u,r,o,c)};return i(o),u})(t,n,u,c,e,r);return((t,n,e,r,u,o)=>{const i=(o,c)=>{const s=n.getNodeEdges(o);for(const n of s)c&&n===c||(l(t,e,u,r,o,n),i(n,o))};return i(o),u})(t,n,u,c,o,r)},i,f)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(11);n.enumeration=r;const u=e(5);n.junctionTree=u;const o=e(24);n.variableElimination=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(1),u=e(0),o=e(4),i=new WeakMap,c=(t,n,e)=>{const r=[];for(let o=0;o<n.length;o++){let i=1;const c=n[o],s=Object.keys(c);for(let n=0;n<s.length;n++){const e=s[n],r=t[e];if(0===r.parents.length){i*=r.cpt[c[e]]}else{const t=r.cpt,n={};for(let t=0;t<r.parents.length;t++){const e=r.parents[t];n[e]=c[e]}for(let r=0;r<t.length;r++){const o=t[r];if(u.equals(o.when,n)){i*=o.then[c[e]];break}}}}const f=Object.keys(e);for(const t of f){const n=e[t],r=c[t];void 0!==r&&(i*=n[r]||0)}r.push(i)}let o=0;for(let t=0;t<r.length;t++)o+=r[t];return o};n.infer=(t,n,e)=>{let u=i.get(t);void 0===u&&(u=r.buildCombinations(t),i.set(t,u));const s=o.prepareEvidence(t,e),f=((t,n)=>{const e=Object.keys(n);return t.filter(t=>{for(let r=0;r<e.length;r++){const u=e[r];if(t[u]!==n[u])return!1}return!0})})(u,n),a=c(t,f,s),l=c(t,u,s);return 0===l?0:a/l}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.buildCombinations=(t,n)=>{return((t,n)=>{const e=[],r=(n,u={})=>{if(0===n.length)e.push(u);else{const[e,...o]=n,{states:i}=t[e];for(const t of i)r(o,Object.assign({},u,{[e]:t}))}};return r(n),e})(t,n||Object.keys(t))}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(2),o=e(3),i=r.prop("nodeIds"),c=r.ifElse(r.equals(0),r.always(1),r.identity),s=r.pipe(i,r.length);n.mapPotentialsThen=r.pluck("then"),n.sumCliquePotentials=r.pipe(n.mapPotentialsThen,r.sum,c),n.hasNodeIdsInClique=r.useWith(r.all,[r.pipe(r.prop("nodeIds"),u.includesFlipped),r.identity]),n.hasNodeIdAndParentsInClique=r.useWith(n.hasNodeIdsInClique,[r.identity,o.getNodeParentsAndId]),n.getCliqueWithLessNodes=t=>{const n=r.head(t);if(n)return r.reduce(r.minBy(s),n,r.tail(t));throw new Error("Cliques are empty")},n.filterCliquesByNodeCombinations=(t,n={})=>r.filter(r.pipe(r.prop("nodeIds"),r.intersection(r.keys(n)),u.isNotEmpty),t);const f=r.curry((t,n)=>{const{when:e}=n;return r.all(n=>{const r=e[n],u=t[n];return null==u||r===u},r.keys(e))});n.filterCliquePotentialsByNodeCombinations=(t,n)=>r.filter(f(n),t),n.normalizeCliquePotential=t=>{const e=n.sumCliquePotentials(t);return t.map(t=>(t.then=t.then/e,t))},n.normalizeCliquePotentials=t=>{for(const e of Object.keys(t))t[e]=n.normalizeCliquePotential(t[e]);return t}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(2),o=e(15),i=r.addIndex(r.forEach),c=(t,n)=>n.sharedNodes.length-t.sharedNodes.length,s=(t,n,e)=>r.reduce((n,u)=>{const o=r.append(u,n);return((t,n)=>{const e={},u=(t,o)=>{e[t]=!0;const i=r.reduce((n,{ca:e,cb:u})=>r.equals(t,u)?r.append(e,n):r.equals(t,e)?r.append(u,n):n,[],n);return r.any(n=>{if(e[n]){if(n!==o)return!0}else if(u(n,t))return!0;return!1},i)};return r.any(({id:t})=>!e[t]&&u(t),t)})(t,o)?(e(u.ca,u.cb),n):o},[],(t=>{const n=r.clone(t);return o.sort(n,c),n})(n));n.createSepSets=(t,n)=>{const e=[];return i((n,o)=>{const i=r.drop(o+1,t);r.forEach(t=>{const r=((t,n)=>{const e=new Set(t.nodeIds),r=new Set(n.nodeIds);return Array(...new Set([...t.nodeIds,...n.nodeIds])).filter(t=>e.has(t)&&r.has(t))})(n,t);u.isNotEmpty(r)&&e.push({ca:n.id,cb:t.id,sharedNodes:r})},i)},t),s(t,e,n)}},function(t,n,e){t.exports=e(16)},function(t,n,e){var r,u,o;u=[n],void 0===(o="function"==typeof(r=function(t){"use strict";t.__esModule=!0,t.sort=function(t,e,r,u){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");e?"function"!=typeof e&&(u=r,r=e,e=i):e=i,r||(r=0),u||(u=t.length);var o=u-r;if(!(o<2)){var f=0;if(o<n)return f=c(t,r,u,e),void s(t,r,u,r+f,e);var a=new l(t,e),d=function(t){for(var e=0;t>=n;)e|=1&t,t>>=1;return t+e}(o);do{if((f=c(t,r,u,e))<d){var p=o;p>d&&(p=d),s(t,r,r+p,r+f,e),f=p}a.pushRun(r,f),a.mergeRuns(),o-=f,r+=f}while(0!==o);a.forceMergeRuns()}};var n=32,e=7,r=256,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function o(t){return t<1e5?t<100?t<10?0:1:t<1e4?t<1e3?2:3:4:t<1e7?t<1e6?5:6:t<1e9?t<1e8?7:8:9}function i(t,n){if(t===n)return 0;if(~~t===t&&~~n===n){if(0===t||0===n)return t<n?-1:1;if(t<0||n<0){if(n>=0)return-1;if(t>=0)return 1;t=-t,n=-n}var e=o(t),r=o(n),i=0;return e<r?(t*=u[r-e-1],n/=10,i=-1):e>r&&(n*=u[e-r-1],t/=10,i=1),t===n?i:t<n?-1:1}var c=String(t),s=String(n);return c===s?0:c<s?-1:1}function c(t,n,e,r){var u=n+1;if(u===e)return 1;if(r(t[u++],t[n])<0){for(;u<e&&r(t[u],t[u-1])<0;)u++;!function(t,n,e){for(e--;n<e;){var r=t[n];t[n++]=t[e],t[e--]=r}}(t,n,u)}else for(;u<e&&r(t[u],t[u-1])>=0;)u++;return u-n}function s(t,n,e,r,u){for(r===n&&r++;r<e;r++){for(var o=t[r],i=n,c=r;i<c;){var s=i+c>>>1;u(o,t[s])<0?c=s:i=s+1}var f=r-i;switch(f){case 3:t[i+3]=t[i+2];case 2:t[i+2]=t[i+1];case 1:t[i+1]=t[i];break;default:for(;f>0;)t[i+f]=t[i+f-1],f--}t[i]=o}}function f(t,n,e,r,u,o){var i=0,c=0,s=1;if(o(t,n[e+u])>0){for(c=r-u;s<c&&o(t,n[e+u+s])>0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),i+=u,s+=u}else{for(c=u+1;s<c&&o(t,n[e+u-s])<=0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c);var f=i;i=u-s,s=u-f}for(i++;i<s;){var a=i+(s-i>>>1);o(t,n[e+a])>0?i=a+1:s=a}return s}function a(t,n,e,r,u,o){var i=0,c=0,s=1;if(o(t,n[e+u])<0){for(c=u+1;s<c&&o(t,n[e+u-s])<0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c);var f=i;i=u-s,s=u-f}else{for(c=r-u;s<c&&o(t,n[e+u+s])>=0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),i+=u,s+=u}for(i++;i<s;){var a=i+(s-i>>>1);o(t,n[e+a])<0?s=a:i=a+1}return s}var l=function(){function t(n,u){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.array=null,this.compare=null,this.minGallop=e,this.length=0,this.tmpStorageLength=r,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=n,this.compare=u,this.length=n.length,this.length<2*r&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return t.prototype.pushRun=function(t,n){this.runStart[this.stackSize]=t,this.runLength[this.stackSize]=n,this.stackSize+=1},t.prototype.mergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;if(t>=1&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||t>=2&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])this.runLength[t-1]<this.runLength[t+1]&&t--;else if(this.runLength[t]>this.runLength[t+1])break;this.mergeAt(t)}},t.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;t>0&&this.runLength[t-1]<this.runLength[t+1]&&t--,this.mergeAt(t)}},t.prototype.mergeAt=function(t){var n=this.compare,e=this.array,r=this.runStart[t],u=this.runLength[t],o=this.runStart[t+1],i=this.runLength[t+1];this.runLength[t]=u+i,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var c=a(e[o],e,r,u,0,n);r+=c,0!=(u-=c)&&0!==(i=f(e[r+u-1],e,o,i,i-1,n))&&(u<=i?this.mergeLow(r,u,o,i):this.mergeHigh(r,u,o,i))},t.prototype.mergeLow=function(t,n,r,u){var o=this.compare,i=this.array,c=this.tmp,s=0;for(s=0;s<n;s++)c[s]=i[t+s];var l=0,d=r,p=t;if(i[p++]=i[d++],0!=--u)if(1!==n){for(var h=this.minGallop;;){var y=0,g=0,v=!1;do{if(o(i[d],c[l])<0){if(i[p++]=i[d++],g++,y=0,0==--u){v=!0;break}}else if(i[p++]=c[l++],y++,g=0,1==--n){v=!0;break}}while((y|g)<h);if(v)break;do{if(0!==(y=a(i[d],c,l,n,0,o))){for(s=0;s<y;s++)i[p+s]=c[l+s];if(p+=y,l+=y,(n-=y)<=1){v=!0;break}}if(i[p++]=i[d++],0==--u){v=!0;break}if(0!==(g=f(c[l],i,d,u,0,o))){for(s=0;s<g;s++)i[p+s]=i[d+s];if(p+=g,d+=g,0==(u-=g)){v=!0;break}}if(i[p++]=c[l++],1==--n){v=!0;break}h--}while(y>=e||g>=e);if(v)break;h<0&&(h=0),h+=2}if(this.minGallop=h,h<1&&(this.minGallop=1),1===n){for(s=0;s<u;s++)i[p+s]=i[d+s];i[p+u]=c[l]}else{if(0===n)throw new Error("mergeLow preconditions were not respected");for(s=0;s<n;s++)i[p+s]=c[l+s]}}else{for(s=0;s<u;s++)i[p+s]=i[d+s];i[p+u]=c[l]}else for(s=0;s<n;s++)i[p+s]=c[l+s]},t.prototype.mergeHigh=function(t,n,r,u){var o=this.compare,i=this.array,c=this.tmp,s=0;for(s=0;s<u;s++)c[s]=i[r+s];var l=t+n-1,d=u-1,p=r+u-1,h=0,y=0;if(i[p--]=i[l--],0!=--n)if(1!==u){for(var g=this.minGallop;;){var v=0,m=0,b=!1;do{if(o(c[d],i[l])<0){if(i[p--]=i[l--],v++,m=0,0==--n){b=!0;break}}else if(i[p--]=c[d--],m++,v=0,1==--u){b=!0;break}}while((v|m)<g);if(b)break;do{if(0!=(v=n-a(c[d],i,t,n,n-1,o))){for(n-=v,y=1+(p-=v),h=1+(l-=v),s=v-1;s>=0;s--)i[y+s]=i[h+s];if(0===n){b=!0;break}}if(i[p--]=c[d--],1==--u){b=!0;break}if(0!=(m=u-f(i[l],c,0,u,u-1,o))){for(u-=m,y=1+(p-=m),h=1+(d-=m),s=0;s<m;s++)i[y+s]=c[h+s];if(u<=1){b=!0;break}}if(i[p--]=i[l--],0==--n){b=!0;break}g--}while(v>=e||m>=e);if(b)break;g<0&&(g=0),g+=2}if(this.minGallop=g,g<1&&(this.minGallop=1),1===u){for(y=1+(p-=n),h=1+(l-=n),s=n-1;s>=0;s--)i[y+s]=i[h+s];i[p]=c[d]}else{if(0===u)throw new Error("mergeHigh preconditions were not respected");for(h=p-(u-1),s=0;s<u;s++)i[h+s]=c[s]}}else{for(y=1+(p-=n),h=1+(l-=n),s=n-1;s>=0;s--)i[y+s]=i[h+s];i[p]=c[d]}else for(h=p-(u-1),s=0;s<u;s++)i[h+s]=c[s]},t}()})?r.apply(n,u):r)||(t.exports=o)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(18),o=e(7),i=e(20),c=e(1),s=e(21),f=new WeakMap,a=r.pipe(i.createMoralGraph,s.createTriangulatedGraph,u.createCliqueGraph);n.default=t=>{const n=f.get(t);if(r.isNil(n)){const{graph:n,cliques:e}=a(o.createGraphBuilder(t)),r={cliques:e,sepSets:c.createSepSets(e,n.removeEdge),junctionTree:n};return f.set(t,r),r}return n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(19),o=e(7),i=r.addIndex(r.forEach);n.createCliqueGraph=t=>{const n=u.createCliques(t),e=o.createGraphBuilder();return i((t,u)=>{const o=r.drop(u+1,n);e.addNodeId(t.id),r.forEach(n=>{((t,n)=>r.any(t=>r.includes(t,n.nodeIds),t.nodeIds))(t,n)&&e.addEdge(t.id,n.id)},o)},n),{graph:e,cliques:n}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=(t,n)=>{const e=(t=>(n,e)=>r.reduce((e,u)=>{const o=r.intersection(t.getNodeEdges(u),n);return o.length>e.length?o:e},[],r.union(n,e)))(t),u=(o,i,c)=>{r.isEmpty(i)&&r.isEmpty(c)&&n(o);const s=e(i,c);for(const n of r.difference(i,s)){const e=t.getNodeEdges(n);u(r.append(n,o),r.intersection(i,e),r.intersection(c,e));const s=i.indexOf(n);i.splice(s,1),c.push(n)}};return u};n.createCliques=t=>{let n=0;const e=[];return u(t,t=>{e.push({id:`${n++}`,nodeIds:t})})([],t.getNodesId(),[]),e}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1),o=r.addIndex(r.forEach);n.createMoralGraph=t=>{const n=t.clone();return r.forEach(t=>{o((e,u)=>{const o=r.drop(u+1,t.parents);r.forEach(t=>{n.hasNotEdge(e,t)&&n.addEdge(e,t)},o)},t.parents)},u.filterNodeWithParents(n.getNodes())),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1),o=r.addIndex(r.forEach),i=t=>({[Symbol.iterator]:()=>{const n=t.getNodesId(),e=new Set,o=r.filter(t=>!e.has(t));return{next:()=>{const i=o(n);if(u.isNotEmpty(i)){const n=((t,n)=>{const e=r.head(n),u=r.minBy(n=>t.getNodeEdges(n).length);if(e)return r.reduce(u,e,r.tail(n));throw new Error("There are not node ids available.")})(t,i);return e.add(n),{done:!1,value:n}}return{done:!0,value:""}}}}}),c=t=>{return t.getNodes().filter(n=>(n=>{const e=t.getNodeEdges(n.id);let u=!0;for(let n=0;n<e.length-1&&u;n++){const o=e[n];u=r.drop(n+1,e).every(n=>t.hasEdge(o,n)||t.hasEdge(n,o))}return u})(n)).map(t=>t.id)};n.createTriangulatedGraph=t=>{const n=t.clone(),e=n.clone();c(e).forEach(t=>e.removeNodeId(t));const u=(t=>Array.from(i(t)))(e);return r.forEach(t=>{const u=e.getNodeEdges(t);o((t,o)=>{const i=r.drop(o+1,u);r.forEach(r=>{e.hasNodeId(t)&&e.hasNodeId(r)&&e.hasNotEdge(t,r)&&(e.addEdge(t,r),n.addEdge(t,r))},i)},u),e.removeNodeId(t)},u),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(1),u=e(8),o=e(0),i=e(9),c=new WeakMap,s=new WeakMap;n.default=(t,n,e,f,a,l)=>{const d=((t,n)=>{const e=c.get(t),u=s.get(n);return r.isNotNil(e)&&r.isNotNil(u)?e:null})(t,a);if(o.isNil(d)){const o=u.default(t,n,l||{}),d=i.default(n,e,t,f,o),p=r.normalizeCliquePotentials(d);return((t,n,e)=>{c.set(t,e),s.set(n,!0)})(t,a,p),p}return d}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0);n.getConnectedComponents=t=>{const n=t.getNodesId(),e=new Set,u=[],o=n=>{const u=t.getNodeEdges(n).filter(t=>!e.has(t));return e.add(n),r.reduce((t,n)=>(t.push(...o(n)),t),[n],u)};for(const t of n)e.has(t)||u.push(o(t));return u}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(4);function u(t,n){const e=[];for(let r=0;r<t.length;r++)for(let u=0;u<n.length;u++){const o=Object.assign({},t[r].states,n[u].states),i=Object.keys(o);e.some(t=>i.every(n=>t.states[n]===o[n]))||e.push({states:o,value:0})}const r=Object.keys(t[0].states),u=Object.keys(n[0].states);for(let o=0;o<e.length;o++){const i=e[o],c=t.find(t=>r.every(n=>t.states[n]===i.states[n])),s=n.find(t=>u.every(n=>t.states[n]===i.states[n]));if(void 0===c||void 0===s)throw new Error("Fatal error");i.value=c.value*s.value}return e}function o(t,n){const e=[];for(let r=0;r<t.length;r++){const u=Object.assign({},t[r].states);delete u[n];const o=Object.keys(u),i=e.find(t=>o.every(n=>t.states[n]===u[n]));void 0===i?e.push({states:u,value:t[r].value}):i.value+=t[r].value}return e}n.infer=(t,n={},e)=>{const i=Object.keys(t),c=Object.keys(n),s=r.prepareEvidence(t,e),f=i.map(n=>(function(t){const n=[];if(0===t.parents.length){const e=t.cpt;for(let r=0;r<t.states.length;r++){const u=t.states[r];n.push({states:{[t.id]:u},value:e[u]})}}else{const e=t.cpt;for(let r=0;r<e.length;r++)for(let u=0;u<t.states.length;u++){const o=t.states[u];n.push({states:Object.assign({},e[r].when,{[t.id]:o}),value:e[r].then[o]})}}return n})(t[n])),a=Object.keys(s);for(const n of a){const e=s[n],r=t[n],u=[];for(const t of r.states){const r=e[t]||0;u.push({states:{[n]:t},value:r})}f.push(u)}const l=i.filter(t=>!c.some(n=>n===t));for(;l.length>0;){const t=l.shift();if(!t)break;const n=f.filter(n=>Object.keys(n[0].states).some(n=>n===t));if(0===n.length)continue;const e=o(n.reduce((t,n)=>u(t,n)),t);for(let t=0;t<n.length;t++)f.splice(f.indexOf(n[t]),1);f.push(e)}const d=function(t){const n=t.reduce((t,n)=>t+n.value,0);return 0===n?t:t.map(t=>({states:Object.assign({},t.states),value:t.value/n}))}(f.filter(t=>Object.keys(t[0].states).length>0).sort((t,n)=>t.length-n.length).reduce((t,n)=>u(t,n))).find(t=>c.every(e=>t.states[e]===n[e]));return void 0===d?0:d.value}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(26);n.addNode=(t,n)=>(((t,n)=>{if(r.has(t.id,n))throw new Error(`[Node "${t.id}"]: This node is already added to the network.`)})(n,t),u.default(n,t),r.assoc(n.id,n,t))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(27),u=e(28),o=e(29),i=e(30);n.default=(t,n)=>{u.default(t),i.default(t),o.default(t,n),r.default(t,n)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(1),u=e(0),o=u.pluck("when"),i=(t,n,e)=>{u.forEach(n=>{if(u.isNil(e[n]))throw new Error(`[Node "${t}"]: Missing probability for "${n}" state.\n\nNode cpt: ${u.toString(e)}`);if(r.isNotNumber(e[n]))throw new Error(`[Node "${t}"]: All probabilities must be a number.\n\nNode cpt type for "${n}": ${u.type(e[n])}\nNode cpt for "${n}": ${u.toString(e[n])}\nNode cpt: ${u.toString(e)}`)},n)},c=(t,n)=>{const e=r.buildCombinations(n,t.parents),i=o(t.cpt);((t,n,e)=>u.forEach(r=>{if(u.none(u.equals(r),n))throw new Error(`[Node "${t}"]: The node cpt has one missing combination.\n\nMissing node cpt combination (when): ${u.toString(r)}\nNode cpt combinations (when's): ${u.toString(n)}\nCombinations needed: ${u.toString(e)}`)},e))(t.id,i,e),((t,n,e)=>u.forEach(r=>{u.none(u.equals(r),e)&&console.warn(`[Node "${t}"]: The node cpt has one extra/invalid combination.\n\nInvalid node cpt combination (when): ${u.toString(r)}\nNode cpt combinations (when's): ${u.toString(n)}\nCombinations needed: ${u.toString(e)}`)},n))(t.id,i,e)};n.default=(t,n)=>{if(u.isNil(t.cpt))throw new Error(`[Node "${t.id}"]: The node cpt is required and must be an object or an array.\n\nNode: ${u.toString(t)}`);if(r.isNotObject(t.cpt))throw new Error(`[Node "${t.id}"]: The node cpt must be an object or an array.\n\nNode cpt type: ${u.type(t.cpt)}\nNode cpt: ${u.toString(t.cpt)}`);Array.isArray(t.cpt)?(c(t,n),u.forEach(n=>{i(t.id,t.states,n.then)},t.cpt)):i(t.id,t.states,t.cpt)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1);n.default=t=>{if(r.isNil(t.id))throw new Error(`The node id is required and must be a string.\n\nNode: ${r.toString(t)}`);if(u.isNotString(t.id))throw new Error(`The node id must be a string.\n\nNode id type: ${r.type(t.id)}\nNode id: ${r.toString(t.id)}\nNode: ${r.toString(t)}`)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1);n.default=(t,n)=>{if(r.isNil(t.parents))throw new Error(`[Node "${t.id}"]: The node parents is required and must be an array of strings.\n\nNode: ${r.toString(t)}`);if(!Array.isArray(t.parents))throw new Error(`[Node "${t.id}"]: The node parents must be an array of strings.\n\nNode parents type: ${r.type(t.parents)}\nNode parents: ${r.toString(t.parents)}`);(({id:t,parents:n},e)=>{r.forEach(o=>{if(u.isNotString(o))throw new Error(`[Node "${t}"]: All node parents must be strings.\n\nNode parent type: ${r.type(o)}\nNode parent: ${r.toString(o)}\nNode parents: ${r.toString(n)}`);if(!r.has(o,e))throw new Error(`[Node "${t}"]: The node parent "${o}" was not found in the network.`)},n)})(t,n)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1);n.default=t=>{if(r.isNil(t.states))throw new Error(`[Node "${t.id}"]: The node states is required and must be an array of strings.\n\nNode: ${r.toString(t)}`);if(!Array.isArray(t.states))throw new Error(`[Node "${t.id}"]: The node states must be an array of strings.\n\nNode states type: ${r.type(t.states)}\nNode states: ${r.toString(t.states)}`);if(r.isEmpty(t.states))throw new Error(`[Node "${t.id}"]: The node states must contain at least one string.\n\nNode states: ${r.toString(t.states)}`);t.states.forEach(n=>{if(u.isNotString(n))throw new Error(`[Node "${t.id}"]: All node states must be strings.\n\nNode state type: ${r.type(n)}\nNode state: ${r.toString(n)}\nNode states: ${r.toString(t.states)}`)})}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(32),u=e(0),o=e(3),i=e(5),c=e(33),s=u.mergeRight({force:!1,precision:8}),f=(t,n,e,c)=>u.reduce((o,s)=>u.assoc(s,((t,n,e,o,c)=>{if("string"==typeof o[n])return u.propEq(n,e,o)?1:0;if(c.clampSoftEvidence&&"object"==typeof o[n]&&null!==o[n]){const t=o[n];let r=0;for(const n in t)r+=t[n]||0;const u=r>0?r:1;return(t[e]||0)/u}const s=void 0!==c.precision?c.precision:8;return r(i.infer(t,{[n]:e},o),s)})(t,n.id,s,e,c),o),{},o.getNodeStates(n)),a=u.ifElse(u.pipe(u.nthArg(1),u.propEq("force",!0)),u.clone,u.identity);n.inferAll=(t,n={},e={})=>{const r=s(e);let i=a(t,r);const l=n;i=r.clampSoftEvidence?c.clampNetwork(i,l):i;const d=r.clampSoftEvidence?{}:l;return u.reduce((t,n)=>u.assoc(n.id,f(i,n,d,r),t),{},o.getNodesFromNetwork(i))}},function(t,n,e){"use strict";function r(t,n,e){if("number"!=typeof n)throw new TypeError("Expected value to be a number");if(e===1/0)return n;if(!Number.isInteger(e))throw new TypeError("Expected precision to be an integer");const r="round"===t&&n<0;let u;r&&(n=Math.abs(n)),[n,u]=`${n}e`.split("e");let o=Math[t](`${n}e${Number(u)+e}`);return[n,u]=`${o}e`.split("e"),o=Number(`${n}e${Number(u)-e}`),r&&(o=-o),o}t.exports=r.bind(null,"round"),t.exports.up=r.bind(null,"ceil"),t.exports.down=r.bind(null,"floor")},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clampNetwork=function(t,n){const e=Object.assign({},t);for(const r of Object.keys(n)){const u=t[r];if(!u)continue;const o={};if("string"==typeof n[r]){for(const t of u.states)o[t]=0;o[n[r]]=1}else{let t=0;for(const e of u.states){const u=n[r][e];void 0!==u?(o[e]=u,t+=u):o[e]=0}const e=t>0?t:1;for(const t of u.states)o[t]=o[t]/e}e[r]={id:u.id,states:[...u.states],parents:[],cpt:Object.assign({},o)}}return e}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(5);function u(t,n){for(const e of t)if(n.every(t=>e.nodeIds.includes(t)))return e.id}function o(t,n){const e=new Map;for(const r of t){const t={};for(const[e,u]of Object.entries(r.when))n.includes(e)&&(t[e]=u);const u=e.get(JSON.stringify(t))||0;e.set(JSON.stringify(t),u+r.then)}const r=[];for(const[t,n]of e)r.push({when:JSON.parse(t),then:n});return r}function i(t,n){const e=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(n));for(const t in e){const n=e[t],u=r[t];if(!u)throw new Error("Implementation error: no potential was found for the node");if(0===n.parents.length){const n={};let r=0;for(const e of u){n[e.when[t]]=e.then,r+=e.then}for(const t in n)n[t]/=r;e[t].cpt=n;continue}const o=[];for(const n of u){const e=n.when[t];delete n.when[t];const r=o.findIndex(t=>Object.keys(t.when).every(e=>n.when[e]===t.when[e]));-1!==r?o[r].then[e]=n.then:o.push({when:n.when,then:{[e]:n.then}})}for(let t=0;t<o.length;t++){let n=0;for(const e in o[t].then)n+=o[t].then[e];for(const e in o[t].then)o[t].then[e]/=n}e[t].cpt=o}return e}function c(t,n){let e=0;for(const r in t){const u=t[r],o=n[r];for(const t of o){const n=t.when;let o=0;if(0===u.parents.length){o=u.cpt[n[r]]}else{const t=u.cpt.find(t=>Object.keys(t.when).every(e=>n[e]===t.when[e]));if(!t)throw Error("Implementation error: no entry of context was found");o=t.then[n[r]]}e+=t.then*Math.log(o)}}return e}function s(t,n=[]){const e=JSON.parse(JSON.stringify(n)),i={};for(const n of e){const e=r.rawInfer(t,n);for(const n in t){const r=[n,...t[n].parents],c=u(e.cliques,r);if(!c)throw new Error("Implementation error: no clique containing the node family was found");const s=o(e.cliquesPotentials[c],r);if(i[n])for(let t=0;t<i[n].length;t++)i[n][t].then+=s[t].then;else i[n]=s}}return i}n.learningFromEvidence=function(t,n=[],e=.07){let r=JSON.parse(JSON.stringify(t)),u=-1/0;for(let t=0;t<20;t++){const t=s(r,n),o=c(r=i(r,t),t),f=o-u,a=Math.abs(f/u);if(console.log("Log likelihood: "+o+" Difference: "+f+" Ratio change: "+a),f<0||a<=e)break;u=o}return console.log("Learning from evidence finished"),r}}])});