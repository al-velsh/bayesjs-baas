!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.bayesjs=n():t.bayesjs=n()}("undefined"!=typeof self?self:this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=6)}([function(t,n,e){"use strict";e.r(n),e.d(n,"F",(function(){return r})),e.d(n,"T",(function(){return o})),e.d(n,"__",(function(){return u})),e.d(n,"add",(function(){return a})),e.d(n,"addIndex",(function(){return h})),e.d(n,"adjust",(function(){return g})),e.d(n,"all",(function(){return O})),e.d(n,"allPass",(function(){return Q})),e.d(n,"always",(function(){return tt})),e.d(n,"and",(function(){return nt})),e.d(n,"any",(function(){return rt})),e.d(n,"anyPass",(function(){return ot})),e.d(n,"ap",(function(){return ut})),e.d(n,"aperture",(function(){return st})),e.d(n,"append",(function(){return at})),e.d(n,"apply",(function(){return ft})),e.d(n,"applySpec",(function(){return pt})),e.d(n,"applyTo",(function(){return ht})),e.d(n,"ascend",(function(){return yt})),e.d(n,"assoc",(function(){return gt})),e.d(n,"assocPath",(function(){return mt})),e.d(n,"binary",(function(){return wt})),e.d(n,"bind",(function(){return q})),e.d(n,"both",(function(){return Et})),e.d(n,"call",(function(){return St})),e.d(n,"chain",(function(){return kt})),e.d(n,"clamp",(function(){return qt})),e.d(n,"clone",(function(){return Ct})),e.d(n,"comparator",(function(){return $t})),e.d(n,"complement",(function(){return Lt})),e.d(n,"compose",(function(){return Vt})),e.d(n,"composeK",(function(){return Jt})),e.d(n,"composeP",(function(){return Kt})),e.d(n,"composeWith",(function(){return Qt})),e.d(n,"concat",(function(){return wn})),e.d(n,"cond",(function(){return Nn})),e.d(n,"construct",(function(){return On})),e.d(n,"constructN",(function(){return jn})),e.d(n,"contains",(function(){return En})),e.d(n,"converge",(function(){return _n})),e.d(n,"countBy",(function(){return xn})),e.d(n,"curry",(function(){return _t})),e.d(n,"curryN",(function(){return p})),e.d(n,"dec",(function(){return kn})),e.d(n,"defaultTo",(function(){return qn})),e.d(n,"descend",(function(){return An})),e.d(n,"difference",(function(){return Cn})),e.d(n,"differenceWith",(function(){return $n})),e.d(n,"dissoc",(function(){return Tn})),e.d(n,"dissocPath",(function(){return Fn})),e.d(n,"divide",(function(){return Wn})),e.d(n,"drop",(function(){return Rn})),e.d(n,"dropLast",(function(){return Un})),e.d(n,"dropLastWhile",(function(){return Xn})),e.d(n,"dropRepeats",(function(){return ne})),e.d(n,"dropRepeatsWith",(function(){return te})),e.d(n,"dropWhile",(function(){return re})),e.d(n,"either",(function(){return ue})),e.d(n,"empty",(function(){return ie})),e.d(n,"endsWith",(function(){return se})),e.d(n,"eqBy",(function(){return ae})),e.d(n,"eqProps",(function(){return fe})),e.d(n,"equals",(function(){return un})),e.d(n,"evolve",(function(){return le})),e.d(n,"filter",(function(){return gn})),e.d(n,"find",(function(){return pe})),e.d(n,"findIndex",(function(){return ye})),e.d(n,"findLast",(function(){return ve})),e.d(n,"findLastIndex",(function(){return be})),e.d(n,"flatten",(function(){return we})),e.d(n,"flip",(function(){return Ne})),e.d(n,"forEach",(function(){return je})),e.d(n,"forEachObjIndexed",(function(){return Oe})),e.d(n,"fromPairs",(function(){return Ee})),e.d(n,"groupBy",(function(){return _e})),e.d(n,"groupWith",(function(){return Se})),e.d(n,"gt",(function(){return Pe})),e.d(n,"gte",(function(){return xe})),e.d(n,"has",(function(){return qe})),e.d(n,"hasIn",(function(){return Ae})),e.d(n,"hasPath",(function(){return ke})),e.d(n,"head",(function(){return Ht})),e.d(n,"identical",(function(){return Ie})),e.d(n,"identity",(function(){return Yt})),e.d(n,"ifElse",(function(){return Me})),e.d(n,"inc",(function(){return Ce})),e.d(n,"includes",(function(){return $e})),e.d(n,"indexBy",(function(){return Te})),e.d(n,"indexOf",(function(){return Le})),e.d(n,"init",(function(){return Be})),e.d(n,"innerJoin",(function(){return Fe})),e.d(n,"insert",(function(){return We})),e.d(n,"insertAll",(function(){return ze})),e.d(n,"intersection",(function(){return Ve})),e.d(n,"intersperse",(function(){return Je})),e.d(n,"into",(function(){return Ye})),e.d(n,"invert",(function(){return Ze})),e.d(n,"invertObj",(function(){return Qe})),e.d(n,"invoker",(function(){return tr})),e.d(n,"is",(function(){return nr})),e.d(n,"isEmpty",(function(){return er})),e.d(n,"isNil",(function(){return vt})),e.d(n,"join",(function(){return rr})),e.d(n,"juxt",(function(){return or})),e.d(n,"keys",(function(){return V})),e.d(n,"keysIn",(function(){return ur})),e.d(n,"last",(function(){return Qn})),e.d(n,"lastIndexOf",(function(){return ir})),e.d(n,"length",(function(){return sr})),e.d(n,"lens",(function(){return ar})),e.d(n,"lensIndex",(function(){return fr})),e.d(n,"lensPath",(function(){return lr})),e.d(n,"lensProp",(function(){return dr})),e.d(n,"lift",(function(){return Ot})),e.d(n,"liftN",(function(){return jt})),e.d(n,"lt",(function(){return pr})),e.d(n,"lte",(function(){return hr})),e.d(n,"map",(function(){return J})),e.d(n,"mapAccum",(function(){return yr})),e.d(n,"mapAccumRight",(function(){return gr})),e.d(n,"mapObjIndexed",(function(){return vr})),e.d(n,"match",(function(){return mr})),e.d(n,"mathMod",(function(){return br})),e.d(n,"max",(function(){return E})),e.d(n,"maxBy",(function(){return wr})),e.d(n,"mean",(function(){return jr})),e.d(n,"median",(function(){return Or})),e.d(n,"memoizeWith",(function(){return Er})),e.d(n,"merge",(function(){return _r})),e.d(n,"mergeAll",(function(){return Sr})),e.d(n,"mergeDeepLeft",(function(){return kr})),e.d(n,"mergeDeepRight",(function(){return qr})),e.d(n,"mergeDeepWith",(function(){return Ar})),e.d(n,"mergeDeepWithKey",(function(){return xr})),e.d(n,"mergeLeft",(function(){return Ir})),e.d(n,"mergeRight",(function(){return Mr})),e.d(n,"mergeWith",(function(){return Cr})),e.d(n,"mergeWithKey",(function(){return Pr})),e.d(n,"min",(function(){return $r})),e.d(n,"minBy",(function(){return Tr})),e.d(n,"modulo",(function(){return Lr})),e.d(n,"move",(function(){return Br})),e.d(n,"multiply",(function(){return Fr})),e.d(n,"nAry",(function(){return bt})),e.d(n,"negate",(function(){return Wr})),e.d(n,"none",(function(){return zr})),e.d(n,"not",(function(){return Tt})),e.d(n,"nth",(function(){return U})),e.d(n,"nthArg",(function(){return Rr})),e.d(n,"o",(function(){return Gr})),e.d(n,"objOf",(function(){return Ue})),e.d(n,"of",(function(){return Jr})),e.d(n,"omit",(function(){return Dr})),e.d(n,"once",(function(){return Ur})),e.d(n,"or",(function(){return oe})),e.d(n,"otherwise",(function(){return Hr})),e.d(n,"over",(function(){return Yr})),e.d(n,"pair",(function(){return Zr})),e.d(n,"partial",(function(){return to})),e.d(n,"partialRight",(function(){return no})),e.d(n,"partition",(function(){return eo})),e.d(n,"path",(function(){return H})),e.d(n,"paths",(function(){return K})),e.d(n,"pathEq",(function(){return ro})),e.d(n,"pathOr",(function(){return oo})),e.d(n,"pathSatisfies",(function(){return uo})),e.d(n,"pick",(function(){return io})),e.d(n,"pickAll",(function(){return co})),e.d(n,"pickBy",(function(){return so})),e.d(n,"pipe",(function(){return Rt})),e.d(n,"pipeK",(function(){return ao})),e.d(n,"pipeP",(function(){return Ut})),e.d(n,"pipeWith",(function(){return Zt})),e.d(n,"pluck",(function(){return Y})),e.d(n,"prepend",(function(){return fo})),e.d(n,"product",(function(){return lo})),e.d(n,"project",(function(){return ho})),e.d(n,"prop",(function(){return X})),e.d(n,"propEq",(function(){return yo})),e.d(n,"propIs",(function(){return go})),e.d(n,"propOr",(function(){return vo})),e.d(n,"propSatisfies",(function(){return mo})),e.d(n,"props",(function(){return bo})),e.d(n,"range",(function(){return wo})),e.d(n,"reduce",(function(){return Z})),e.d(n,"reduceBy",(function(){return Pn})),e.d(n,"reduceRight",(function(){return No})),e.d(n,"reduceWhile",(function(){return jo})),e.d(n,"reduced",(function(){return Oo})),e.d(n,"reject",(function(){return vn})),e.d(n,"remove",(function(){return Ln})),e.d(n,"repeat",(function(){return _o})),e.d(n,"replace",(function(){return So})),e.d(n,"reverse",(function(){return Gt})),e.d(n,"scan",(function(){return Po})),e.d(n,"sequence",(function(){return xo})),e.d(n,"set",(function(){return ko})),e.d(n,"slice",(function(){return Wt})),e.d(n,"sort",(function(){return qo})),e.d(n,"sortBy",(function(){return Ao})),e.d(n,"sortWith",(function(){return Io})),e.d(n,"split",(function(){return Mo})),e.d(n,"splitAt",(function(){return Co})),e.d(n,"splitEvery",(function(){return $o})),e.d(n,"splitWhen",(function(){return To})),e.d(n,"startsWith",(function(){return Lo})),e.d(n,"subtract",(function(){return Bo})),e.d(n,"sum",(function(){return Nr})),e.d(n,"symmetricDifference",(function(){return Fo})),e.d(n,"symmetricDifferenceWith",(function(){return Wo})),e.d(n,"tail",(function(){return zt})),e.d(n,"take",(function(){return Vn})),e.d(n,"takeLast",(function(){return ce})),e.d(n,"takeLastWhile",(function(){return zo})),e.d(n,"takeWhile",(function(){return Go})),e.d(n,"tap",(function(){return Jo})),e.d(n,"test",(function(){return Do})),e.d(n,"andThen",(function(){return Uo})),e.d(n,"times",(function(){return Eo})),e.d(n,"toLower",(function(){return Ko})),e.d(n,"toPairs",(function(){return Ho})),e.d(n,"toPairsIn",(function(){return Xo})),e.d(n,"toString",(function(){return bn})),e.d(n,"toUpper",(function(){return Yo})),e.d(n,"transduce",(function(){return Zo})),e.d(n,"transpose",(function(){return Qo})),e.d(n,"traverse",(function(){return tu})),e.d(n,"trim",(function(){return eu})),e.d(n,"tryCatch",(function(){return ru})),e.d(n,"type",(function(){return It})),e.d(n,"unapply",(function(){return ou})),e.d(n,"unary",(function(){return uu})),e.d(n,"uncurryN",(function(){return iu})),e.d(n,"unfold",(function(){return cu})),e.d(n,"union",(function(){return su})),e.d(n,"unionWith",(function(){return fu})),e.d(n,"uniq",(function(){return Ge})),e.d(n,"uniqBy",(function(){return Re})),e.d(n,"uniqWith",(function(){return au})),e.d(n,"unless",(function(){return lu})),e.d(n,"unnest",(function(){return du})),e.d(n,"until",(function(){return pu})),e.d(n,"update",(function(){return Bn})),e.d(n,"useWith",(function(){return po})),e.d(n,"values",(function(){return lt})),e.d(n,"valuesIn",(function(){return hu})),e.d(n,"view",(function(){return gu})),e.d(n,"when",(function(){return vu})),e.d(n,"where",(function(){return mu})),e.d(n,"whereEq",(function(){return bu})),e.d(n,"without",(function(){return wu})),e.d(n,"xor",(function(){return Nu})),e.d(n,"xprod",(function(){return ju})),e.d(n,"zip",(function(){return Ou})),e.d(n,"zipObj",(function(){return Eu})),e.d(n,"zipWith",(function(){return _u})),e.d(n,"thunkify",(function(){return Su}));var r=function(){return!1},o=function(){return!0},u={"@@functional/placeholder":!0};function i(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function c(t){return function n(e){return 0===arguments.length||i(e)?n:t.apply(this,arguments)}}function s(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return i(e)?n:c((function(n){return t(e,n)}));default:return i(e)&&i(r)?n:i(e)?c((function(n){return t(n,r)})):i(r)?c((function(n){return t(e,n)})):t(e,r)}}}var a=s((function(t,n){return Number(t)+Number(n)}));function f(t,n){var e;n=n||[];var r=(t=t||[]).length,o=n.length,u=[];for(e=0;e<r;)u[u.length]=t[e],e+=1;for(e=0;e<o;)u[u.length]=n[e],e+=1;return u}function l(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,o){return n.apply(this,arguments)};case 5:return function(t,e,r,o,u){return n.apply(this,arguments)};case 6:return function(t,e,r,o,u,i){return n.apply(this,arguments)};case 7:return function(t,e,r,o,u,i,c){return n.apply(this,arguments)};case 8:return function(t,e,r,o,u,i,c,s){return n.apply(this,arguments)};case 9:return function(t,e,r,o,u,i,c,s,a){return n.apply(this,arguments)};case 10:return function(t,e,r,o,u,i,c,s,a,f){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function d(t,n,e){return function(){for(var r=[],o=0,u=t,c=0;c<n.length||o<arguments.length;){var s;c<n.length&&(!i(n[c])||o>=arguments.length)?s=n[c]:(s=arguments[o],o+=1),r[c]=s,i(s)||(u-=1),c+=1}return u<=0?e.apply(this,r):l(u,d(t,r,e))}}var p=s((function(t,n){return 1===t?c(n):l(t,d(t,[],n))})),h=c((function(t){return p(t.length,(function(){var n=0,e=arguments[0],r=arguments[arguments.length-1],o=Array.prototype.slice.call(arguments,0);return o[0]=function(){var t=e.apply(this,f(arguments,[n,r]));return n+=1,t},t.apply(this,o)}))}));function y(t){return function n(e,r,o){switch(arguments.length){case 0:return n;case 1:return i(e)?n:s((function(n,r){return t(e,n,r)}));case 2:return i(e)&&i(r)?n:i(e)?s((function(n,e){return t(n,r,e)})):i(r)?s((function(n,r){return t(e,n,r)})):c((function(n){return t(e,r,n)}));default:return i(e)&&i(r)&&i(o)?n:i(e)&&i(r)?s((function(n,e){return t(n,e,o)})):i(e)&&i(o)?s((function(n,e){return t(n,r,e)})):i(r)&&i(o)?s((function(n,r){return t(e,n,r)})):i(e)?c((function(n){return t(n,r,o)})):i(r)?c((function(n){return t(e,n,o)})):i(o)?c((function(n){return t(e,r,n)})):t(e,r,o)}}}var g=y((function(t,n,e){if(t>=e.length||t<-e.length)return e;var r=(t<0?e.length:0)+t,o=f(e);return o[r]=n(e[r]),o})),v=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function m(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function b(t,n,e){return function(){if(0===arguments.length)return e();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!v(o)){for(var u=0;u<t.length;){if("function"==typeof o[t[u]])return o[t[u]].apply(o,r);u+=1}if(m(o)){var i=n.apply(null,r);return i(o)}}return e.apply(this,arguments)}}function w(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var N={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},j=function(){function t(t,n){this.xf=n,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)||(this.all=!1,t=w(this.xf["@@transducer/step"](t,!1))),t},t}(),O=s(b(["all"],s((function(t,n){return new j(t,n)})),(function(t,n){for(var e=0;e<n.length;){if(!t(n[e]))return!1;e+=1}return!0}))),E=s((function(t,n){return n>t?n:t}));function _(t,n){for(var e=0,r=n.length,o=Array(r);e<r;)o[e]=t(n[e]),e+=1;return o}function S(t){return"[object String]"===Object.prototype.toString.call(t)}var P=c((function(t){return!!v(t)||!!t&&("object"==typeof t&&(!S(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),x=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();function k(t){return new x(t)}var q=s((function(t,n){return l(t.length,(function(){return t.apply(n,arguments)}))}));function A(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function I(t,n,e,r){return t["@@transducer/result"](e[r](q(t["@@transducer/step"],t),n))}var M="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function C(t,n,e){if("function"==typeof t&&(t=k(t)),P(e))return function(t,n,e){for(var r=0,o=e.length;r<o;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return I(t,n,e,"fantasy-land/reduce");if(null!=e[M])return A(t,n,e[M]());if("function"==typeof e.next)return A(t,n,e);if("function"==typeof e.reduce)return I(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}var $=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},t}(),T=s((function(t,n){return new $(t,n)}));function L(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var B=Object.prototype.toString,F=function(){return"[object Arguments]"===B.call(arguments)?function(t){return"[object Arguments]"===B.call(t)}:function(t){return L("callee",t)}}(),W=!{toString:null}.propertyIsEnumerable("toString"),z=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],R=function(){return arguments.propertyIsEnumerable("length")}(),G=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},V="function"!=typeof Object.keys||R?c((function(t){if(Object(t)!==t)return[];var n,e,r=[],o=R&&F(t);for(n in t)!L(n,t)||o&&"length"===n||(r[r.length]=n);if(W)for(e=z.length-1;e>=0;)L(n=z[e],t)&&!G(r,n)&&(r[r.length]=n),e-=1;return r})):c((function(t){return Object(t)!==t?[]:Object.keys(t)})),J=s(b(["fantasy-land/map","map"],T,(function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return p(n.length,(function(){return t.call(this,n.apply(this,arguments))}));case"[object Object]":return C((function(e,r){return e[r]=t(n[r]),e}),{},V(n));default:return _(t,n)}}))),D=Number.isInteger||function(t){return t<<0===t},U=s((function(t,n){var e=t<0?n.length+t:t;return S(n)?n.charAt(e):n[e]})),K=s((function(t,n){return t.map((function(t){for(var e,r=n,o=0;o<t.length;){if(null==r)return;e=t[o],r=D(e)?U(e,r):r[e],o+=1}return r}))})),H=s((function(t,n){return K([t],n)[0]})),X=s((function(t,n){return H([t],n)})),Y=s((function(t,n){return J(X(t),n)})),Z=y(C),Q=c((function(t){return p(Z(E,0,Y("length",t)),(function(){for(var n=0,e=t.length;n<e;){if(!t[n].apply(this,arguments))return!1;n+=1}return!0}))})),tt=c((function(t){return function(){return t}})),nt=s((function(t,n){return t&&n})),et=function(){function t(t,n){this.xf=n,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.any=!0,t=w(this.xf["@@transducer/step"](t,!0))),t},t}(),rt=s(b(["any"],s((function(t,n){return new et(t,n)})),(function(t,n){for(var e=0;e<n.length;){if(t(n[e]))return!0;e+=1}return!1}))),ot=c((function(t){return p(Z(E,0,Y("length",t)),(function(){for(var n=0,e=t.length;n<e;){if(t[n].apply(this,arguments))return!0;n+=1}return!1}))})),ut=s((function(t,n){return"function"==typeof n["fantasy-land/ap"]?n["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(n):"function"==typeof t?function(e){return t(e)(n(e))}:C((function(t,e){return f(t,J(e,n))}),[],t)}));function it(t,n){for(var e=0,r=n.length-(t-1),o=new Array(r>=0?r:0);e<r;)o[e]=Array.prototype.slice.call(n,e,e+t),e+=1;return o}var ct=function(){function t(t,n){this.xf=n,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.store(n),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return f(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},t}(),st=s(b([],s((function(t,n){return new ct(t,n)})),it)),at=s((function(t,n){return f(n,[t])})),ft=s((function(t,n){return t.apply(this,n)})),lt=c((function(t){for(var n=V(t),e=n.length,r=[],o=0;o<e;)r[o]=t[n[o]],o+=1;return r}));function dt(t,n){return V(n).reduce((function(e,r){return e[r]=t(n[r]),e}),{})}var pt=c((function t(n){return n=dt((function(n){return"function"==typeof n?n:t(n)}),n),p(Z(E,0,Y("length",lt(n))),(function(){var t=arguments;return dt((function(n){return ft(n,t)}),n)}))})),ht=s((function(t,n){return n(t)})),yt=y((function(t,n,e){var r=t(n),o=t(e);return r<o?-1:r>o?1:0})),gt=y((function(t,n,e){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r})),vt=c((function(t){return null==t})),mt=y((function t(n,e,r){if(0===n.length)return e;var o=n[0];if(n.length>1){var u=!vt(r)&&L(o,r)?r[o]:D(n[1])?[]:{};e=t(Array.prototype.slice.call(n,1),e,u)}if(D(o)&&v(r)){var i=[].concat(r);return i[o]=e,i}return gt(o,e,r)})),bt=s((function(t,n){switch(t){case 0:return function(){return n.call(this)};case 1:return function(t){return n.call(this,t)};case 2:return function(t,e){return n.call(this,t,e)};case 3:return function(t,e,r){return n.call(this,t,e,r)};case 4:return function(t,e,r,o){return n.call(this,t,e,r,o)};case 5:return function(t,e,r,o,u){return n.call(this,t,e,r,o,u)};case 6:return function(t,e,r,o,u,i){return n.call(this,t,e,r,o,u,i)};case 7:return function(t,e,r,o,u,i,c){return n.call(this,t,e,r,o,u,i,c)};case 8:return function(t,e,r,o,u,i,c,s){return n.call(this,t,e,r,o,u,i,c,s)};case 9:return function(t,e,r,o,u,i,c,s,a){return n.call(this,t,e,r,o,u,i,c,s,a)};case 10:return function(t,e,r,o,u,i,c,s,a,f){return n.call(this,t,e,r,o,u,i,c,s,a,f)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),wt=c((function(t){return bt(2,t)}));function Nt(t){var n=Object.prototype.toString.call(t);return"[object Function]"===n||"[object AsyncFunction]"===n||"[object GeneratorFunction]"===n||"[object AsyncGeneratorFunction]"===n}var jt=s((function(t,n){var e=p(t,n);return p(t,(function(){return C(ut,J(e,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),Ot=c((function(t){return jt(t.length,t)})),Et=s((function(t,n){return Nt(t)?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:Ot(nt)(t,n)})),_t=c((function(t){return p(t.length,t)})),St=_t((function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))}));function Pt(t){return function n(e){for(var r,o,u,i=[],c=0,s=e.length;c<s;){if(P(e[c]))for(u=0,o=(r=t?n(e[c]):e[c]).length;u<o;)i[i.length]=r[u],u+=1;else i[i.length]=e[c];c+=1}return i}}var xt=function(t){var n=function(t){return{"@@transducer/init":N.init,"@@transducer/result":function(n){return t["@@transducer/result"](n)},"@@transducer/step":function(n,e){var r=t["@@transducer/step"](n,e);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(t);return{"@@transducer/init":N.init,"@@transducer/result":function(t){return n["@@transducer/result"](t)},"@@transducer/step":function(t,e){return P(e)?C(n,t,e):C(n,t,[e])}}},kt=s(b(["fantasy-land/chain","chain"],s((function(t,n){return J(t,xt(n))})),(function(t,n){return"function"==typeof n?function(e){return t(n(e))(e)}:Pt(!1)(J(t,n))}))),qt=y((function(t,n,e){if(t>n)throw new Error("min must not be greater than max in clamp(min, max, value)");return e<t?t:e>n?n:e}));function At(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var It=c((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function Mt(t,n,e,r){var o=function(o){for(var u=n.length,i=0;i<u;){if(t===n[i])return e[i];i+=1}for(var c in n[i+1]=t,e[i+1]=o,t)o[c]=r?Mt(t[c],n,e,!0):t[c];return o};switch(It(t)){case"Object":return o({});case"Array":return o([]);case"Date":return new Date(t.valueOf());case"RegExp":return At(t);default:return t}}var Ct=c((function(t){return null!=t&&"function"==typeof t.clone?t.clone():Mt(t,[],[],!0)})),$t=c((function(t){return function(n,e){return t(n,e)?-1:t(e,n)?1:0}})),Tt=c((function(t){return!t})),Lt=Ot(Tt);function Bt(t,n){return function(){return n.call(this,t.apply(this,arguments))}}function Ft(t,n){return function(){var e=arguments.length;if(0===e)return n();var r=arguments[e-1];return v(r)||"function"!=typeof r[t]?n.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,e-1))}}var Wt=y(Ft("slice",(function(t,n,e){return Array.prototype.slice.call(e,t,n)}))),zt=c(Ft("tail",Wt(1,1/0)));function Rt(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return l(arguments[0].length,Z(Bt,arguments[0],zt(arguments)))}var Gt=c((function(t){return S(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function Vt(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Rt.apply(this,Gt(arguments))}function Jt(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var t=Array.prototype.slice.call(arguments),n=t.pop();return Vt(Vt.apply(this,J(kt,t)),n)}function Dt(t,n){return function(){var e=this;return t.apply(e,arguments).then((function(t){return n.call(e,t)}))}}function Ut(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return l(arguments[0].length,Z(Dt,arguments[0],zt(arguments)))}function Kt(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return Ut.apply(this,Gt(arguments))}var Ht=U(0);function Xt(t){return t}var Yt=c(Xt),Zt=s((function(t,n){if(n.length<=0)return Yt;var e=Ht(n),r=zt(n);return l(e.length,(function(){return C((function(n,e){return t.call(this,e,n)}),e.apply(this,arguments),r)}))})),Qt=s((function(t,n){return Zt.apply(this,[t,Gt(n)])}));function tn(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function nn(t,n,e){for(var r=0,o=e.length;r<o;){if(t(n,e[r]))return!0;r+=1}return!1}var en="function"==typeof Object.is?Object.is:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};function rn(t,n,e,r){var o=tn(t);function u(t,n){return on(t,n,e.slice(),r.slice())}return!nn((function(t,n){return!nn(u,n,t)}),tn(n),o)}function on(t,n,e,r){if(en(t,n))return!0;var o=It(t);if(o!==It(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var n=String(t).match(/^function (\w*)/);return null==n?"":n[1]}(t.constructor))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!en(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!en(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var u=e.length-1;u>=0;){if(e[u]===t)return r[u]===n;u-=1}switch(o){case"Map":return t.size===n.size&&rn(t.entries(),n.entries(),e.concat([t]),r.concat([n]));case"Set":return t.size===n.size&&rn(t.values(),n.values(),e.concat([t]),r.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=V(t);if(i.length!==V(n).length)return!1;var c=e.concat([t]),s=r.concat([n]);for(u=i.length-1;u>=0;){var a=i[u];if(!L(a,n)||!on(n[a],t[a],c,s))return!1;u-=1}return!0}var un=s((function(t,n){return on(t,n,[],[])}));function cn(t,n,e){var r,o;if("function"==typeof t.indexOf)switch(typeof n){case"number":if(0===n){for(r=1/n;e<t.length;){if(0===(o=t[e])&&1/o===r)return e;e+=1}return-1}if(n!=n){for(;e<t.length;){if("number"==typeof(o=t[e])&&o!=o)return e;e+=1}return-1}return t.indexOf(n,e);case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,e);case"object":if(null===n)return t.indexOf(n,e)}for(;e<t.length;){if(un(t[e],n))return e;e+=1}return-1}function sn(t,n){return cn(n,t,0)>=0}function an(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var fn=function(t){return(t<10?"0":"")+t},ln="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+fn(t.getUTCMonth()+1)+"-"+fn(t.getUTCDate())+"T"+fn(t.getUTCHours())+":"+fn(t.getUTCMinutes())+":"+fn(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function dn(t){return function(){return!t.apply(this,arguments)}}function pn(t,n){for(var e=0,r=n.length,o=[];e<r;)t(n[e])&&(o[o.length]=n[e]),e+=1;return o}function hn(t){return"[object Object]"===Object.prototype.toString.call(t)}var yn=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},t}(),gn=s(b(["filter"],s((function(t,n){return new yn(t,n)})),(function(t,n){return hn(n)?C((function(e,r){return t(n[r])&&(e[r]=n[r]),e}),{},V(n)):pn(t,n)}))),vn=s((function(t,n){return gn(dn(t),n)}));function mn(t,n){var e=function(e){var r=n.concat([t]);return sn(e,r)?"<Circular>":mn(e,r)},r=function(t,n){return _((function(n){return an(n)+": "+e(t[n])}),n.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+_(e,t).join(", ")+"))";case"[object Array]":return"["+_(e,t).concat(r(t,vn((function(t){return/^\d+$/.test(t)}),V(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+e(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?e(NaN):an(ln(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+e(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+e(t.valueOf())+")":an(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var o=t.toString();if("[object Object]"!==o)return o}return"{"+r(t,V(t)).join(", ")+"}"}}var bn=c((function(t){return mn(t,[])})),wn=s((function(t,n){if(v(t)){if(v(n))return t.concat(n);throw new TypeError(bn(n)+" is not an array")}if(S(t)){if(S(n))return t+n;throw new TypeError(bn(n)+" is not a string")}if(null!=t&&Nt(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(null!=t&&Nt(t.concat))return t.concat(n);throw new TypeError(bn(t)+' does not have a method named "concat" or "fantasy-land/concat"')})),Nn=c((function(t){return l(Z(E,0,J((function(t){return t[0].length}),t)),(function(){for(var n=0;n<t.length;){if(t[n][0].apply(this,arguments))return t[n][1].apply(this,arguments);n+=1}}))})),jn=s((function(t,n){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new n}:_t(bt(t,(function(t,e,r,o,u,i,c,s,a,f){switch(arguments.length){case 1:return new n(t);case 2:return new n(t,e);case 3:return new n(t,e,r);case 4:return new n(t,e,r,o);case 5:return new n(t,e,r,o,u);case 6:return new n(t,e,r,o,u,i);case 7:return new n(t,e,r,o,u,i,c);case 8:return new n(t,e,r,o,u,i,c,s);case 9:return new n(t,e,r,o,u,i,c,s,a);case 10:return new n(t,e,r,o,u,i,c,s,a,f)}})))})),On=c((function(t){return jn(t.length,t)})),En=s(sn),_n=s((function(t,n){return p(Z(E,0,Y("length",n)),(function(){var e=arguments,r=this;return t.apply(r,_((function(t){return t.apply(r,e)}),n))}))})),Sn=function(){function t(t,n,e,r){this.valueFn=t,this.valueAcc=n,this.keyFn=e,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){var n;for(n in this.inputs)if(L(n,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[n]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){var e=this.keyFn(n);return this.inputs[e]=this.inputs[e]||[e,this.valueAcc],this.inputs[e][1]=this.valueFn(this.inputs[e][1],n),t},t}(),Pn=d(4,[],b([],d(4,[],(function(t,n,e,r){return new Sn(t,n,e,r)})),(function(t,n,e,r){return C((function(r,o){var u=e(o);return r[u]=t(L(u,r)?r[u]:Mt(n,[],[],!1),o),r}),{},r)}))),xn=Pn((function(t,n){return t+1}),0),kn=a(-1),qn=s((function(t,n){return null==n||n!=n?t:n})),An=y((function(t,n,e){var r=t(n),o=t(e);return r>o?-1:r<o?1:0}));function In(t,n,e){var r,o=typeof t;switch(o){case"string":case"number":return 0===t&&1/t==-1/0?!!e._items["-0"]||(n&&(e._items["-0"]=!0),!1):null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):o in e._items?t in e._items[o]||(n&&(e._items[o][t]=!0),!1):(n&&(e._items[o]={},e._items[o][t]=!0),!1);case"boolean":if(o in e._items){var u=t?1:0;return!!e._items[o][u]||(n&&(e._items[o][u]=!0),!1)}return n&&(e._items[o]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):o in e._items?!!sn(t,e._items[o])||(n&&e._items[o].push(t),!1):(n&&(e._items[o]=[t]),!1);case"undefined":return!!e._items[o]||(n&&(e._items[o]=!0),!1);case"object":if(null===t)return!!e._items.null||(n&&(e._items.null=!0),!1);default:return(o=Object.prototype.toString.call(t))in e._items?!!sn(t,e._items[o])||(n&&e._items[o].push(t),!1):(n&&(e._items[o]=[t]),!1)}}var Mn=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!In(t,!0,this)},t.prototype.has=function(t){return In(t,!1,this)},t}(),Cn=s((function(t,n){for(var e=[],r=0,o=t.length,u=n.length,i=new Mn,c=0;c<u;c+=1)i.add(n[c]);for(;r<o;)i.add(t[r])&&(e[e.length]=t[r]),r+=1;return e})),$n=y((function(t,n,e){for(var r=[],o=0,u=n.length;o<u;)nn(t,n[o],e)||nn(t,n[o],r)||r.push(n[o]),o+=1;return r})),Tn=s((function(t,n){var e={};for(var r in n)e[r]=n[r];return delete e[t],e})),Ln=y((function(t,n,e){var r=Array.prototype.slice.call(e,0);return r.splice(t,n),r})),Bn=y((function(t,n,e){return g(t,tt(n),e)})),Fn=s((function t(n,e){switch(n.length){case 0:return e;case 1:return D(n[0])&&v(e)?Ln(n[0],1,e):Tn(n[0],e);default:var r=n[0],o=Array.prototype.slice.call(n,1);return null==e[r]?e:D(r)&&v(e)?Bn(r,t(o,e[r]),e):gt(r,t(o,e[r]),e)}})),Wn=s((function(t,n){return t/n})),zn=function(){function t(t,n){this.xf=n,this.n=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,n)},t}(),Rn=s(b(["drop"],s((function(t,n){return new zn(t,n)})),(function(t,n){return Wt(Math.max(0,t),1/0,n)}))),Gn=function(){function t(t,n){this.xf=n,this.n=t,this.i=0}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){this.i+=1;var e=0===this.n?t:this.xf["@@transducer/step"](t,n);return this.n>=0&&this.i>=this.n?w(e):e},t}(),Vn=s(b(["take"],s((function(t,n){return new Gn(t,n)})),(function(t,n){return Wt(0,t<0?1/0:t,n)})));function Jn(t,n){return Vn(t<n.length?n.length-t:0,n)}var Dn=function(){function t(t,n){this.xf=n,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(n),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t}(),Un=s(b([],s((function(t,n){return new Dn(t,n)})),Jn));function Kn(t,n){for(var e=n.length-1;e>=0&&t(n[e]);)e-=1;return Wt(0,e+1,n)}var Hn=function(){function t(t,n){this.f=t,this.retained=[],this.xf=n}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.retain(t,n):this.flush(t,n)},t.prototype.flush=function(t,n){return t=C(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,n)},t.prototype.retain=function(t,n){return this.retained.push(n),t},t}(),Xn=s(b([],s((function(t,n){return new Hn(t,n)})),Kn)),Yn=function(){function t(t,n){this.xf=n,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){var e=!1;return this.seenFirstValue?this.pred(this.lastValue,n)&&(e=!0):this.seenFirstValue=!0,this.lastValue=n,e?t:this.xf["@@transducer/step"](t,n)},t}(),Zn=s((function(t,n){return new Yn(t,n)})),Qn=U(-1),te=s(b([],Zn,(function(t,n){var e=[],r=1,o=n.length;if(0!==o)for(e[0]=n[0];r<o;)t(Qn(e),n[r])||(e[e.length]=n[r]),r+=1;return e}))),ne=c(b([],Zn(un),te(un))),ee=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){if(this.f){if(this.f(n))return t;this.f=null}return this.xf["@@transducer/step"](t,n)},t}(),re=s(b(["dropWhile"],s((function(t,n){return new ee(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r&&t(n[e]);)e+=1;return Wt(e,1/0,n)}))),oe=s((function(t,n){return t||n})),ue=s((function(t,n){return Nt(t)?function(){return t.apply(this,arguments)||n.apply(this,arguments)}:Ot(oe)(t,n)})),ie=c((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():v(t)?[]:S(t)?"":hn(t)?{}:F(t)?function(){return arguments}():void 0})),ce=s((function(t,n){return Rn(t>=0?n.length-t:0,n)})),se=s((function(t,n){return un(ce(t.length,n),t)})),ae=y((function(t,n,e){return un(t(n),t(e))})),fe=y((function(t,n,e){return un(n[t],e[t])})),le=s((function t(n,e){var r,o,u,i=e instanceof Array?[]:{};for(o in e)u=typeof(r=n[o]),i[o]="function"===u?r(e[o]):r&&"object"===u?t(r,e[o]):e[o];return i})),de=function(){function t(t,n){this.xf=n,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.found=!0,t=w(this.xf["@@transducer/step"](t,n))),t},t}(),pe=s(b(["find"],s((function(t,n){return new de(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r;){if(t(n[e]))return n[e];e+=1}}))),he=function(){function t(t,n){this.xf=n,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.found=!0,t=w(this.xf["@@transducer/step"](t,this.idx))),t},t}(),ye=s(b([],s((function(t,n){return new he(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r;){if(t(n[e]))return e;e+=1}return-1}))),ge=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.last=n),t},t}(),ve=s(b([],s((function(t,n){return new ge(t,n)})),(function(t,n){for(var e=n.length-1;e>=0;){if(t(n[e]))return n[e];e-=1}}))),me=function(){function t(t,n){this.xf=n,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.lastIdx=this.idx),t},t}(),be=s(b([],s((function(t,n){return new me(t,n)})),(function(t,n){for(var e=n.length-1;e>=0;){if(t(n[e]))return e;e-=1}return-1}))),we=c(Pt(!0)),Ne=c((function(t){return p(t.length,(function(n,e){var r=Array.prototype.slice.call(arguments,0);return r[0]=e,r[1]=n,t.apply(this,r)}))})),je=s(Ft("forEach",(function(t,n){for(var e=n.length,r=0;r<e;)t(n[r]),r+=1;return n}))),Oe=s((function(t,n){for(var e=V(n),r=0;r<e.length;){var o=e[r];t(n[o],o,n),r+=1}return n})),Ee=c((function(t){for(var n={},e=0;e<t.length;)n[t[e][0]]=t[e][1],e+=1;return n})),_e=s(Ft("groupBy",Pn((function(t,n){return null==t&&(t=[]),t.push(n),t}),null))),Se=s((function(t,n){for(var e=[],r=0,o=n.length;r<o;){for(var u=r+1;u<o&&t(n[u-1],n[u]);)u+=1;e.push(n.slice(r,u)),r=u}return e})),Pe=s((function(t,n){return t>n})),xe=s((function(t,n){return t>=n})),ke=s((function(t,n){if(0===t.length||vt(n))return!1;for(var e=n,r=0;r<t.length;){if(vt(e)||!L(t[r],e))return!1;e=e[t[r]],r+=1}return!0})),qe=s((function(t,n){return ke([t],n)})),Ae=s((function(t,n){return t in n})),Ie=s(en),Me=y((function(t,n,e){return p(Math.max(t.length,n.length,e.length),(function(){return t.apply(this,arguments)?n.apply(this,arguments):e.apply(this,arguments)}))})),Ce=a(1),$e=s(sn),Te=Pn((function(t,n){return n}),null),Le=s((function(t,n){return"function"!=typeof n.indexOf||v(n)?cn(n,t,0):n.indexOf(t)})),Be=Wt(0,-1),Fe=y((function(t,n,e){return pn((function(n){return nn(t,n,e)}),n)})),We=y((function(t,n,e){t=t<e.length&&t>=0?t:e.length;var r=Array.prototype.slice.call(e,0);return r.splice(t,0,n),r})),ze=y((function(t,n,e){return t=t<e.length&&t>=0?t:e.length,[].concat(Array.prototype.slice.call(e,0,t),n,Array.prototype.slice.call(e,t))})),Re=s((function(t,n){for(var e,r,o=new Mn,u=[],i=0;i<n.length;)e=t(r=n[i]),o.add(e)&&u.push(r),i+=1;return u})),Ge=Re(Yt),Ve=s((function(t,n){var e,r;return t.length>n.length?(e=t,r=n):(e=n,r=t),Ge(pn(Ne(sn)(e),r))})),Je=s(Ft("intersperse",(function(t,n){for(var e=[],r=0,o=n.length;r<o;)r===o-1?e.push(n[r]):e.push(n[r],t),r+=1;return e})));var De="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),e=1,r=arguments.length;e<r;){var o=arguments[e];if(null!=o)for(var u in o)L(u,o)&&(n[u]=o[u]);e+=1}return n},Ue=s((function(t,n){var e={};return e[t]=n,e})),Ke={"@@transducer/init":Array,"@@transducer/step":function(t,n){return t.push(n),t},"@@transducer/result":Xt},He={"@@transducer/init":String,"@@transducer/step":function(t,n){return t+n},"@@transducer/result":Xt},Xe={"@@transducer/init":Object,"@@transducer/step":function(t,n){return De(t,P(n)?Ue(n[0],n[1]):n)},"@@transducer/result":Xt};var Ye=y((function(t,n,e){return m(t)?C(n(t),t["@@transducer/init"](),e):C(n(function(t){if(m(t))return t;if(P(t))return Ke;if("string"==typeof t)return He;if("object"==typeof t)return Xe;throw new Error("Cannot create transformer for "+t)}(t)),Mt(t,[],[],!1),e)})),Ze=c((function(t){for(var n=V(t),e=n.length,r=0,o={};r<e;){var u=n[r],i=t[u],c=L(i,o)?o[i]:o[i]=[];c[c.length]=u,r+=1}return o})),Qe=c((function(t){for(var n=V(t),e=n.length,r=0,o={};r<e;){var u=n[r];o[t[u]]=u,r+=1}return o})),tr=s((function(t,n){return p(t+1,(function(){var e=arguments[t];if(null!=e&&Nt(e[n]))return e[n].apply(e,Array.prototype.slice.call(arguments,0,t));throw new TypeError(bn(e)+' does not have a method named "'+n+'"')}))})),nr=s((function(t,n){return null!=n&&n.constructor===t||n instanceof t})),er=c((function(t){return null!=t&&un(t,ie(t))})),rr=tr(1,"join"),or=c((function(t){return _n((function(){return Array.prototype.slice.call(arguments,0)}),t)})),ur=c((function(t){var n,e=[];for(n in t)e[e.length]=n;return e})),ir=s((function(t,n){if("function"!=typeof n.lastIndexOf||v(n)){for(var e=n.length-1;e>=0;){if(un(n[e],t))return e;e-=1}return-1}return n.lastIndexOf(t)}));function cr(t){return"[object Number]"===Object.prototype.toString.call(t)}var sr=c((function(t){return null!=t&&cr(t.length)?t.length:NaN})),ar=s((function(t,n){return function(e){return function(r){return J((function(t){return n(t,r)}),e(t(r)))}}})),fr=c((function(t){return ar(U(t),Bn(t))})),lr=c((function(t){return ar(H(t),mt(t))})),dr=c((function(t){return ar(X(t),gt(t))})),pr=s((function(t,n){return t<n})),hr=s((function(t,n){return t<=n})),yr=y((function(t,n,e){for(var r=0,o=e.length,u=[],i=[n];r<o;)i=t(i[0],e[r]),u[r]=i[1],r+=1;return[i[0],u]})),gr=y((function(t,n,e){for(var r=e.length-1,o=[],u=[n];r>=0;)u=t(u[0],e[r]),o[r]=u[1],r-=1;return[u[0],o]})),vr=s((function(t,n){return C((function(e,r){return e[r]=t(n[r],r,n),e}),{},V(n))})),mr=s((function(t,n){return n.match(t)||[]})),br=s((function(t,n){return D(t)?!D(n)||n<1?NaN:(t%n+n)%n:NaN})),wr=y((function(t,n,e){return t(e)>t(n)?e:n})),Nr=Z(a,0),jr=c((function(t){return Nr(t)/t.length})),Or=c((function(t){var n=t.length;if(0===n)return NaN;var e=2-n%2,r=(n-e)/2;return jr(Array.prototype.slice.call(t,0).sort((function(t,n){return t<n?-1:t>n?1:0})).slice(r,r+e))})),Er=s((function(t,n){var e={};return l(n.length,(function(){var r=t.apply(this,arguments);return L(r,e)||(e[r]=n.apply(this,arguments)),e[r]}))})),_r=s((function(t,n){return De({},t,n)})),Sr=c((function(t){return De.apply(null,[{}].concat(t))})),Pr=y((function(t,n,e){var r,o={};for(r in n)L(r,n)&&(o[r]=L(r,e)?t(r,n[r],e[r]):n[r]);for(r in e)L(r,e)&&!L(r,o)&&(o[r]=e[r]);return o})),xr=y((function t(n,e,r){return Pr((function(e,r,o){return hn(r)&&hn(o)?t(n,r,o):n(e,r,o)}),e,r)})),kr=s((function(t,n){return xr((function(t,n,e){return n}),t,n)})),qr=s((function(t,n){return xr((function(t,n,e){return e}),t,n)})),Ar=y((function(t,n,e){return xr((function(n,e,r){return t(e,r)}),n,e)})),Ir=s((function(t,n){return De({},n,t)})),Mr=s((function(t,n){return De({},t,n)})),Cr=y((function(t,n,e){return Pr((function(n,e,r){return t(e,r)}),n,e)})),$r=s((function(t,n){return n<t?n:t})),Tr=y((function(t,n,e){return t(e)<t(n)?e:n})),Lr=s((function(t,n){return t%n})),Br=y((function(t,n,e){var r=e.length,o=e.slice(),u=t<0?r+t:t,i=n<0?r+n:n,c=o.splice(u,1);return u<0||u>=e.length||i<0||i>=e.length?e:[].concat(o.slice(0,i)).concat(c).concat(o.slice(i,e.length))})),Fr=s((function(t,n){return t*n})),Wr=c((function(t){return-t})),zr=s((function(t,n){return O(dn(t),n)})),Rr=c((function(t){return p(t<0?1:t+1,(function(){return U(t,arguments)}))})),Gr=y((function(t,n,e){return t(n(e))}));function Vr(t){return[t]}var Jr=c(Vr),Dr=s((function(t,n){for(var e={},r={},o=0,u=t.length;o<u;)r[t[o]]=1,o+=1;for(var i in n)r.hasOwnProperty(i)||(e[i]=n[i]);return e})),Ur=c((function(t){var n,e=!1;return l(t.length,(function(){return e?n:(e=!0,n=t.apply(this,arguments))}))}));function Kr(t,n){if(null==n||!Nt(n.then))throw new TypeError("`"+t+"` expected a Promise, received "+mn(n,[]))}var Hr=s((function(t,n){return Kr("otherwise",n),n.then(null,t)})),Xr=function(t){return{value:t,map:function(n){return Xr(n(t))}}},Yr=y((function(t,n,e){return t((function(t){return Xr(n(t))}))(e).value})),Zr=s((function(t,n){return[t,n]}));function Qr(t){return s((function(n,e){return l(Math.max(0,n.length-e.length),(function(){return n.apply(this,t(e,arguments))}))}))}var to=Qr(f),no=Qr(Ne(f)),eo=or([gn,vn]),ro=y((function(t,n,e){return un(H(t,e),n)})),oo=y((function(t,n,e){return qn(t,H(n,e))})),uo=y((function(t,n,e){return t(H(n,e))})),io=s((function(t,n){for(var e={},r=0;r<t.length;)t[r]in n&&(e[t[r]]=n[t[r]]),r+=1;return e})),co=s((function(t,n){for(var e={},r=0,o=t.length;r<o;){var u=t[r];e[u]=n[u],r+=1}return e})),so=s((function(t,n){var e={};for(var r in n)t(n[r],r,n)&&(e[r]=n[r]);return e}));function ao(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return Jt.apply(this,Gt(arguments))}var fo=s((function(t,n){return f([t],n)})),lo=Z(Fr,1),po=s((function(t,n){return p(n.length,(function(){for(var e=[],r=0;r<n.length;)e.push(n[r].call(this,arguments[r])),r+=1;return t.apply(this,e.concat(Array.prototype.slice.call(arguments,n.length)))}))})),ho=po(_,[co,Yt]),yo=y((function(t,n,e){return un(n,e[t])})),go=y((function(t,n,e){return nr(t,e[n])})),vo=y((function(t,n,e){return oo(t,[n],e)})),mo=y((function(t,n,e){return t(e[n])})),bo=s((function(t,n){return t.map((function(t){return H([t],n)}))})),wo=s((function(t,n){if(!cr(t)||!cr(n))throw new TypeError("Both arguments to range must be numbers");for(var e=[],r=t;r<n;)e.push(r),r+=1;return e})),No=y((function(t,n,e){for(var r=e.length-1;r>=0;)n=t(e[r],n),r-=1;return n})),jo=d(4,[],(function(t,n,e,r){return C((function(e,r){return t(e,r)?n(e,r):w(e)}),e,r)})),Oo=c(w),Eo=s((function(t,n){var e,r=Number(n),o=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(e=new Array(r);o<r;)e[o]=t(o),o+=1;return e})),_o=s((function(t,n){return Eo(tt(t),n)})),So=y((function(t,n,e){return e.replace(t,n)})),Po=y((function(t,n,e){for(var r=0,o=e.length,u=[n];r<o;)n=t(n,e[r]),u[r+1]=n,r+=1;return u})),xo=s((function(t,n){return"function"==typeof n.sequence?n.sequence(t):No((function(t,n){return ut(J(fo,t),n)}),t([]),n)})),ko=y((function(t,n,e){return Yr(t,tt(n),e)})),qo=s((function(t,n){return Array.prototype.slice.call(n,0).sort(t)})),Ao=s((function(t,n){return Array.prototype.slice.call(n,0).sort((function(n,e){var r=t(n),o=t(e);return r<o?-1:r>o?1:0}))})),Io=s((function(t,n){return Array.prototype.slice.call(n,0).sort((function(n,e){for(var r=0,o=0;0===r&&o<t.length;)r=t[o](n,e),o+=1;return r}))})),Mo=tr(1,"split"),Co=s((function(t,n){return[Wt(0,t,n),Wt(t,sr(n),n)]})),$o=s((function(t,n){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var e=[],r=0;r<n.length;)e.push(Wt(r,r+=t,n));return e})),To=s((function(t,n){for(var e=0,r=n.length,o=[];e<r&&!t(n[e]);)o.push(n[e]),e+=1;return[o,Array.prototype.slice.call(n,e)]})),Lo=s((function(t,n){return un(Vn(t.length,n),t)})),Bo=s((function(t,n){return Number(t)-Number(n)})),Fo=s((function(t,n){return wn(Cn(t,n),Cn(n,t))})),Wo=y((function(t,n,e){return wn($n(t,n,e),$n(t,e,n))})),zo=s((function(t,n){for(var e=n.length-1;e>=0&&t(n[e]);)e-=1;return Wt(e+1,1/0,n)})),Ro=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):w(t)},t}(),Go=s(b(["takeWhile"],s((function(t,n){return new Ro(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r&&t(n[e]);)e+=1;return Wt(0,e,n)}))),Vo=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n),this.xf["@@transducer/step"](t,n)},t}(),Jo=s(b([],s((function(t,n){return new Vo(t,n)})),(function(t,n){return t(n),n})));var Do=s((function(t,n){if(e=t,"[object RegExp]"!==Object.prototype.toString.call(e))throw new TypeError("test requires a value of type RegExp as its first argument; received "+bn(t));var e;return At(t).test(n)})),Uo=s((function(t,n){return Kr("andThen",n),n.then(t)})),Ko=tr(0,"toLowerCase"),Ho=c((function(t){var n=[];for(var e in t)L(e,t)&&(n[n.length]=[e,t[e]]);return n})),Xo=c((function(t){var n=[];for(var e in t)n[n.length]=[e,t[e]];return n})),Yo=tr(0,"toUpperCase"),Zo=p(4,(function(t,n,e,r){return C(t("function"==typeof n?k(n):n),e,r)})),Qo=c((function(t){for(var n=0,e=[];n<t.length;){for(var r=t[n],o=0;o<r.length;)void 0===e[o]&&(e[o]=[]),e[o].push(r[o]),o+=1;n+=1}return e})),tu=y((function(t,n,e){return"function"==typeof e["fantasy-land/traverse"]?e["fantasy-land/traverse"](n,t):xo(t,J(n,e))})),nu="\t\n\v\f\r \u2028\u2029\ufeff",eu=c("function"==typeof String.prototype.trim&&!nu.trim()&&"".trim()?function(t){return t.trim()}:function(t){var n=new RegExp("^["+nu+"]["+nu+"]*"),e=new RegExp("["+nu+"]["+nu+"]*$");return t.replace(n,"").replace(e,"")}),ru=s((function(t,n){return l(t.length,(function(){try{return t.apply(this,arguments)}catch(t){return n.apply(this,f([t],arguments))}}))})),ou=c((function(t){return function(){return t(Array.prototype.slice.call(arguments,0))}})),uu=c((function(t){return bt(1,t)})),iu=s((function(t,n){return p(t,(function(){for(var e,r=1,o=n,u=0;r<=t&&"function"==typeof o;)e=r===t?arguments.length:u+o.length,o=o.apply(this,Array.prototype.slice.call(arguments,u,e)),r+=1,u=e;return o}))})),cu=s((function(t,n){for(var e=t(n),r=[];e&&e.length;)r[r.length]=e[0],e=t(e[1]);return r})),su=s(Vt(Ge,f)),au=s((function(t,n){for(var e,r=0,o=n.length,u=[];r<o;)nn(t,e=n[r],u)||(u[u.length]=e),r+=1;return u})),fu=y((function(t,n,e){return au(t,f(n,e))})),lu=y((function(t,n,e){return t(e)?e:n(e)})),du=kt(Xt),pu=y((function(t,n,e){for(var r=e;!t(r);)r=n(r);return r})),hu=c((function(t){var n,e=[];for(n in t)e[e.length]=t[n];return e})),yu=function(t){return{value:t,"fantasy-land/map":function(){return this}}},gu=s((function(t,n){return t(yu)(n).value})),vu=y((function(t,n,e){return t(e)?n(e):e})),mu=s((function(t,n){for(var e in t)if(L(e,t)&&!t[e](n[e]))return!1;return!0})),bu=s((function(t,n){return mu(J(un,t),n)})),wu=s((function(t,n){return vn(Ne(sn)(t),n)})),Nu=s((function(t,n){return Boolean(!t^!n)})),ju=s((function(t,n){for(var e,r=0,o=t.length,u=n.length,i=[];r<o;){for(e=0;e<u;)i[i.length]=[t[r],n[e]],e+=1;r+=1}return i})),Ou=s((function(t,n){for(var e=[],r=0,o=Math.min(t.length,n.length);r<o;)e[r]=[t[r],n[r]],r+=1;return e})),Eu=s((function(t,n){for(var e=0,r=Math.min(t.length,n.length),o={};e<r;)o[t[e]]=n[e],e+=1;return o})),_u=y((function(t,n,e){for(var r=[],o=0,u=Math.min(n.length,e.length);o<u;)r[o]=t(n[o],e[o]),o+=1;return r})),Su=c((function(t){return p(t.length,(function(){var n=arguments;return function(){return t.apply(this,n)}}))}))},function(t,n,e){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),o=this&&this.__exportStar||function(t,n){for(var e in t)"default"===e||n.hasOwnProperty(e)||r(n,t,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(e(3),n),o(e(12),n),o(e(2),n),o(e(13),n),o(e(14),n);var u=e(7);Object.defineProperty(n,"learningFromEvidence",{enumerable:!0,get:function(){return u.learningFromEvidence}})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sortStringsAsc=n.objectEqualsByFirstObjectKeys=n.objectEqualsByIntersectionKeys=n.propIsNotNil=n.isNotObject=n.isNotNumber=n.isNotString=n.isObject=n.isNumber=n.isString=n.includesFlipped=n.isNotEmpty=n.isNotNil=void 0;const r=e(0);n.isNotNil=r.complement(r.isNil),n.isNotEmpty=r.complement(r.isEmpty),n.includesFlipped=r.curryN(2,r.flip(r.includes)),n.isString=r.is(String),n.isNumber=r.is(Number),n.isObject=r.is(Object),n.isNotString=r.complement(n.isString),n.isNotNumber=r.complement(n.isNumber),n.isNotObject=r.complement(n.isObject),n.propIsNotNil=r.pipe(r.prop,n.isNotNil),n.objectEqualsByIntersectionKeys=(t,n)=>{const e=r.pick(r.intersection(r.keys(t),r.keys(n)));return r.equals(e(t),e(n))},n.objectEqualsByFirstObjectKeys=(t,n)=>{const e=r.keys(t);return r.equals(r.pick(e,t),r.pick(e,n))};const o=r.invoker(1,"localeCompare");n.sortStringsAsc=r.sort(r.flip(o))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getNodeIdsWithoutParents=n.filterNodeWithParents=n.getNodesFromNetwork=n.hasNotNodeParents=n.getNodeParentsAndId=n.hasNodeParents=n.getNodeStates=n.getNodeId=n.getNodeParents=n.createNetwork=void 0;const r=e(0),o=e(6),u=e(2),i=(t,n)=>t.every(t=>-1!==n.indexOf(t));n.createNetwork=(...t)=>{const n=(t=>{const n=[...t].sort((t,n)=>t.parents.length-n.parents.length),e=[];return()=>{for(let t=0;t<n.length;t++){const r=n[t];if(0===r.parents.length||i(r.parents,e))return e.push(r.id),n.splice(t,1),r}}})(t);return t.reduce(t=>{const e=n();return r.isNil(e)?t:Object.assign({},o.addNode(t,e))},{})},n.getNodeParents=r.prop("parents"),n.getNodeId=r.prop("id"),n.getNodeStates=r.prop("states"),n.hasNodeParents=r.pipe(n.getNodeParents,u.isNotEmpty),n.getNodeParentsAndId=r.converge(r.append,[r.prop("id"),r.prop("parents")]),n.hasNotNodeParents=r.complement(n.hasNodeParents),n.getNodesFromNetwork=r.values,n.filterNodeWithParents=r.filter(n.hasNodeParents),n.getNodeIdsWithoutParents=r.pipe(n.getNodesFromNetwork,r.filter(n.hasNotNodeParents),r.map(n.getNodeId))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getPreNormalizedPotentials=n.infer=n.rawInfer=void 0;const r=e(1),o=e(17),u=e(22),i=e(0),c=e(5),s=e(23),a=e(24),f=e(25),l=e(9);n.rawInfer=(t,n={})=>{const e=c.prepareEvidence(t,n),i=Object.keys(e.softEvidence),{cliques:d,sepSets:p,junctionTree:h}=o.default(t,i),y=u.getCachedValues(d,n);if(y)return{cliques:d,cliquesPotentials:y};const g=s.default(d,t,e.hardEvidence),v=a.createMessagesByCliques(d),m=l.getConnectedComponents(h);let b;if(i.length>0){for(const t of d)if(i.every(n=>t.nodeIds.includes(n))){b=t.id;break}if(void 0===b)throw new Error("Implementation error: Big clique do not exist")}const w=a.collectNetworkEvidence(t,h,p,g,v,m,b);if(void 0!==b){const t=w[b];w[b]=f.IPFP(t,e.softEvidence)}const N=a.distributeNetworkEvidence(t,h,p,w,v,m,b),j=r.normalizeCliquePotentials(N);return u.setCachedValues(d,n,j),{cliques:d,cliquesPotentials:j}},n.infer=(t,e,o={})=>{const u=n.rawInfer(t,o);return((t,n,e)=>{const o=r.filterCliquesByNodeCombinations(t,e),u=n[r.getCliqueWithLessNodes(o).id],c=r.filterCliquePotentialsByNodeCombinations(u,e),s=r.mapPotentialsThen(c);return i.sum(s)})(u.cliques,u.cliquesPotentials,e)},n.getPreNormalizedPotentials=(t,n={})=>{const{cliques:e,sepSets:r,junctionTree:u}=o.default(t),i=c.prepareEvidence(t,n),f=s.default(e,t,i.hardEvidence);return{cliques:e,cliquesPotentials:a.default(t,u,e,r,f)}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.prepareEvidence=void 0,n.prepareEvidence=function(t,n){const e=JSON.parse(JSON.stringify(n)),r={softEvidence:{},hardEvidence:{}};for(const t of Object.keys(e)){const n=e[t];"string"!=typeof n?r.softEvidence[t]=n:r.hardEvidence[t]=n}for(const n of Object.keys(r.hardEvidence)){const e=r.hardEvidence[n],o=t[n];if(!o)throw new Error(`Evidence refers to unknown node '${n}'.`);if(!o.states.includes(e))throw new Error(`Hard evidence for '${n}' has unknown state '${e}'.`)}for(const n of Object.keys(r.softEvidence)){const e=r.softEvidence[n],o=t[n];let u=0;const i={};for(const t of o.states){void 0===e[t]&&(console.warn(`Soft evidence for '${n}' state '${t}' should be define, assuming 0 has evidence for the state`),e[t]=0);const r=e[t];if(!Number.isFinite(r)||r<0)throw new Error(`Soft evidence for '${n}' state '${t}' must be a non-negative finite number.`);i[t]=r,u+=r}if(u<=0)throw new Error(`Soft evidence for '${n}' has zero total weight across states.`);for(const t of o.states){const e=i[t]/u;if(r.softEvidence[n][t]=e,e>=.99){delete r.softEvidence[n],r.hardEvidence[n]=t;break}}}return r}},function(t,n,e){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),o=this&&this.__exportStar||function(t,n){for(var e in t)"default"===e||n.hasOwnProperty(e)||r(n,t,e)};Object.defineProperty(n,"__esModule",{value:!0}),n.infer=n.inferences=void 0;const u=e(10);n.inferences={enumeration:u.enumeration,junctionTree:u.junctionTree,variableElimination:u.variableElimination},o(e(27),n),n.infer=u.junctionTree.infer,o(e(33),n),o(e(58),n),o(e(7),n)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.learningFromEvidence=n.expectationStep=n.computeCompleteDataLogLikelihood=n.maximizationStep=n.getPotentialForFamily=void 0;const r=e(4);function o(t,n){const e=new Map;for(const r of t){const t={};for(const[e,o]of Object.entries(r.when))n.includes(e)&&(t[e]=o);const o=e.get(JSON.stringify(t))||0;e.set(JSON.stringify(t),o+r.then)}const r=[];for(const[t,n]of e)r.push({when:JSON.parse(t),then:n});return r}function u(t,n){const e=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(n));for(const t in e){const n=e[t],o=r[t];if(!o)throw new Error("Implementation error: no potential was found for the node");if(0===n.parents.length){const n={};let r=0;for(const e of o){n[e.when[t]]=e.then,r+=e.then}for(const t in n)n[t]/=r;e[t].cpt=n;continue}const u=[];for(const n of o){const e=n.when[t];delete n.when[t];const r=u.findIndex(t=>Object.keys(t.when).every(e=>n.when[e]===t.when[e]));-1!==r?u[r].then[e]=n.then:u.push({when:n.when,then:{[e]:n.then}})}for(let t=0;t<u.length;t++){let n=0;for(const e in u[t].then)n+=u[t].then[e];for(const e in u[t].then)u[t].then[e]/=n}e[t].cpt=u}return e}function i(t,n){let e=0;for(const r in t){const o=t[r],u=n[r];for(const t of u){const n=t.when;let u=0;if(0===o.parents.length){u=o.cpt[n[r]]}else{const t=o.cpt.find(t=>Object.keys(t.when).every(e=>n[e]===t.when[e]));if(!t)throw Error("Implementation error: no entry of context was found");u=t.then[n[r]]}e+=t.then*Math.log(u)}}return e}function c(t,n=[]){const e=JSON.parse(JSON.stringify(n));0===e.length&&e.push({});const u={};for(const n of e){const e=r.rawInfer(t,n);for(const n in t){const r=[n,...t[n].parents],i=(()=>{for(const t of e.cliques)if(r.every(n=>t.nodeIds.includes(n)))return t.id})();if(!i)throw new Error("Implementation error: no clique containing the node family was found");const c=o(e.cliquesPotentials[i],r);if(u[n])for(let t=0;t<u[n].length;t++)u[n][t].then+=c[t].then;else u[n]=c}}return u}n.getPotentialForFamily=o,n.maximizationStep=u,n.computeCompleteDataLogLikelihood=i,n.expectationStep=c,n.learningFromEvidence=function(t,n=[],e=1e-5){let r=JSON.parse(JSON.stringify(t)),o=-1/0,s=1/0,a=1/0,f=0;for(console.log("Learning from evidence started");s>0&&a>=e&&f<100;){f++;const t=c(r,n);r=u(r,t);const e=i(r,t);s=e-o,a=Math.abs(s/o)||1/0,console.log("Log likelihood: "+e+" Difference: "+s+" Ratio change: "+a),o=e}return console.log("Learning from evidence finished"),r}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createGraphBuilder=void 0;const r=e(0),o=e(1),u=r.pluck("id"),i=r.reduce((t,n)=>{const e=r.map(t=>[t,n.id],n.parents);return r.concat(t,e)},[]),c=(t=[])=>{let n=t;return{getValue:()=>n,setValue:t=>{n=t},add:t=>{n=r.append(t,n)},reject:t=>{n=r.reject(t,n)},any:t=>r.any(t,n)}},s=r.curry((t,n)=>r.any(r.equals(t),n)),a=r.curry((t,n,e)=>r.equals([t,n],e)||r.equals([n,t],e));n.createGraphBuilder=(t={})=>{const e=o.getNodesFromNetwork(t),f=c(u(e)),l=c(i(e)),d=(t,n)=>l.any(a(t,n));return{getNodes:()=>e,setNodeIds:t=>f.setValue(t),setEdges:t=>l.setValue(t),getNodesId:f.getValue,getEdges:l.getValue,addNodeId:t=>f.add(t),removeNodeId:t=>{l.reject(s(t)),f.reject(r.equals(t))},hasNodeId:t=>f.any(r.equals(t)),addEdge:(t,n)=>l.add([t,n]),removeEdge:(t,n)=>{l.reject(a(t,n))},hasEdge:d,hasNotEdge:r.complement(d),getNodeEdges:t=>r.reduce((n,[e,o])=>r.equals(t,e)?r.append(o,n):r.equals(t,o)?r.append(e,n):n,[],l.getValue()),clone:()=>{const e=n.createGraphBuilder(t);return e.setNodeIds(f.getValue()),e.setEdges(l.getValue()),e}}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getConnectedComponents=void 0;const r=e(0);n.getConnectedComponents=t=>{const n=t.getNodesId(),e=new Set,o=[],u=n=>{const o=t.getNodeEdges(n).filter(t=>!e.has(t));return e.add(n),r.reduce((t,n)=>(t.push(...u(n)),t),[n],o)};for(const t of n)e.has(t)||o.push(u(t));return o}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.variableElimination=n.junctionTree=n.enumeration=void 0;const r=e(11);n.enumeration=r;const o=e(4);n.junctionTree=o;const u=e(26);n.variableElimination=u},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.infer=n.recursiveEnumeration=void 0;const r=e(1),o=e(0),u=e(5),i=new WeakMap,c=(t,n)=>{const e=Object.keys(n);return t.filter(t=>{for(let r=0;r<e.length;r++){const o=e[r];if(t[o]!==n[o])return!1}return!0})};n.recursiveEnumeration=(t,e,u)=>{let s=i.get(t);void 0===s&&(s=r.buildCombinations(t),i.set(t,s));let a=c(s,e),f=1;return u&&(a=c(a,u),f=n.recursiveEnumeration(t,u)),((t,n)=>{const e=[];for(let r=0;r<n.length;r++){let u=1;const i=n[r],c=Object.keys(i);for(let n=0;n<c.length;n++){const e=c[n],r=t[e];if(0===r.parents.length){u*=r.cpt[i[e]]}else{const t=r.cpt,n={};for(let t=0;t<r.parents.length;t++){const e=r.parents[t];n[e]=i[e]}for(let r=0;r<t.length;r++){const c=t[r];if(o.equals(c.when,n)){u*=c.then[i[e]];break}}}}e.push(u)}let r=0;for(let t=0;t<e.length;t++)r+=e[t];return r})(t,a)/f},n.infer=(t,e,r={})=>{const o=u.prepareEvidence(t,r).hardEvidence;return n.recursiveEnumeration(t,e,o)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.buildCombinations=void 0;n.buildCombinations=(t,n)=>((t,n)=>{const e=[],r=(n,o={})=>{if(0===n.length)e.push(o);else{const[e,...u]=n,{states:i}=t[e];for(const t of i)r(u,Object.assign(Object.assign({},o),{[e]:t}))}};return r(n),e})(t,n||Object.keys(t))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeCliquePotentials=n.normalizeCliquePotential=n.filterCliquePotentialsByNodeCombinations=n.filterCliquesByNodeCombinations=n.getCliqueWithLessNodes=n.hasNodeIdAndParentsInClique=n.hasNodeIdsInClique=n.sumCliquePotentials=n.mapPotentialsThen=void 0;const r=e(0),o=e(2),u=e(3),i=r.prop("nodeIds"),c=r.ifElse(r.equals(0),r.always(1),r.identity),s=r.pipe(i,r.length);n.mapPotentialsThen=r.pluck("then"),n.sumCliquePotentials=r.pipe(n.mapPotentialsThen,r.sum,c),n.hasNodeIdsInClique=r.useWith(r.all,[r.pipe(r.prop("nodeIds"),o.includesFlipped),r.identity]),n.hasNodeIdAndParentsInClique=r.useWith(n.hasNodeIdsInClique,[r.identity,u.getNodeParentsAndId]),n.getCliqueWithLessNodes=t=>{const n=r.head(t);if(n)return r.reduce(r.minBy(s),n,r.tail(t));throw new Error("Cliques are empty")},n.filterCliquesByNodeCombinations=(t,n={})=>r.filter(r.pipe(r.prop("nodeIds"),r.intersection(r.keys(n)),o.isNotEmpty),t);const a=r.curry((t,n)=>{const{when:e}=n;return r.all(n=>{const r=e[n],o=t[n];return null==o||r===o},r.keys(e))});n.filterCliquePotentialsByNodeCombinations=(t,n)=>r.filter(a(n),t),n.normalizeCliquePotential=t=>{const e=n.sumCliquePotentials(t);return t.map(t=>(t.then=t.then/e,t))},n.normalizeCliquePotentials=t=>{for(const e of Object.keys(t))t[e]=n.normalizeCliquePotential(t[e]);return t}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createSepSets=void 0;const r=e(0),o=e(2),u=e(15),i=r.addIndex(r.forEach),c=(t,n)=>n.sharedNodes.length-t.sharedNodes.length,s=(t,n,e)=>r.reduce((n,o)=>{const u=r.append(o,n);return((t,n)=>{const e={},o=(t,u)=>{e[t]=!0;const i=r.reduce((n,{ca:e,cb:o})=>r.equals(t,o)?r.append(e,n):r.equals(t,e)?r.append(o,n):n,[],n);return r.any(n=>{if(e[n]){if(n!==u)return!0}else if(o(n,t))return!0;return!1},i)};return r.any(({id:t})=>!e[t]&&o(t),t)})(t,u)?(e(o.ca,o.cb),n):u},[],(t=>{const n=r.clone(t);return u.sort(n,c),n})(n));n.createSepSets=(t,n)=>{const e=[];return i((n,u)=>{const i=r.drop(u+1,t);r.forEach(t=>{const r=((t,n)=>{const e=new Set(t.nodeIds),r=new Set(n.nodeIds);return Array(...new Set([...t.nodeIds,...n.nodeIds])).filter(t=>e.has(t)&&r.has(t))})(n,t);o.isNotEmpty(r)&&e.push({ca:n.id,cb:t.id,sharedNodes:r})},i)},t),s(t,e,n)}},function(t,n,e){t.exports=e(16)},function(t,n,e){var r,o,u;o=[n],void 0===(u="function"==typeof(r=function(t){"use strict";t.__esModule=!0,t.sort=function(t,n,e,i){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");n?"function"!=typeof n&&(i=e,e=n,n=r):n=r,e||(e=0),i||(i=t.length);var c=i-e;if(!(c<2)){var a=0;if(c<32)return a=o(t,e,i,n),void u(t,e,i,e+a,n);var f=new s(t,n),l=function(t){for(var n=0;t>=32;)n|=1&t,t>>=1;return t+n}(c);do{if((a=o(t,e,i,n))<l){var d=c;d>l&&(d=l),u(t,e,e+d,e+a,n),a=d}f.pushRun(e,a),f.mergeRuns(),c-=a,e+=a}while(0!==c);f.forceMergeRuns()}};var n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function e(t){return t<1e5?t<100?t<10?0:1:t<1e4?t<1e3?2:3:4:t<1e7?t<1e6?5:6:t<1e9?t<1e8?7:8:9}function r(t,r){if(t===r)return 0;if(~~t===t&&~~r===r){if(0===t||0===r)return t<r?-1:1;if(t<0||r<0){if(r>=0)return-1;if(t>=0)return 1;t=-t,r=-r}var o=e(t),u=e(r),i=0;return o<u?(t*=n[u-o-1],r/=10,i=-1):o>u&&(r*=n[o-u-1],t/=10,i=1),t===r?i:t<r?-1:1}var c=String(t),s=String(r);return c===s?0:c<s?-1:1}function o(t,n,e,r){var o=n+1;if(o===e)return 1;if(r(t[o++],t[n])<0){for(;o<e&&r(t[o],t[o-1])<0;)o++;!function(t,n,e){for(e--;n<e;){var r=t[n];t[n++]=t[e],t[e--]=r}}(t,n,o)}else for(;o<e&&r(t[o],t[o-1])>=0;)o++;return o-n}function u(t,n,e,r,o){for(r===n&&r++;r<e;r++){for(var u=t[r],i=n,c=r;i<c;){var s=i+c>>>1;o(u,t[s])<0?c=s:i=s+1}var a=r-i;switch(a){case 3:t[i+3]=t[i+2];case 2:t[i+2]=t[i+1];case 1:t[i+1]=t[i];break;default:for(;a>0;)t[i+a]=t[i+a-1],a--}t[i]=u}}function i(t,n,e,r,o,u){var i=0,c=0,s=1;if(u(t,n[e+o])>0){for(c=r-o;s<c&&u(t,n[e+o+s])>0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),i+=o,s+=o}else{for(c=o+1;s<c&&u(t,n[e+o-s])<=0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c);var a=i;i=o-s,s=o-a}for(i++;i<s;){var f=i+(s-i>>>1);u(t,n[e+f])>0?i=f+1:s=f}return s}function c(t,n,e,r,o,u){var i=0,c=0,s=1;if(u(t,n[e+o])<0){for(c=o+1;s<c&&u(t,n[e+o-s])<0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c);var a=i;i=o-s,s=o-a}else{for(c=r-o;s<c&&u(t,n[e+o+s])>=0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),i+=o,s+=o}for(i++;i<s;){var f=i+(s-i>>>1);u(t,n[e+f])<0?s=f:i=f+1}return s}var s=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.array=null,this.compare=null,this.minGallop=7,this.length=0,this.tmpStorageLength=256,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=n,this.compare=e,this.length=n.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return t.prototype.pushRun=function(t,n){this.runStart[this.stackSize]=t,this.runLength[this.stackSize]=n,this.stackSize+=1},t.prototype.mergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;if(t>=1&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||t>=2&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])this.runLength[t-1]<this.runLength[t+1]&&t--;else if(this.runLength[t]>this.runLength[t+1])break;this.mergeAt(t)}},t.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;t>0&&this.runLength[t-1]<this.runLength[t+1]&&t--,this.mergeAt(t)}},t.prototype.mergeAt=function(t){var n=this.compare,e=this.array,r=this.runStart[t],o=this.runLength[t],u=this.runStart[t+1],s=this.runLength[t+1];this.runLength[t]=o+s,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var a=c(e[u],e,r,o,0,n);r+=a,0!=(o-=a)&&0!==(s=i(e[r+o-1],e,u,s,s-1,n))&&(o<=s?this.mergeLow(r,o,u,s):this.mergeHigh(r,o,u,s))},t.prototype.mergeLow=function(t,n,e,r){var o=this.compare,u=this.array,s=this.tmp,a=0;for(a=0;a<n;a++)s[a]=u[t+a];var f=0,l=e,d=t;if(u[d++]=u[l++],0!=--r)if(1!==n){for(var p=this.minGallop;;){var h=0,y=0,g=!1;do{if(o(u[l],s[f])<0){if(u[d++]=u[l++],y++,h=0,0==--r){g=!0;break}}else if(u[d++]=s[f++],h++,y=0,1==--n){g=!0;break}}while((h|y)<p);if(g)break;do{if(0!==(h=c(u[l],s,f,n,0,o))){for(a=0;a<h;a++)u[d+a]=s[f+a];if(d+=h,f+=h,(n-=h)<=1){g=!0;break}}if(u[d++]=u[l++],0==--r){g=!0;break}if(0!==(y=i(s[f],u,l,r,0,o))){for(a=0;a<y;a++)u[d+a]=u[l+a];if(d+=y,l+=y,0==(r-=y)){g=!0;break}}if(u[d++]=s[f++],1==--n){g=!0;break}p--}while(h>=7||y>=7);if(g)break;p<0&&(p=0),p+=2}if(this.minGallop=p,p<1&&(this.minGallop=1),1===n){for(a=0;a<r;a++)u[d+a]=u[l+a];u[d+r]=s[f]}else{if(0===n)throw new Error("mergeLow preconditions were not respected");for(a=0;a<n;a++)u[d+a]=s[f+a]}}else{for(a=0;a<r;a++)u[d+a]=u[l+a];u[d+r]=s[f]}else for(a=0;a<n;a++)u[d+a]=s[f+a]},t.prototype.mergeHigh=function(t,n,e,r){var o=this.compare,u=this.array,s=this.tmp,a=0;for(a=0;a<r;a++)s[a]=u[e+a];var f=t+n-1,l=r-1,d=e+r-1,p=0,h=0;if(u[d--]=u[f--],0!=--n)if(1!==r){for(var y=this.minGallop;;){var g=0,v=0,m=!1;do{if(o(s[l],u[f])<0){if(u[d--]=u[f--],g++,v=0,0==--n){m=!0;break}}else if(u[d--]=s[l--],v++,g=0,1==--r){m=!0;break}}while((g|v)<y);if(m)break;do{if(0!=(g=n-c(s[l],u,t,n,n-1,o))){for(n-=g,h=1+(d-=g),p=1+(f-=g),a=g-1;a>=0;a--)u[h+a]=u[p+a];if(0===n){m=!0;break}}if(u[d--]=s[l--],1==--r){m=!0;break}if(0!=(v=r-i(u[f],s,0,r,r-1,o))){for(r-=v,h=1+(d-=v),p=1+(l-=v),a=0;a<v;a++)u[h+a]=s[p+a];if(r<=1){m=!0;break}}if(u[d--]=u[f--],0==--n){m=!0;break}y--}while(g>=7||v>=7);if(m)break;y<0&&(y=0),y+=2}if(this.minGallop=y,y<1&&(this.minGallop=1),1===r){for(h=1+(d-=n),p=1+(f-=n),a=n-1;a>=0;a--)u[h+a]=u[p+a];u[d]=s[l]}else{if(0===r)throw new Error("mergeHigh preconditions were not respected");for(p=d-(r-1),a=0;a<r;a++)u[p+a]=s[a]}}else{for(h=1+(d-=n),p=1+(f-=n),a=n-1;a>=0;a--)u[h+a]=u[p+a];u[d]=s[l]}else for(p=d-(r-1),a=0;a<r;a++)u[p+a]=s[a]},t}()})?r.apply(n,o):r)||(t.exports=u)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),o=e(18),u=e(8),i=e(20),c=e(1),s=e(21),a=new WeakMap;function f(t,n){const e=function(t,n){for(const e of n)if(!t.hasNodeId(e))throw new Error(`[Node "${e}"]: This node is not in the network.`);for(let e=0;e<n.length;e++){const r=n[e];for(let o=e+1;o<n.length;o++){const e=n[o];t.hasEdge(r,e)||t.addEdge(r,e)}}return t}(i.createMoralGraph(t),n),r=s.createTriangulatedGraph(e);return o.createCliqueGraph(r)}n.default=(t,n)=>{const e=a.get(t);if(r.isNil(e)){const{graph:e,cliques:r}=f(u.createGraphBuilder(t),void 0!==n?n:[]),o={cliques:r,sepSets:c.createSepSets(r,e.removeEdge),junctionTree:e};return a.set(t,o),o}return e}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createCliqueGraph=void 0;const r=e(0),o=e(19),u=e(8),i=r.addIndex(r.forEach);n.createCliqueGraph=t=>{const n=o.createCliques(t),e=u.createGraphBuilder();return i((t,o)=>{const u=r.drop(o+1,n);e.addNodeId(t.id),r.forEach(n=>{((t,n)=>r.any(t=>r.includes(t,n.nodeIds),t.nodeIds))(t,n)&&e.addEdge(t.id,n.id)},u)},n),{graph:e,cliques:n}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createCliques=void 0;const r=e(0),o=(t,n)=>{const e=(t=>(n,e)=>r.reduce((e,o)=>{const u=r.intersection(t.getNodeEdges(o),n);return u.length>e.length?u:e},[],r.union(n,e)))(t),o=(u,i,c)=>{r.isEmpty(i)&&r.isEmpty(c)&&n(u);const s=e(i,c);for(const n of r.difference(i,s)){const e=t.getNodeEdges(n);o(r.append(n,u),r.intersection(i,e),r.intersection(c,e));const s=i.indexOf(n);i.splice(s,1),c.push(n)}};return o};n.createCliques=t=>{let n=0;const e=[];return o(t,t=>{e.push({id:""+n++,nodeIds:t})})([],t.getNodesId(),[]),e}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createMoralGraph=void 0;const r=e(0),o=e(1),u=r.addIndex(r.forEach);n.createMoralGraph=t=>{const n=t.clone();return r.forEach(t=>{u((e,o)=>{const u=r.drop(o+1,t.parents);r.forEach(t=>{n.hasNotEdge(e,t)&&n.addEdge(e,t)},u)},t.parents)},o.filterNodeWithParents(n.getNodes())),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createTriangulatedGraph=void 0;const r=e(0),o=e(1),u=r.addIndex(r.forEach),i=t=>({[Symbol.iterator]:()=>{const n=t.getNodesId(),e=new Set,u=r.filter(t=>!e.has(t));return{next:()=>{const i=u(n);if(o.isNotEmpty(i)){const n=((t,n)=>{const e=r.head(n),o=r.minBy(n=>t.getNodeEdges(n).length);if(e)return r.reduce(o,e,r.tail(n));throw new Error("There are not node ids available.")})(t,i);return e.add(n),{done:!1,value:n}}return{done:!0,value:""}}}}}),c=t=>t.getNodes().filter(n=>(n=>{const e=t.getNodeEdges(n.id);let o=!0;for(let n=0;n<e.length-1&&o;n++){const u=e[n];o=r.drop(n+1,e).every(n=>t.hasEdge(u,n)||t.hasEdge(n,u))}return o})(n)).map(t=>t.id);n.createTriangulatedGraph=t=>{const n=t.clone(),e=n.clone();c(e).forEach(t=>e.removeNodeId(t));const o=(s=e,Array.from(i(s)));var s;return r.forEach(t=>{const o=e.getNodeEdges(t);u((t,u)=>{const i=r.drop(u+1,o);r.forEach(r=>{e.hasNodeId(t)&&e.hasNodeId(r)&&e.hasNotEdge(t,r)&&(e.addEdge(t,r),n.addEdge(t,r))},i)},o),e.removeNodeId(t)},o),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setCachedValues=n.getCachedValues=void 0;const r=e(1),o=new WeakMap,u=new WeakMap;n.getCachedValues=(t,n)=>{const e=o.get(t),i=u.get(n);return r.isNotNil(e)&&r.isNotNil(i)?e:null},n.setCachedValues=(t,n,e)=>{o.set(t,e),u.set(n,!0)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),o=e(1),u=(t,n)=>{const e=new Set;return r.reduce((t,u)=>r.assoc(u.id,((t,n,e)=>o.getNodesFromNetwork(t).reduce((t,u)=>o.hasNodeIdAndParentsInClique(n,u)&&!e.has(u.id)?(e.add(u.id),r.append(u.id,t)):t,[]))(n,u,e),t),{},t.sort((t,n)=>t.nodeIds.length-n.nodeIds.length))},i=(t,n)=>{const e=n.cpt,o=((t,n)=>r.reduce((t,e)=>r.assoc(e,n[e],t),{},t.parents))(n,t),u=r.find(r.pipe(r.prop("when"),r.equals(o)),e);if(u)return u.then[t[n.id]];throw new Error("Not found combination in node")},c=(t,n,e)=>{const u=r.map(n=>t[n],e),c=r.map((t=>n=>o.hasNodeParents(n)?i(t,n):((t,n)=>n.cpt[t[n.id]])(t,n))(n),u);return r.reduce(r.multiply,1,c)},s=(t,n,e,r)=>o.objectEqualsByIntersectionKeys(e,t)?c(n,t,r):0,a=(t,n,e,u)=>{const i=o.buildCombinations(n,t.nodeIds);return r.map(((t,n,e,r)=>o=>({when:o,then:s(o,n,e,r[t.id])}))(t,n,e,u),i)};n.default=(t,n,e)=>{const r=u(t,n),o={};for(const u of t)o[u.id]=a(u,n,e,r);return o}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.distributeNetworkEvidence=n.collectNetworkEvidence=n.marginalizePotentials=n.createMessagesByCliques=n.findSepSetWithCliques=void 0;const r=e(0),o=e(1),u=e(9),i=r.curry((t,n,e)=>e.ca===n&&e.cb===t);n.findSepSetWithCliques=(t,n,e)=>r.find(r.anyPass([i(t,n),i(n,t)]),e);const c=r.map(t=>({when:t,then:0}));n.createMessagesByCliques=r.reduce((t,n)=>r.assoc(n.id,new Map,t),{}),n.marginalizePotentials=(t,n,e)=>r.reduce((t,n)=>{const u=r.sum(e.filter(t=>o.objectEqualsByFirstObjectKeys(n.when,t.when)).map(r.prop("then"))),i=r.assoc("then",u,n);return r.append(i,t)},[],c(o.buildCombinations(t,n)));const s=r.pipe(r.path([0,"when"]),r.keys),a=r.curry((t,n,e)=>((t,n,e)=>{const o=r.pick(t);return r.equals(o(n.when),o(e.when))})(t,n,e)?r.assoc("then",r.multiply(e.then,n.then),e):e),f=(t,e,u,i,c,f)=>{const l=c<f?c:f,d=c<f?f:c,p=i[l].get(d),h=((t,e,r,o)=>{const u=n.findSepSetWithCliques(r,o,e);if(u)return u.sharedNodes.sort();throw new Error(`SepSet not found for cliques with id: "${r}" and "${o}"`)})(0,e,c,f),y=n.marginalizePotentials(t,h,u[c]),g=p?(v=y,m=p,r.map(t=>{const{when:n,then:e}=t,u=m.find(t=>o.objectEqualsByFirstObjectKeys(n,t.when));return u?r.assoc("then",r.divide(e,u.then||1),t):t},v)):y;var v,m;u[f]=((t,n)=>{const e=s(n),o=a(e);return r.reduce((t,n)=>r.map(o(n),t),t,n)})(u[f],g),i[l].set(d,y)},l=(t,n,e,r,o,u)=>{const i=(u,c)=>{const s=n.getNodeEdges(u);for(const t of s)c&&t===c||i(t,u);c&&f(t,e,o,r,u,c)};return i(u),o};n.collectNetworkEvidence=function(t,n,e,o,u,i,c){return r.reduce((r,o)=>{let i=c;if(void 0===i||!o.includes(i)){const[t]=o;i=t}return l(t,n,e,u,r,i)},o,i)};const d=(t,n,e,r,o,u)=>{const i=(u,c)=>{const s=n.getNodeEdges(u);for(const n of s)c&&n===c||(f(t,e,o,r,u,n),i(n,u))};return i(u),o};n.distributeNetworkEvidence=function(t,n,e,o,u,i,c=""){return r.reduce((r,i)=>{let s=c;if(!i.includes(c)){const[t]=i;s=t}return d(t,n,e,u,o,s)},o,i)},n.default=(t,e,o,i,c)=>{const s=n.createMessagesByCliques(o),a=u.getConnectedComponents(e);return r.reduce((n,[r])=>{const o=l(t,e,i,s,n,r);return d(t,e,i,s,o,r)},c,a)}},function(t,n,e){"use strict";function r(t,n){const e={};for(const r of t){const t=r.when[n];t in e?e[t]+=r.then:e[t]=r.then}return e}Object.defineProperty(n,"__esModule",{value:!0}),n.IPFP=void 0,n.IPFP=function(t,n,e=1e-4){const o=JSON.parse(JSON.stringify(t)),u=(t,n)=>{let e=0;for(let r=0;r<t.length;r++){const o=Math.abs(t[r].then-n[r].then);e=Math.max(e,o)}return e};let i=0,c=1;for(;c>e&&i<100;){i++;const t=JSON.parse(JSON.stringify(o));for(const t in n){const e=n[t],u=r(o,t),i={};for(const n in e)i[n]=e[n]/u[n],i[n]===1/0&&(console.warn("The provided evidence for node "+t+" is imposible."),i[n]=0);for(let n=0;n<o.length;n++){const e=o[n].when[t];o[n].then*=i[e]}}c=u(t,o)}return o}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.infer=void 0;const r=e(5);function o(t,n){const e=[];for(let r=0;r<t.length;r++)for(let o=0;o<n.length;o++){const u=Object.assign(Object.assign({},t[r].states),n[o].states),i=Object.keys(u);e.some(t=>i.every(n=>t.states[n]===u[n]))||e.push({states:u,value:0})}const r=Object.keys(t[0].states),o=Object.keys(n[0].states);for(let u=0;u<e.length;u++){const i=e[u],c=t.find(t=>r.every(n=>t.states[n]===i.states[n])),s=n.find(t=>o.every(n=>t.states[n]===i.states[n]));if(void 0===c||void 0===s)throw new Error("Fatal error");i.value=c.value*s.value}return e}function u(t,n){const e=[];for(let r=0;r<t.length;r++){const o=Object.assign({},t[r].states);delete o[n];const u=Object.keys(o),i=e.find(t=>u.every(n=>t.states[n]===o[n]));void 0===i?e.push({states:o,value:t[r].value}):i.value+=t[r].value}return e}n.infer=(t,n={},e={})=>{const i=r.prepareEvidence(t,e).hardEvidence,c=Object.keys(t),s=Object.keys(n),a=i?Object.keys(i):[],f=c.filter(t=>!s.some(n=>n===t)&&!a.some(n=>n===t)),l=c.map(n=>function(t,n){const e=[];if(0===t.parents.length){const n=t.cpt;for(let r=0;r<t.states.length;r++){const o=t.states[r];e.push({states:{[t.id]:o},value:n[o]})}}else{const n=t.cpt;for(let r=0;r<n.length;r++)for(let o=0;o<t.states.length;o++){const u=t.states[o];e.push({states:Object.assign(Object.assign({},n[r].when),{[t.id]:u}),value:n[r].then[u]})}}if(n){const t=Object.keys(n);for(let r=e.length-1;r>=0;r--)for(let o=0;o<t.length;o++){const u=t[o];if(e[r].states[u]&&e[r].states[u]!==n[u]){e.splice(r,1);break}}}return e}(t[n],i));for(;f.length>0;){const t=f.shift();if(void 0===t)throw new Error("No variables to eliminate");const n=l.filter(n=>Object.keys(n[0].states).some(n=>n===t)),e=u(n.reduce((t,n)=>o(t,n)),t);for(let t=0;t<n.length;t++)l.splice(l.indexOf(n[t]),1);l.push(e)}const d=function(t){const n=t.reduce((t,n)=>t+n.value,0);return 0===n?t:t.map(t=>({states:Object.assign({},t.states),value:t.value/n}))}(l.filter(t=>Object.keys(t[0].states).length>0).sort((t,n)=>t.length-n.length).reduce((t,n)=>o(t,n))).find(t=>s.every(e=>t.states[e]===n[e]));return void 0===d?0:d.value}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addNode=void 0;const r=e(0),o=e(28);n.addNode=(t,n)=>(((t,n)=>{if(r.has(t.id,n))throw new Error(`[Node "${t.id}"]: This node is already added to the network.`)})(n,t),o.default(n,t),r.assoc(n.id,n,t))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(29),o=e(30),u=e(31),i=e(32);n.default=(t,n)=>{o.default(t),i.default(t),u.default(t,n),r.default(t,n)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(1),o=e(0),u=o.pluck("when"),i=(t,n,e)=>{o.forEach(n=>{if(o.isNil(e[n]))throw new Error(`[Node "${t}"]: Missing probability for "${n}" state.\n\nNode cpt: ${o.toString(e)}`);if(r.isNotNumber(e[n]))throw new Error(`[Node "${t}"]: All probabilities must be a number.\n\nNode cpt type for "${n}": ${o.type(e[n])}\nNode cpt for "${n}": ${o.toString(e[n])}\nNode cpt: ${o.toString(e)}`)},n)},c=(t,n)=>{const e=r.buildCombinations(n,t.parents),i=u(t.cpt);((t,n,e)=>{o.forEach(r=>{if(o.none(o.equals(r),n))throw new Error(`[Node "${t}"]: The node cpt has one missing combination.\n\nMissing node cpt combination (when): ${o.toString(r)}\nNode cpt combinations (when's): ${o.toString(n)}\nCombinations needed: ${o.toString(e)}`)},e)})(t.id,i,e),((t,n,e)=>{o.forEach(r=>{o.none(o.equals(r),e)&&console.warn(`[Node "${t}"]: The node cpt has one extra/invalid combination.\n\nInvalid node cpt combination (when): ${o.toString(r)}\nNode cpt combinations (when's): ${o.toString(n)}\nCombinations needed: ${o.toString(e)}`)},n)})(t.id,i,e)};n.default=(t,n)=>{if(o.isNil(t.cpt))throw new Error(`[Node "${t.id}"]: The node cpt is required and must be an object or an array.\n\nNode: ${o.toString(t)}`);if(r.isNotObject(t.cpt))throw new Error(`[Node "${t.id}"]: The node cpt must be an object or an array.\n\nNode cpt type: ${o.type(t.cpt)}\nNode cpt: ${o.toString(t.cpt)}`);Array.isArray(t.cpt)?(c(t,n),o.forEach(n=>{i(t.id,t.states,n.then)},t.cpt)):i(t.id,t.states,t.cpt)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),o=e(1);n.default=t=>{if(r.isNil(t.id))throw new Error("The node id is required and must be a string.\n\nNode: "+r.toString(t));if(o.isNotString(t.id))throw new Error(`The node id must be a string.\n\nNode id type: ${r.type(t.id)}\nNode id: ${r.toString(t.id)}\nNode: ${r.toString(t)}`)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),o=e(1);n.default=(t,n)=>{if(r.isNil(t.parents))throw new Error(`[Node "${t.id}"]: The node parents is required and must be an array of strings.\n\nNode: ${r.toString(t)}`);if(!Array.isArray(t.parents))throw new Error(`[Node "${t.id}"]: The node parents must be an array of strings.\n\nNode parents type: ${r.type(t.parents)}\nNode parents: ${r.toString(t.parents)}`);(({id:t,parents:n},e)=>{r.forEach(u=>{if(o.isNotString(u))throw new Error(`[Node "${t}"]: All node parents must be strings.\n\nNode parent type: ${r.type(u)}\nNode parent: ${r.toString(u)}\nNode parents: ${r.toString(n)}`);if(!r.has(u,e))throw new Error(`[Node "${t}"]: The node parent "${u}" was not found in the network.`)},n)})(t,n)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),o=e(1);n.default=t=>{if(r.isNil(t.states))throw new Error(`[Node "${t.id}"]: The node states is required and must be an array of strings.\n\nNode: ${r.toString(t)}`);if(!Array.isArray(t.states))throw new Error(`[Node "${t.id}"]: The node states must be an array of strings.\n\nNode states type: ${r.type(t.states)}\nNode states: ${r.toString(t.states)}`);if(r.isEmpty(t.states))throw new Error(`[Node "${t.id}"]: The node states must contain at least one string.\n\nNode states: ${r.toString(t.states)}`);t.states.forEach(n=>{if(o.isNotString(n))throw new Error(`[Node "${t.id}"]: All node states must be strings.\n\nNode state type: ${r.type(n)}\nNode state: ${r.toString(n)}\nNode states: ${r.toString(t.states)}`)})}},function(t,n,e){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),o=this&&this.__exportStar||function(t,n){for(var e in t)"default"===e||n.hasOwnProperty(e)||r(n,t,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(e(34),n),o(e(35),n),o(e(36),n),o(e(37),n),o(e(38),n),o(e(39),n),o(e(40),n),o(e(41),n),o(e(42),n),o(e(43),n),o(e(44),n),o(e(45),n),o(e(46),n),o(e(47),n),o(e(48),n),o(e(49),n),o(e(50),n),o(e(51),n),o(e(52),n),o(e(53),n),o(e(54),n),o(e(55),n),o(e(56),n),o(e(57),n)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.inferAll=void 0;const r=e(59),o=e(0),u=e(3),i=e(4),c=o.mergeRight({force:!1,precision:8}),s=(t,n,e,c)=>o.reduce((u,s)=>o.assoc(s,((t,n,e,u,c)=>{if("string"==typeof u[n])return o.propEq(n,e,u)?1:0;const s=void 0!==c.precision?c.precision:8;return r(i.infer(t,{[n]:e},u),s)})(t,n.id,s,e,c),u),{},u.getNodeStates(n)),a=o.ifElse(o.pipe(o.nthArg(1),o.propEq("force",!0)),o.clone,o.identity);n.inferAll=(t,n={},e={})=>{const r=c(e),i=a(t,r),f=a(n,r);return o.reduce((t,n)=>o.assoc(n.id,s(i,n,f,r),t),{},u.getNodesFromNetwork(i))}},function(t,n,e){"use strict";function r(t,n,e){if("number"!=typeof n)throw new TypeError("Expected value to be a number");if(e===1/0)return n;if(!Number.isInteger(e))throw new TypeError("Expected precision to be an integer");const r="round"===t&&n<0;let o;r&&(n=Math.abs(n)),[n,o]=(n+"e").split("e");let u=Math[t](`${n}e${Number(o)+e}`);return[n,o]=(u+"e").split("e"),u=Number(`${n}e${Number(o)-e}`),r&&(u=-u),u}t.exports=r.bind(null,"round"),t.exports.up=r.bind(null,"ceil"),t.exports.down=r.bind(null,"floor")}])}));