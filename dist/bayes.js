!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.bayesjs=n():t.bayesjs=n()}("undefined"!=typeof self?self:this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)e.d(r,u,function(n){return t[n]}.bind(null,u));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=5)}([function(t,n,e){"use strict";e.r(n),e.d(n,"F",(function(){return r})),e.d(n,"T",(function(){return u})),e.d(n,"__",(function(){return o})),e.d(n,"add",(function(){return a})),e.d(n,"addIndex",(function(){return h})),e.d(n,"adjust",(function(){return g})),e.d(n,"all",(function(){return O})),e.d(n,"allPass",(function(){return Q})),e.d(n,"always",(function(){return tt})),e.d(n,"and",(function(){return nt})),e.d(n,"any",(function(){return rt})),e.d(n,"anyPass",(function(){return ut})),e.d(n,"ap",(function(){return ot})),e.d(n,"aperture",(function(){return st})),e.d(n,"append",(function(){return at})),e.d(n,"apply",(function(){return ft})),e.d(n,"applySpec",(function(){return pt})),e.d(n,"applyTo",(function(){return ht})),e.d(n,"ascend",(function(){return yt})),e.d(n,"assoc",(function(){return gt})),e.d(n,"assocPath",(function(){return mt})),e.d(n,"binary",(function(){return wt})),e.d(n,"bind",(function(){return A})),e.d(n,"both",(function(){return _t})),e.d(n,"call",(function(){return St})),e.d(n,"chain",(function(){return kt})),e.d(n,"clamp",(function(){return At})),e.d(n,"clone",(function(){return Ct})),e.d(n,"comparator",(function(){return $t})),e.d(n,"complement",(function(){return Lt})),e.d(n,"compose",(function(){return Ut})),e.d(n,"composeK",(function(){return Vt})),e.d(n,"composeP",(function(){return Ht})),e.d(n,"composeWith",(function(){return Qt})),e.d(n,"concat",(function(){return wn})),e.d(n,"cond",(function(){return Nn})),e.d(n,"construct",(function(){return On})),e.d(n,"constructN",(function(){return jn})),e.d(n,"contains",(function(){return _n})),e.d(n,"converge",(function(){return En})),e.d(n,"countBy",(function(){return Pn})),e.d(n,"curry",(function(){return Et})),e.d(n,"curryN",(function(){return p})),e.d(n,"dec",(function(){return kn})),e.d(n,"defaultTo",(function(){return An})),e.d(n,"descend",(function(){return qn})),e.d(n,"difference",(function(){return Cn})),e.d(n,"differenceWith",(function(){return $n})),e.d(n,"dissoc",(function(){return Tn})),e.d(n,"dissocPath",(function(){return Bn})),e.d(n,"divide",(function(){return Fn})),e.d(n,"drop",(function(){return Gn})),e.d(n,"dropLast",(function(){return Kn})),e.d(n,"dropLastWhile",(function(){return Xn})),e.d(n,"dropRepeats",(function(){return ne})),e.d(n,"dropRepeatsWith",(function(){return te})),e.d(n,"dropWhile",(function(){return re})),e.d(n,"either",(function(){return oe})),e.d(n,"empty",(function(){return ie})),e.d(n,"endsWith",(function(){return se})),e.d(n,"eqBy",(function(){return ae})),e.d(n,"eqProps",(function(){return fe})),e.d(n,"equals",(function(){return on})),e.d(n,"evolve",(function(){return le})),e.d(n,"filter",(function(){return gn})),e.d(n,"find",(function(){return pe})),e.d(n,"findIndex",(function(){return ye})),e.d(n,"findLast",(function(){return ve})),e.d(n,"findLastIndex",(function(){return be})),e.d(n,"flatten",(function(){return we})),e.d(n,"flip",(function(){return Ne})),e.d(n,"forEach",(function(){return je})),e.d(n,"forEachObjIndexed",(function(){return Oe})),e.d(n,"fromPairs",(function(){return _e})),e.d(n,"groupBy",(function(){return Ee})),e.d(n,"groupWith",(function(){return Se})),e.d(n,"gt",(function(){return xe})),e.d(n,"gte",(function(){return Pe})),e.d(n,"has",(function(){return Ae})),e.d(n,"hasIn",(function(){return qe})),e.d(n,"hasPath",(function(){return ke})),e.d(n,"head",(function(){return Jt})),e.d(n,"identical",(function(){return Me})),e.d(n,"identity",(function(){return Yt})),e.d(n,"ifElse",(function(){return Ie})),e.d(n,"inc",(function(){return Ce})),e.d(n,"includes",(function(){return $e})),e.d(n,"indexBy",(function(){return Te})),e.d(n,"indexOf",(function(){return Le})),e.d(n,"init",(function(){return We})),e.d(n,"innerJoin",(function(){return Be})),e.d(n,"insert",(function(){return Fe})),e.d(n,"insertAll",(function(){return ze})),e.d(n,"intersection",(function(){return Ue})),e.d(n,"intersperse",(function(){return Ve})),e.d(n,"into",(function(){return Ye})),e.d(n,"invert",(function(){return Ze})),e.d(n,"invertObj",(function(){return Qe})),e.d(n,"invoker",(function(){return tr})),e.d(n,"is",(function(){return nr})),e.d(n,"isEmpty",(function(){return er})),e.d(n,"isNil",(function(){return vt})),e.d(n,"join",(function(){return rr})),e.d(n,"juxt",(function(){return ur})),e.d(n,"keys",(function(){return U})),e.d(n,"keysIn",(function(){return or})),e.d(n,"last",(function(){return Qn})),e.d(n,"lastIndexOf",(function(){return ir})),e.d(n,"length",(function(){return sr})),e.d(n,"lens",(function(){return ar})),e.d(n,"lensIndex",(function(){return fr})),e.d(n,"lensPath",(function(){return lr})),e.d(n,"lensProp",(function(){return dr})),e.d(n,"lift",(function(){return Ot})),e.d(n,"liftN",(function(){return jt})),e.d(n,"lt",(function(){return pr})),e.d(n,"lte",(function(){return hr})),e.d(n,"map",(function(){return V})),e.d(n,"mapAccum",(function(){return yr})),e.d(n,"mapAccumRight",(function(){return gr})),e.d(n,"mapObjIndexed",(function(){return vr})),e.d(n,"match",(function(){return mr})),e.d(n,"mathMod",(function(){return br})),e.d(n,"max",(function(){return _})),e.d(n,"maxBy",(function(){return wr})),e.d(n,"mean",(function(){return jr})),e.d(n,"median",(function(){return Or})),e.d(n,"memoizeWith",(function(){return _r})),e.d(n,"merge",(function(){return Er})),e.d(n,"mergeAll",(function(){return Sr})),e.d(n,"mergeDeepLeft",(function(){return kr})),e.d(n,"mergeDeepRight",(function(){return Ar})),e.d(n,"mergeDeepWith",(function(){return qr})),e.d(n,"mergeDeepWithKey",(function(){return Pr})),e.d(n,"mergeLeft",(function(){return Mr})),e.d(n,"mergeRight",(function(){return Ir})),e.d(n,"mergeWith",(function(){return Cr})),e.d(n,"mergeWithKey",(function(){return xr})),e.d(n,"min",(function(){return $r})),e.d(n,"minBy",(function(){return Tr})),e.d(n,"modulo",(function(){return Lr})),e.d(n,"move",(function(){return Wr})),e.d(n,"multiply",(function(){return Br})),e.d(n,"nAry",(function(){return bt})),e.d(n,"negate",(function(){return Fr})),e.d(n,"none",(function(){return zr})),e.d(n,"not",(function(){return Tt})),e.d(n,"nth",(function(){return K})),e.d(n,"nthArg",(function(){return Gr})),e.d(n,"o",(function(){return Rr})),e.d(n,"objOf",(function(){return Ke})),e.d(n,"of",(function(){return Vr})),e.d(n,"omit",(function(){return Dr})),e.d(n,"once",(function(){return Kr})),e.d(n,"or",(function(){return ue})),e.d(n,"otherwise",(function(){return Jr})),e.d(n,"over",(function(){return Yr})),e.d(n,"pair",(function(){return Zr})),e.d(n,"partial",(function(){return tu})),e.d(n,"partialRight",(function(){return nu})),e.d(n,"partition",(function(){return eu})),e.d(n,"path",(function(){return J})),e.d(n,"paths",(function(){return H})),e.d(n,"pathEq",(function(){return ru})),e.d(n,"pathOr",(function(){return uu})),e.d(n,"pathSatisfies",(function(){return ou})),e.d(n,"pick",(function(){return iu})),e.d(n,"pickAll",(function(){return cu})),e.d(n,"pickBy",(function(){return su})),e.d(n,"pipe",(function(){return Gt})),e.d(n,"pipeK",(function(){return au})),e.d(n,"pipeP",(function(){return Kt})),e.d(n,"pipeWith",(function(){return Zt})),e.d(n,"pluck",(function(){return Y})),e.d(n,"prepend",(function(){return fu})),e.d(n,"product",(function(){return lu})),e.d(n,"project",(function(){return pu})),e.d(n,"prop",(function(){return X})),e.d(n,"propEq",(function(){return hu})),e.d(n,"propIs",(function(){return yu})),e.d(n,"propOr",(function(){return gu})),e.d(n,"propSatisfies",(function(){return vu})),e.d(n,"props",(function(){return mu})),e.d(n,"range",(function(){return bu})),e.d(n,"reduce",(function(){return Z})),e.d(n,"reduceBy",(function(){return xn})),e.d(n,"reduceRight",(function(){return wu})),e.d(n,"reduceWhile",(function(){return Nu})),e.d(n,"reduced",(function(){return ju})),e.d(n,"reject",(function(){return vn})),e.d(n,"remove",(function(){return Ln})),e.d(n,"repeat",(function(){return _u})),e.d(n,"replace",(function(){return Eu})),e.d(n,"reverse",(function(){return Rt})),e.d(n,"scan",(function(){return Su})),e.d(n,"sequence",(function(){return xu})),e.d(n,"set",(function(){return Pu})),e.d(n,"slice",(function(){return Ft})),e.d(n,"sort",(function(){return ku})),e.d(n,"sortBy",(function(){return Au})),e.d(n,"sortWith",(function(){return qu})),e.d(n,"split",(function(){return Mu})),e.d(n,"splitAt",(function(){return Iu})),e.d(n,"splitEvery",(function(){return Cu})),e.d(n,"splitWhen",(function(){return $u})),e.d(n,"startsWith",(function(){return Tu})),e.d(n,"subtract",(function(){return Lu})),e.d(n,"sum",(function(){return Nr})),e.d(n,"symmetricDifference",(function(){return Wu})),e.d(n,"symmetricDifferenceWith",(function(){return Bu})),e.d(n,"tail",(function(){return zt})),e.d(n,"take",(function(){return Un})),e.d(n,"takeLast",(function(){return ce})),e.d(n,"takeLastWhile",(function(){return Fu})),e.d(n,"takeWhile",(function(){return Gu})),e.d(n,"tap",(function(){return Uu})),e.d(n,"test",(function(){return Vu})),e.d(n,"andThen",(function(){return Du})),e.d(n,"times",(function(){return Ou})),e.d(n,"toLower",(function(){return Ku})),e.d(n,"toPairs",(function(){return Hu})),e.d(n,"toPairsIn",(function(){return Ju})),e.d(n,"toString",(function(){return bn})),e.d(n,"toUpper",(function(){return Xu})),e.d(n,"transduce",(function(){return Yu})),e.d(n,"transpose",(function(){return Zu})),e.d(n,"traverse",(function(){return Qu})),e.d(n,"trim",(function(){return no})),e.d(n,"tryCatch",(function(){return eo})),e.d(n,"type",(function(){return Mt})),e.d(n,"unapply",(function(){return ro})),e.d(n,"unary",(function(){return uo})),e.d(n,"uncurryN",(function(){return oo})),e.d(n,"unfold",(function(){return io})),e.d(n,"union",(function(){return co})),e.d(n,"unionWith",(function(){return ao})),e.d(n,"uniq",(function(){return Re})),e.d(n,"uniqBy",(function(){return Ge})),e.d(n,"uniqWith",(function(){return so})),e.d(n,"unless",(function(){return fo})),e.d(n,"unnest",(function(){return lo})),e.d(n,"until",(function(){return po})),e.d(n,"update",(function(){return Wn})),e.d(n,"useWith",(function(){return du})),e.d(n,"values",(function(){return lt})),e.d(n,"valuesIn",(function(){return ho})),e.d(n,"view",(function(){return go})),e.d(n,"when",(function(){return vo})),e.d(n,"where",(function(){return mo})),e.d(n,"whereEq",(function(){return bo})),e.d(n,"without",(function(){return wo})),e.d(n,"xor",(function(){return No})),e.d(n,"xprod",(function(){return jo})),e.d(n,"zip",(function(){return Oo})),e.d(n,"zipObj",(function(){return _o})),e.d(n,"zipWith",(function(){return Eo})),e.d(n,"thunkify",(function(){return So}));var r=function(){return!1},u=function(){return!0},o={"@@functional/placeholder":!0};function i(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function c(t){return function n(e){return 0===arguments.length||i(e)?n:t.apply(this,arguments)}}function s(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return i(e)?n:c((function(n){return t(e,n)}));default:return i(e)&&i(r)?n:i(e)?c((function(n){return t(n,r)})):i(r)?c((function(n){return t(e,n)})):t(e,r)}}}var a=s((function(t,n){return Number(t)+Number(n)}));function f(t,n){var e;n=n||[];var r=(t=t||[]).length,u=n.length,o=[];for(e=0;e<r;)o[o.length]=t[e],e+=1;for(e=0;e<u;)o[o.length]=n[e],e+=1;return o}function l(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,u){return n.apply(this,arguments)};case 5:return function(t,e,r,u,o){return n.apply(this,arguments)};case 6:return function(t,e,r,u,o,i){return n.apply(this,arguments)};case 7:return function(t,e,r,u,o,i,c){return n.apply(this,arguments)};case 8:return function(t,e,r,u,o,i,c,s){return n.apply(this,arguments)};case 9:return function(t,e,r,u,o,i,c,s,a){return n.apply(this,arguments)};case 10:return function(t,e,r,u,o,i,c,s,a,f){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function d(t,n,e){return function(){for(var r=[],u=0,o=t,c=0;c<n.length||u<arguments.length;){var s;c<n.length&&(!i(n[c])||u>=arguments.length)?s=n[c]:(s=arguments[u],u+=1),r[c]=s,i(s)||(o-=1),c+=1}return o<=0?e.apply(this,r):l(o,d(t,r,e))}}var p=s((function(t,n){return 1===t?c(n):l(t,d(t,[],n))})),h=c((function(t){return p(t.length,(function(){var n=0,e=arguments[0],r=arguments[arguments.length-1],u=Array.prototype.slice.call(arguments,0);return u[0]=function(){var t=e.apply(this,f(arguments,[n,r]));return n+=1,t},t.apply(this,u)}))}));function y(t){return function n(e,r,u){switch(arguments.length){case 0:return n;case 1:return i(e)?n:s((function(n,r){return t(e,n,r)}));case 2:return i(e)&&i(r)?n:i(e)?s((function(n,e){return t(n,r,e)})):i(r)?s((function(n,r){return t(e,n,r)})):c((function(n){return t(e,r,n)}));default:return i(e)&&i(r)&&i(u)?n:i(e)&&i(r)?s((function(n,e){return t(n,e,u)})):i(e)&&i(u)?s((function(n,e){return t(n,r,e)})):i(r)&&i(u)?s((function(n,r){return t(e,n,r)})):i(e)?c((function(n){return t(n,r,u)})):i(r)?c((function(n){return t(e,n,u)})):i(u)?c((function(n){return t(e,r,n)})):t(e,r,u)}}}var g=y((function(t,n,e){if(t>=e.length||t<-e.length)return e;var r=(t<0?e.length:0)+t,u=f(e);return u[r]=n(e[r]),u})),v=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function m(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function b(t,n,e){return function(){if(0===arguments.length)return e();var r=Array.prototype.slice.call(arguments,0),u=r.pop();if(!v(u)){for(var o=0;o<t.length;){if("function"==typeof u[t[o]])return u[t[o]].apply(u,r);o+=1}if(m(u)){var i=n.apply(null,r);return i(u)}}return e.apply(this,arguments)}}function w(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var N={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},j=function(){function t(t,n){this.xf=n,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)||(this.all=!1,t=w(this.xf["@@transducer/step"](t,!1))),t},t}(),O=s(b(["all"],s((function(t,n){return new j(t,n)})),(function(t,n){for(var e=0;e<n.length;){if(!t(n[e]))return!1;e+=1}return!0}))),_=s((function(t,n){return n>t?n:t}));function E(t,n){for(var e=0,r=n.length,u=Array(r);e<r;)u[e]=t(n[e]),e+=1;return u}function S(t){return"[object String]"===Object.prototype.toString.call(t)}var x=c((function(t){return!!v(t)||!!t&&("object"==typeof t&&(!S(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),P=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();function k(t){return new P(t)}var A=s((function(t,n){return l(t.length,(function(){return t.apply(n,arguments)}))}));function q(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function M(t,n,e,r){return t["@@transducer/result"](e[r](A(t["@@transducer/step"],t),n))}var I="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function C(t,n,e){if("function"==typeof t&&(t=k(t)),x(e))return function(t,n,e){for(var r=0,u=e.length;r<u;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return M(t,n,e,"fantasy-land/reduce");if(null!=e[I])return q(t,n,e[I]());if("function"==typeof e.next)return q(t,n,e);if("function"==typeof e.reduce)return M(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}var $=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},t}(),T=s((function(t,n){return new $(t,n)}));function L(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var W=Object.prototype.toString,B=function(){return"[object Arguments]"===W.call(arguments)?function(t){return"[object Arguments]"===W.call(t)}:function(t){return L("callee",t)}}(),F=!{toString:null}.propertyIsEnumerable("toString"),z=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],G=function(){return arguments.propertyIsEnumerable("length")}(),R=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},U="function"!=typeof Object.keys||G?c((function(t){if(Object(t)!==t)return[];var n,e,r=[],u=G&&B(t);for(n in t)!L(n,t)||u&&"length"===n||(r[r.length]=n);if(F)for(e=z.length-1;e>=0;)L(n=z[e],t)&&!R(r,n)&&(r[r.length]=n),e-=1;return r})):c((function(t){return Object(t)!==t?[]:Object.keys(t)})),V=s(b(["fantasy-land/map","map"],T,(function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return p(n.length,(function(){return t.call(this,n.apply(this,arguments))}));case"[object Object]":return C((function(e,r){return e[r]=t(n[r]),e}),{},U(n));default:return E(t,n)}}))),D=Number.isInteger||function(t){return t<<0===t},K=s((function(t,n){var e=t<0?n.length+t:t;return S(n)?n.charAt(e):n[e]})),H=s((function(t,n){return t.map((function(t){for(var e,r=n,u=0;u<t.length;){if(null==r)return;e=t[u],r=D(e)?K(e,r):r[e],u+=1}return r}))})),J=s((function(t,n){return H([t],n)[0]})),X=s((function(t,n){return J([t],n)})),Y=s((function(t,n){return V(X(t),n)})),Z=y(C),Q=c((function(t){return p(Z(_,0,Y("length",t)),(function(){for(var n=0,e=t.length;n<e;){if(!t[n].apply(this,arguments))return!1;n+=1}return!0}))})),tt=c((function(t){return function(){return t}})),nt=s((function(t,n){return t&&n})),et=function(){function t(t,n){this.xf=n,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.any=!0,t=w(this.xf["@@transducer/step"](t,!0))),t},t}(),rt=s(b(["any"],s((function(t,n){return new et(t,n)})),(function(t,n){for(var e=0;e<n.length;){if(t(n[e]))return!0;e+=1}return!1}))),ut=c((function(t){return p(Z(_,0,Y("length",t)),(function(){for(var n=0,e=t.length;n<e;){if(t[n].apply(this,arguments))return!0;n+=1}return!1}))})),ot=s((function(t,n){return"function"==typeof n["fantasy-land/ap"]?n["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(n):"function"==typeof t?function(e){return t(e)(n(e))}:C((function(t,e){return f(t,V(e,n))}),[],t)}));function it(t,n){for(var e=0,r=n.length-(t-1),u=new Array(r>=0?r:0);e<r;)u[e]=Array.prototype.slice.call(n,e,e+t),e+=1;return u}var ct=function(){function t(t,n){this.xf=n,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.store(n),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return f(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},t}(),st=s(b([],s((function(t,n){return new ct(t,n)})),it)),at=s((function(t,n){return f(n,[t])})),ft=s((function(t,n){return t.apply(this,n)})),lt=c((function(t){for(var n=U(t),e=n.length,r=[],u=0;u<e;)r[u]=t[n[u]],u+=1;return r}));function dt(t,n){return U(n).reduce((function(e,r){return e[r]=t(n[r]),e}),{})}var pt=c((function t(n){return n=dt((function(n){return"function"==typeof n?n:t(n)}),n),p(Z(_,0,Y("length",lt(n))),(function(){var t=arguments;return dt((function(n){return ft(n,t)}),n)}))})),ht=s((function(t,n){return n(t)})),yt=y((function(t,n,e){var r=t(n),u=t(e);return r<u?-1:r>u?1:0})),gt=y((function(t,n,e){var r={};for(var u in e)r[u]=e[u];return r[t]=n,r})),vt=c((function(t){return null==t})),mt=y((function t(n,e,r){if(0===n.length)return e;var u=n[0];if(n.length>1){var o=!vt(r)&&L(u,r)?r[u]:D(n[1])?[]:{};e=t(Array.prototype.slice.call(n,1),e,o)}if(D(u)&&v(r)){var i=[].concat(r);return i[u]=e,i}return gt(u,e,r)})),bt=s((function(t,n){switch(t){case 0:return function(){return n.call(this)};case 1:return function(t){return n.call(this,t)};case 2:return function(t,e){return n.call(this,t,e)};case 3:return function(t,e,r){return n.call(this,t,e,r)};case 4:return function(t,e,r,u){return n.call(this,t,e,r,u)};case 5:return function(t,e,r,u,o){return n.call(this,t,e,r,u,o)};case 6:return function(t,e,r,u,o,i){return n.call(this,t,e,r,u,o,i)};case 7:return function(t,e,r,u,o,i,c){return n.call(this,t,e,r,u,o,i,c)};case 8:return function(t,e,r,u,o,i,c,s){return n.call(this,t,e,r,u,o,i,c,s)};case 9:return function(t,e,r,u,o,i,c,s,a){return n.call(this,t,e,r,u,o,i,c,s,a)};case 10:return function(t,e,r,u,o,i,c,s,a,f){return n.call(this,t,e,r,u,o,i,c,s,a,f)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),wt=c((function(t){return bt(2,t)}));function Nt(t){var n=Object.prototype.toString.call(t);return"[object Function]"===n||"[object AsyncFunction]"===n||"[object GeneratorFunction]"===n||"[object AsyncGeneratorFunction]"===n}var jt=s((function(t,n){var e=p(t,n);return p(t,(function(){return C(ot,V(e,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),Ot=c((function(t){return jt(t.length,t)})),_t=s((function(t,n){return Nt(t)?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:Ot(nt)(t,n)})),Et=c((function(t){return p(t.length,t)})),St=Et((function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))}));function xt(t){return function n(e){for(var r,u,o,i=[],c=0,s=e.length;c<s;){if(x(e[c]))for(o=0,u=(r=t?n(e[c]):e[c]).length;o<u;)i[i.length]=r[o],o+=1;else i[i.length]=e[c];c+=1}return i}}var Pt=function(t){var n=function(t){return{"@@transducer/init":N.init,"@@transducer/result":function(n){return t["@@transducer/result"](n)},"@@transducer/step":function(n,e){var r=t["@@transducer/step"](n,e);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(t);return{"@@transducer/init":N.init,"@@transducer/result":function(t){return n["@@transducer/result"](t)},"@@transducer/step":function(t,e){return x(e)?C(n,t,e):C(n,t,[e])}}},kt=s(b(["fantasy-land/chain","chain"],s((function(t,n){return V(t,Pt(n))})),(function(t,n){return"function"==typeof n?function(e){return t(n(e))(e)}:xt(!1)(V(t,n))}))),At=y((function(t,n,e){if(t>n)throw new Error("min must not be greater than max in clamp(min, max, value)");return e<t?t:e>n?n:e}));function qt(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var Mt=c((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function It(t,n,e,r){var u=function(u){for(var o=n.length,i=0;i<o;){if(t===n[i])return e[i];i+=1}for(var c in n[i+1]=t,e[i+1]=u,t)u[c]=r?It(t[c],n,e,!0):t[c];return u};switch(Mt(t)){case"Object":return u({});case"Array":return u([]);case"Date":return new Date(t.valueOf());case"RegExp":return qt(t);default:return t}}var Ct=c((function(t){return null!=t&&"function"==typeof t.clone?t.clone():It(t,[],[],!0)})),$t=c((function(t){return function(n,e){return t(n,e)?-1:t(e,n)?1:0}})),Tt=c((function(t){return!t})),Lt=Ot(Tt);function Wt(t,n){return function(){return n.call(this,t.apply(this,arguments))}}function Bt(t,n){return function(){var e=arguments.length;if(0===e)return n();var r=arguments[e-1];return v(r)||"function"!=typeof r[t]?n.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,e-1))}}var Ft=y(Bt("slice",(function(t,n,e){return Array.prototype.slice.call(e,t,n)}))),zt=c(Bt("tail",Ft(1,1/0)));function Gt(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return l(arguments[0].length,Z(Wt,arguments[0],zt(arguments)))}var Rt=c((function(t){return S(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function Ut(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Gt.apply(this,Rt(arguments))}function Vt(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var t=Array.prototype.slice.call(arguments),n=t.pop();return Ut(Ut.apply(this,V(kt,t)),n)}function Dt(t,n){return function(){var e=this;return t.apply(e,arguments).then((function(t){return n.call(e,t)}))}}function Kt(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return l(arguments[0].length,Z(Dt,arguments[0],zt(arguments)))}function Ht(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return Kt.apply(this,Rt(arguments))}var Jt=K(0);function Xt(t){return t}var Yt=c(Xt),Zt=s((function(t,n){if(n.length<=0)return Yt;var e=Jt(n),r=zt(n);return l(e.length,(function(){return C((function(n,e){return t.call(this,e,n)}),e.apply(this,arguments),r)}))})),Qt=s((function(t,n){return Zt.apply(this,[t,Rt(n)])}));function tn(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function nn(t,n,e){for(var r=0,u=e.length;r<u;){if(t(n,e[r]))return!0;r+=1}return!1}var en="function"==typeof Object.is?Object.is:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};function rn(t,n,e,r){var u=tn(t);function o(t,n){return un(t,n,e.slice(),r.slice())}return!nn((function(t,n){return!nn(o,n,t)}),tn(n),u)}function un(t,n,e,r){if(en(t,n))return!0;var u=Mt(t);if(u!==Mt(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var n=String(t).match(/^function (\w*)/);return null==n?"":n[1]}(t.constructor))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!en(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!en(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var o=e.length-1;o>=0;){if(e[o]===t)return r[o]===n;o-=1}switch(u){case"Map":return t.size===n.size&&rn(t.entries(),n.entries(),e.concat([t]),r.concat([n]));case"Set":return t.size===n.size&&rn(t.values(),n.values(),e.concat([t]),r.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=U(t);if(i.length!==U(n).length)return!1;var c=e.concat([t]),s=r.concat([n]);for(o=i.length-1;o>=0;){var a=i[o];if(!L(a,n)||!un(n[a],t[a],c,s))return!1;o-=1}return!0}var on=s((function(t,n){return un(t,n,[],[])}));function cn(t,n,e){var r,u;if("function"==typeof t.indexOf)switch(typeof n){case"number":if(0===n){for(r=1/n;e<t.length;){if(0===(u=t[e])&&1/u===r)return e;e+=1}return-1}if(n!=n){for(;e<t.length;){if("number"==typeof(u=t[e])&&u!=u)return e;e+=1}return-1}return t.indexOf(n,e);case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,e);case"object":if(null===n)return t.indexOf(n,e)}for(;e<t.length;){if(on(t[e],n))return e;e+=1}return-1}function sn(t,n){return cn(n,t,0)>=0}function an(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var fn=function(t){return(t<10?"0":"")+t},ln="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+fn(t.getUTCMonth()+1)+"-"+fn(t.getUTCDate())+"T"+fn(t.getUTCHours())+":"+fn(t.getUTCMinutes())+":"+fn(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function dn(t){return function(){return!t.apply(this,arguments)}}function pn(t,n){for(var e=0,r=n.length,u=[];e<r;)t(n[e])&&(u[u.length]=n[e]),e+=1;return u}function hn(t){return"[object Object]"===Object.prototype.toString.call(t)}var yn=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},t}(),gn=s(b(["filter"],s((function(t,n){return new yn(t,n)})),(function(t,n){return hn(n)?C((function(e,r){return t(n[r])&&(e[r]=n[r]),e}),{},U(n)):pn(t,n)}))),vn=s((function(t,n){return gn(dn(t),n)}));function mn(t,n){var e=function(e){var r=n.concat([t]);return sn(e,r)?"<Circular>":mn(e,r)},r=function(t,n){return E((function(n){return an(n)+": "+e(t[n])}),n.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+E(e,t).join(", ")+"))";case"[object Array]":return"["+E(e,t).concat(r(t,vn((function(t){return/^\d+$/.test(t)}),U(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+e(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?e(NaN):an(ln(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+e(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+e(t.valueOf())+")":an(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var u=t.toString();if("[object Object]"!==u)return u}return"{"+r(t,U(t)).join(", ")+"}"}}var bn=c((function(t){return mn(t,[])})),wn=s((function(t,n){if(v(t)){if(v(n))return t.concat(n);throw new TypeError(bn(n)+" is not an array")}if(S(t)){if(S(n))return t+n;throw new TypeError(bn(n)+" is not a string")}if(null!=t&&Nt(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(null!=t&&Nt(t.concat))return t.concat(n);throw new TypeError(bn(t)+' does not have a method named "concat" or "fantasy-land/concat"')})),Nn=c((function(t){return l(Z(_,0,V((function(t){return t[0].length}),t)),(function(){for(var n=0;n<t.length;){if(t[n][0].apply(this,arguments))return t[n][1].apply(this,arguments);n+=1}}))})),jn=s((function(t,n){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new n}:Et(bt(t,(function(t,e,r,u,o,i,c,s,a,f){switch(arguments.length){case 1:return new n(t);case 2:return new n(t,e);case 3:return new n(t,e,r);case 4:return new n(t,e,r,u);case 5:return new n(t,e,r,u,o);case 6:return new n(t,e,r,u,o,i);case 7:return new n(t,e,r,u,o,i,c);case 8:return new n(t,e,r,u,o,i,c,s);case 9:return new n(t,e,r,u,o,i,c,s,a);case 10:return new n(t,e,r,u,o,i,c,s,a,f)}})))})),On=c((function(t){return jn(t.length,t)})),_n=s(sn),En=s((function(t,n){return p(Z(_,0,Y("length",n)),(function(){var e=arguments,r=this;return t.apply(r,E((function(t){return t.apply(r,e)}),n))}))})),Sn=function(){function t(t,n,e,r){this.valueFn=t,this.valueAcc=n,this.keyFn=e,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){var n;for(n in this.inputs)if(L(n,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[n]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){var e=this.keyFn(n);return this.inputs[e]=this.inputs[e]||[e,this.valueAcc],this.inputs[e][1]=this.valueFn(this.inputs[e][1],n),t},t}(),xn=d(4,[],b([],d(4,[],(function(t,n,e,r){return new Sn(t,n,e,r)})),(function(t,n,e,r){return C((function(r,u){var o=e(u);return r[o]=t(L(o,r)?r[o]:It(n,[],[],!1),u),r}),{},r)}))),Pn=xn((function(t,n){return t+1}),0),kn=a(-1),An=s((function(t,n){return null==n||n!=n?t:n})),qn=y((function(t,n,e){var r=t(n),u=t(e);return r>u?-1:r<u?1:0}));function Mn(t,n,e){var r,u=typeof t;switch(u){case"string":case"number":return 0===t&&1/t==-1/0?!!e._items["-0"]||(n&&(e._items["-0"]=!0),!1):null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):u in e._items?t in e._items[u]||(n&&(e._items[u][t]=!0),!1):(n&&(e._items[u]={},e._items[u][t]=!0),!1);case"boolean":if(u in e._items){var o=t?1:0;return!!e._items[u][o]||(n&&(e._items[u][o]=!0),!1)}return n&&(e._items[u]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):u in e._items?!!sn(t,e._items[u])||(n&&e._items[u].push(t),!1):(n&&(e._items[u]=[t]),!1);case"undefined":return!!e._items[u]||(n&&(e._items[u]=!0),!1);case"object":if(null===t)return!!e._items.null||(n&&(e._items.null=!0),!1);default:return(u=Object.prototype.toString.call(t))in e._items?!!sn(t,e._items[u])||(n&&e._items[u].push(t),!1):(n&&(e._items[u]=[t]),!1)}}var In=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!Mn(t,!0,this)},t.prototype.has=function(t){return Mn(t,!1,this)},t}(),Cn=s((function(t,n){for(var e=[],r=0,u=t.length,o=n.length,i=new In,c=0;c<o;c+=1)i.add(n[c]);for(;r<u;)i.add(t[r])&&(e[e.length]=t[r]),r+=1;return e})),$n=y((function(t,n,e){for(var r=[],u=0,o=n.length;u<o;)nn(t,n[u],e)||nn(t,n[u],r)||r.push(n[u]),u+=1;return r})),Tn=s((function(t,n){var e={};for(var r in n)e[r]=n[r];return delete e[t],e})),Ln=y((function(t,n,e){var r=Array.prototype.slice.call(e,0);return r.splice(t,n),r})),Wn=y((function(t,n,e){return g(t,tt(n),e)})),Bn=s((function t(n,e){switch(n.length){case 0:return e;case 1:return D(n[0])&&v(e)?Ln(n[0],1,e):Tn(n[0],e);default:var r=n[0],u=Array.prototype.slice.call(n,1);return null==e[r]?e:D(r)&&v(e)?Wn(r,t(u,e[r]),e):gt(r,t(u,e[r]),e)}})),Fn=s((function(t,n){return t/n})),zn=function(){function t(t,n){this.xf=n,this.n=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,n)},t}(),Gn=s(b(["drop"],s((function(t,n){return new zn(t,n)})),(function(t,n){return Ft(Math.max(0,t),1/0,n)}))),Rn=function(){function t(t,n){this.xf=n,this.n=t,this.i=0}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){this.i+=1;var e=0===this.n?t:this.xf["@@transducer/step"](t,n);return this.n>=0&&this.i>=this.n?w(e):e},t}(),Un=s(b(["take"],s((function(t,n){return new Rn(t,n)})),(function(t,n){return Ft(0,t<0?1/0:t,n)})));function Vn(t,n){return Un(t<n.length?n.length-t:0,n)}var Dn=function(){function t(t,n){this.xf=n,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(n),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t}(),Kn=s(b([],s((function(t,n){return new Dn(t,n)})),Vn));function Hn(t,n){for(var e=n.length-1;e>=0&&t(n[e]);)e-=1;return Ft(0,e+1,n)}var Jn=function(){function t(t,n){this.f=t,this.retained=[],this.xf=n}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.retain(t,n):this.flush(t,n)},t.prototype.flush=function(t,n){return t=C(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,n)},t.prototype.retain=function(t,n){return this.retained.push(n),t},t}(),Xn=s(b([],s((function(t,n){return new Jn(t,n)})),Hn)),Yn=function(){function t(t,n){this.xf=n,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){var e=!1;return this.seenFirstValue?this.pred(this.lastValue,n)&&(e=!0):this.seenFirstValue=!0,this.lastValue=n,e?t:this.xf["@@transducer/step"](t,n)},t}(),Zn=s((function(t,n){return new Yn(t,n)})),Qn=K(-1),te=s(b([],Zn,(function(t,n){var e=[],r=1,u=n.length;if(0!==u)for(e[0]=n[0];r<u;)t(Qn(e),n[r])||(e[e.length]=n[r]),r+=1;return e}))),ne=c(b([],Zn(on),te(on))),ee=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){if(this.f){if(this.f(n))return t;this.f=null}return this.xf["@@transducer/step"](t,n)},t}(),re=s(b(["dropWhile"],s((function(t,n){return new ee(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r&&t(n[e]);)e+=1;return Ft(e,1/0,n)}))),ue=s((function(t,n){return t||n})),oe=s((function(t,n){return Nt(t)?function(){return t.apply(this,arguments)||n.apply(this,arguments)}:Ot(ue)(t,n)})),ie=c((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():v(t)?[]:S(t)?"":hn(t)?{}:B(t)?function(){return arguments}():void 0})),ce=s((function(t,n){return Gn(t>=0?n.length-t:0,n)})),se=s((function(t,n){return on(ce(t.length,n),t)})),ae=y((function(t,n,e){return on(t(n),t(e))})),fe=y((function(t,n,e){return on(n[t],e[t])})),le=s((function t(n,e){var r,u,o,i=e instanceof Array?[]:{};for(u in e)o=typeof(r=n[u]),i[u]="function"===o?r(e[u]):r&&"object"===o?t(r,e[u]):e[u];return i})),de=function(){function t(t,n){this.xf=n,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.found=!0,t=w(this.xf["@@transducer/step"](t,n))),t},t}(),pe=s(b(["find"],s((function(t,n){return new de(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r;){if(t(n[e]))return n[e];e+=1}}))),he=function(){function t(t,n){this.xf=n,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.found=!0,t=w(this.xf["@@transducer/step"](t,this.idx))),t},t}(),ye=s(b([],s((function(t,n){return new he(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r;){if(t(n[e]))return e;e+=1}return-1}))),ge=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.last=n),t},t}(),ve=s(b([],s((function(t,n){return new ge(t,n)})),(function(t,n){for(var e=n.length-1;e>=0;){if(t(n[e]))return n[e];e-=1}}))),me=function(){function t(t,n){this.xf=n,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.lastIdx=this.idx),t},t}(),be=s(b([],s((function(t,n){return new me(t,n)})),(function(t,n){for(var e=n.length-1;e>=0;){if(t(n[e]))return e;e-=1}return-1}))),we=c(xt(!0)),Ne=c((function(t){return p(t.length,(function(n,e){var r=Array.prototype.slice.call(arguments,0);return r[0]=e,r[1]=n,t.apply(this,r)}))})),je=s(Bt("forEach",(function(t,n){for(var e=n.length,r=0;r<e;)t(n[r]),r+=1;return n}))),Oe=s((function(t,n){for(var e=U(n),r=0;r<e.length;){var u=e[r];t(n[u],u,n),r+=1}return n})),_e=c((function(t){for(var n={},e=0;e<t.length;)n[t[e][0]]=t[e][1],e+=1;return n})),Ee=s(Bt("groupBy",xn((function(t,n){return null==t&&(t=[]),t.push(n),t}),null))),Se=s((function(t,n){for(var e=[],r=0,u=n.length;r<u;){for(var o=r+1;o<u&&t(n[o-1],n[o]);)o+=1;e.push(n.slice(r,o)),r=o}return e})),xe=s((function(t,n){return t>n})),Pe=s((function(t,n){return t>=n})),ke=s((function(t,n){if(0===t.length||vt(n))return!1;for(var e=n,r=0;r<t.length;){if(vt(e)||!L(t[r],e))return!1;e=e[t[r]],r+=1}return!0})),Ae=s((function(t,n){return ke([t],n)})),qe=s((function(t,n){return t in n})),Me=s(en),Ie=y((function(t,n,e){return p(Math.max(t.length,n.length,e.length),(function(){return t.apply(this,arguments)?n.apply(this,arguments):e.apply(this,arguments)}))})),Ce=a(1),$e=s(sn),Te=xn((function(t,n){return n}),null),Le=s((function(t,n){return"function"!=typeof n.indexOf||v(n)?cn(n,t,0):n.indexOf(t)})),We=Ft(0,-1),Be=y((function(t,n,e){return pn((function(n){return nn(t,n,e)}),n)})),Fe=y((function(t,n,e){t=t<e.length&&t>=0?t:e.length;var r=Array.prototype.slice.call(e,0);return r.splice(t,0,n),r})),ze=y((function(t,n,e){return t=t<e.length&&t>=0?t:e.length,[].concat(Array.prototype.slice.call(e,0,t),n,Array.prototype.slice.call(e,t))})),Ge=s((function(t,n){for(var e,r,u=new In,o=[],i=0;i<n.length;)e=t(r=n[i]),u.add(e)&&o.push(r),i+=1;return o})),Re=Ge(Yt),Ue=s((function(t,n){var e,r;return t.length>n.length?(e=t,r=n):(e=n,r=t),Re(pn(Ne(sn)(e),r))})),Ve=s(Bt("intersperse",(function(t,n){for(var e=[],r=0,u=n.length;r<u;)r===u-1?e.push(n[r]):e.push(n[r],t),r+=1;return e})));var De="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),e=1,r=arguments.length;e<r;){var u=arguments[e];if(null!=u)for(var o in u)L(o,u)&&(n[o]=u[o]);e+=1}return n},Ke=s((function(t,n){var e={};return e[t]=n,e})),He={"@@transducer/init":Array,"@@transducer/step":function(t,n){return t.push(n),t},"@@transducer/result":Xt},Je={"@@transducer/init":String,"@@transducer/step":function(t,n){return t+n},"@@transducer/result":Xt},Xe={"@@transducer/init":Object,"@@transducer/step":function(t,n){return De(t,x(n)?Ke(n[0],n[1]):n)},"@@transducer/result":Xt};var Ye=y((function(t,n,e){return m(t)?C(n(t),t["@@transducer/init"](),e):C(n(function(t){if(m(t))return t;if(x(t))return He;if("string"==typeof t)return Je;if("object"==typeof t)return Xe;throw new Error("Cannot create transformer for "+t)}(t)),It(t,[],[],!1),e)})),Ze=c((function(t){for(var n=U(t),e=n.length,r=0,u={};r<e;){var o=n[r],i=t[o],c=L(i,u)?u[i]:u[i]=[];c[c.length]=o,r+=1}return u})),Qe=c((function(t){for(var n=U(t),e=n.length,r=0,u={};r<e;){var o=n[r];u[t[o]]=o,r+=1}return u})),tr=s((function(t,n){return p(t+1,(function(){var e=arguments[t];if(null!=e&&Nt(e[n]))return e[n].apply(e,Array.prototype.slice.call(arguments,0,t));throw new TypeError(bn(e)+' does not have a method named "'+n+'"')}))})),nr=s((function(t,n){return null!=n&&n.constructor===t||n instanceof t})),er=c((function(t){return null!=t&&on(t,ie(t))})),rr=tr(1,"join"),ur=c((function(t){return En((function(){return Array.prototype.slice.call(arguments,0)}),t)})),or=c((function(t){var n,e=[];for(n in t)e[e.length]=n;return e})),ir=s((function(t,n){if("function"!=typeof n.lastIndexOf||v(n)){for(var e=n.length-1;e>=0;){if(on(n[e],t))return e;e-=1}return-1}return n.lastIndexOf(t)}));function cr(t){return"[object Number]"===Object.prototype.toString.call(t)}var sr=c((function(t){return null!=t&&cr(t.length)?t.length:NaN})),ar=s((function(t,n){return function(e){return function(r){return V((function(t){return n(t,r)}),e(t(r)))}}})),fr=c((function(t){return ar(K(t),Wn(t))})),lr=c((function(t){return ar(J(t),mt(t))})),dr=c((function(t){return ar(X(t),gt(t))})),pr=s((function(t,n){return t<n})),hr=s((function(t,n){return t<=n})),yr=y((function(t,n,e){for(var r=0,u=e.length,o=[],i=[n];r<u;)i=t(i[0],e[r]),o[r]=i[1],r+=1;return[i[0],o]})),gr=y((function(t,n,e){for(var r=e.length-1,u=[],o=[n];r>=0;)o=t(o[0],e[r]),u[r]=o[1],r-=1;return[o[0],u]})),vr=s((function(t,n){return C((function(e,r){return e[r]=t(n[r],r,n),e}),{},U(n))})),mr=s((function(t,n){return n.match(t)||[]})),br=s((function(t,n){return D(t)?!D(n)||n<1?NaN:(t%n+n)%n:NaN})),wr=y((function(t,n,e){return t(e)>t(n)?e:n})),Nr=Z(a,0),jr=c((function(t){return Nr(t)/t.length})),Or=c((function(t){var n=t.length;if(0===n)return NaN;var e=2-n%2,r=(n-e)/2;return jr(Array.prototype.slice.call(t,0).sort((function(t,n){return t<n?-1:t>n?1:0})).slice(r,r+e))})),_r=s((function(t,n){var e={};return l(n.length,(function(){var r=t.apply(this,arguments);return L(r,e)||(e[r]=n.apply(this,arguments)),e[r]}))})),Er=s((function(t,n){return De({},t,n)})),Sr=c((function(t){return De.apply(null,[{}].concat(t))})),xr=y((function(t,n,e){var r,u={};for(r in n)L(r,n)&&(u[r]=L(r,e)?t(r,n[r],e[r]):n[r]);for(r in e)L(r,e)&&!L(r,u)&&(u[r]=e[r]);return u})),Pr=y((function t(n,e,r){return xr((function(e,r,u){return hn(r)&&hn(u)?t(n,r,u):n(e,r,u)}),e,r)})),kr=s((function(t,n){return Pr((function(t,n,e){return n}),t,n)})),Ar=s((function(t,n){return Pr((function(t,n,e){return e}),t,n)})),qr=y((function(t,n,e){return Pr((function(n,e,r){return t(e,r)}),n,e)})),Mr=s((function(t,n){return De({},n,t)})),Ir=s((function(t,n){return De({},t,n)})),Cr=y((function(t,n,e){return xr((function(n,e,r){return t(e,r)}),n,e)})),$r=s((function(t,n){return n<t?n:t})),Tr=y((function(t,n,e){return t(e)<t(n)?e:n})),Lr=s((function(t,n){return t%n})),Wr=y((function(t,n,e){var r=e.length,u=e.slice(),o=t<0?r+t:t,i=n<0?r+n:n,c=u.splice(o,1);return o<0||o>=e.length||i<0||i>=e.length?e:[].concat(u.slice(0,i)).concat(c).concat(u.slice(i,e.length))})),Br=s((function(t,n){return t*n})),Fr=c((function(t){return-t})),zr=s((function(t,n){return O(dn(t),n)})),Gr=c((function(t){return p(t<0?1:t+1,(function(){return K(t,arguments)}))})),Rr=y((function(t,n,e){return t(n(e))}));function Ur(t){return[t]}var Vr=c(Ur),Dr=s((function(t,n){for(var e={},r={},u=0,o=t.length;u<o;)r[t[u]]=1,u+=1;for(var i in n)r.hasOwnProperty(i)||(e[i]=n[i]);return e})),Kr=c((function(t){var n,e=!1;return l(t.length,(function(){return e?n:(e=!0,n=t.apply(this,arguments))}))}));function Hr(t,n){if(null==n||!Nt(n.then))throw new TypeError("`"+t+"` expected a Promise, received "+mn(n,[]))}var Jr=s((function(t,n){return Hr("otherwise",n),n.then(null,t)})),Xr=function(t){return{value:t,map:function(n){return Xr(n(t))}}},Yr=y((function(t,n,e){return t((function(t){return Xr(n(t))}))(e).value})),Zr=s((function(t,n){return[t,n]}));function Qr(t){return s((function(n,e){return l(Math.max(0,n.length-e.length),(function(){return n.apply(this,t(e,arguments))}))}))}var tu=Qr(f),nu=Qr(Ne(f)),eu=ur([gn,vn]),ru=y((function(t,n,e){return on(J(t,e),n)})),uu=y((function(t,n,e){return An(t,J(n,e))})),ou=y((function(t,n,e){return t(J(n,e))})),iu=s((function(t,n){for(var e={},r=0;r<t.length;)t[r]in n&&(e[t[r]]=n[t[r]]),r+=1;return e})),cu=s((function(t,n){for(var e={},r=0,u=t.length;r<u;){var o=t[r];e[o]=n[o],r+=1}return e})),su=s((function(t,n){var e={};for(var r in n)t(n[r],r,n)&&(e[r]=n[r]);return e}));function au(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return Vt.apply(this,Rt(arguments))}var fu=s((function(t,n){return f([t],n)})),lu=Z(Br,1),du=s((function(t,n){return p(n.length,(function(){for(var e=[],r=0;r<n.length;)e.push(n[r].call(this,arguments[r])),r+=1;return t.apply(this,e.concat(Array.prototype.slice.call(arguments,n.length)))}))})),pu=du(E,[cu,Yt]),hu=y((function(t,n,e){return on(n,e[t])})),yu=y((function(t,n,e){return nr(t,e[n])})),gu=y((function(t,n,e){return uu(t,[n],e)})),vu=y((function(t,n,e){return t(e[n])})),mu=s((function(t,n){return t.map((function(t){return J([t],n)}))})),bu=s((function(t,n){if(!cr(t)||!cr(n))throw new TypeError("Both arguments to range must be numbers");for(var e=[],r=t;r<n;)e.push(r),r+=1;return e})),wu=y((function(t,n,e){for(var r=e.length-1;r>=0;)n=t(e[r],n),r-=1;return n})),Nu=d(4,[],(function(t,n,e,r){return C((function(e,r){return t(e,r)?n(e,r):w(e)}),e,r)})),ju=c(w),Ou=s((function(t,n){var e,r=Number(n),u=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(e=new Array(r);u<r;)e[u]=t(u),u+=1;return e})),_u=s((function(t,n){return Ou(tt(t),n)})),Eu=y((function(t,n,e){return e.replace(t,n)})),Su=y((function(t,n,e){for(var r=0,u=e.length,o=[n];r<u;)n=t(n,e[r]),o[r+1]=n,r+=1;return o})),xu=s((function(t,n){return"function"==typeof n.sequence?n.sequence(t):wu((function(t,n){return ot(V(fu,t),n)}),t([]),n)})),Pu=y((function(t,n,e){return Yr(t,tt(n),e)})),ku=s((function(t,n){return Array.prototype.slice.call(n,0).sort(t)})),Au=s((function(t,n){return Array.prototype.slice.call(n,0).sort((function(n,e){var r=t(n),u=t(e);return r<u?-1:r>u?1:0}))})),qu=s((function(t,n){return Array.prototype.slice.call(n,0).sort((function(n,e){for(var r=0,u=0;0===r&&u<t.length;)r=t[u](n,e),u+=1;return r}))})),Mu=tr(1,"split"),Iu=s((function(t,n){return[Ft(0,t,n),Ft(t,sr(n),n)]})),Cu=s((function(t,n){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var e=[],r=0;r<n.length;)e.push(Ft(r,r+=t,n));return e})),$u=s((function(t,n){for(var e=0,r=n.length,u=[];e<r&&!t(n[e]);)u.push(n[e]),e+=1;return[u,Array.prototype.slice.call(n,e)]})),Tu=s((function(t,n){return on(Un(t.length,n),t)})),Lu=s((function(t,n){return Number(t)-Number(n)})),Wu=s((function(t,n){return wn(Cn(t,n),Cn(n,t))})),Bu=y((function(t,n,e){return wn($n(t,n,e),$n(t,e,n))})),Fu=s((function(t,n){for(var e=n.length-1;e>=0&&t(n[e]);)e-=1;return Ft(e+1,1/0,n)})),zu=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):w(t)},t}(),Gu=s(b(["takeWhile"],s((function(t,n){return new zu(t,n)})),(function(t,n){for(var e=0,r=n.length;e<r&&t(n[e]);)e+=1;return Ft(0,e,n)}))),Ru=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=N.init,t.prototype["@@transducer/result"]=N.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n),this.xf["@@transducer/step"](t,n)},t}(),Uu=s(b([],s((function(t,n){return new Ru(t,n)})),(function(t,n){return t(n),n})));var Vu=s((function(t,n){if(e=t,"[object RegExp]"!==Object.prototype.toString.call(e))throw new TypeError("test requires a value of type RegExp as its first argument; received "+bn(t));var e;return qt(t).test(n)})),Du=s((function(t,n){return Hr("andThen",n),n.then(t)})),Ku=tr(0,"toLowerCase"),Hu=c((function(t){var n=[];for(var e in t)L(e,t)&&(n[n.length]=[e,t[e]]);return n})),Ju=c((function(t){var n=[];for(var e in t)n[n.length]=[e,t[e]];return n})),Xu=tr(0,"toUpperCase"),Yu=p(4,(function(t,n,e,r){return C(t("function"==typeof n?k(n):n),e,r)})),Zu=c((function(t){for(var n=0,e=[];n<t.length;){for(var r=t[n],u=0;u<r.length;)void 0===e[u]&&(e[u]=[]),e[u].push(r[u]),u+=1;n+=1}return e})),Qu=y((function(t,n,e){return"function"==typeof e["fantasy-land/traverse"]?e["fantasy-land/traverse"](n,t):xu(t,V(n,e))})),to="\t\n\v\f\r \u2028\u2029\ufeff",no=c("function"==typeof String.prototype.trim&&!to.trim()&&"".trim()?function(t){return t.trim()}:function(t){var n=new RegExp("^["+to+"]["+to+"]*"),e=new RegExp("["+to+"]["+to+"]*$");return t.replace(n,"").replace(e,"")}),eo=s((function(t,n){return l(t.length,(function(){try{return t.apply(this,arguments)}catch(t){return n.apply(this,f([t],arguments))}}))})),ro=c((function(t){return function(){return t(Array.prototype.slice.call(arguments,0))}})),uo=c((function(t){return bt(1,t)})),oo=s((function(t,n){return p(t,(function(){for(var e,r=1,u=n,o=0;r<=t&&"function"==typeof u;)e=r===t?arguments.length:o+u.length,u=u.apply(this,Array.prototype.slice.call(arguments,o,e)),r+=1,o=e;return u}))})),io=s((function(t,n){for(var e=t(n),r=[];e&&e.length;)r[r.length]=e[0],e=t(e[1]);return r})),co=s(Ut(Re,f)),so=s((function(t,n){for(var e,r=0,u=n.length,o=[];r<u;)nn(t,e=n[r],o)||(o[o.length]=e),r+=1;return o})),ao=y((function(t,n,e){return so(t,f(n,e))})),fo=y((function(t,n,e){return t(e)?e:n(e)})),lo=kt(Xt),po=y((function(t,n,e){for(var r=e;!t(r);)r=n(r);return r})),ho=c((function(t){var n,e=[];for(n in t)e[e.length]=t[n];return e})),yo=function(t){return{value:t,"fantasy-land/map":function(){return this}}},go=s((function(t,n){return t(yo)(n).value})),vo=y((function(t,n,e){return t(e)?n(e):e})),mo=s((function(t,n){for(var e in t)if(L(e,t)&&!t[e](n[e]))return!1;return!0})),bo=s((function(t,n){return mo(V(on,t),n)})),wo=s((function(t,n){return vn(Ne(sn)(t),n)})),No=s((function(t,n){return Boolean(!t^!n)})),jo=s((function(t,n){for(var e,r=0,u=t.length,o=n.length,i=[];r<u;){for(e=0;e<o;)i[i.length]=[t[r],n[e]],e+=1;r+=1}return i})),Oo=s((function(t,n){for(var e=[],r=0,u=Math.min(t.length,n.length);r<u;)e[r]=[t[r],n[r]],r+=1;return e})),_o=s((function(t,n){for(var e=0,r=Math.min(t.length,n.length),u={};e<r;)u[t[e]]=n[e],e+=1;return u})),Eo=y((function(t,n,e){for(var r=[],u=0,o=Math.min(n.length,e.length);u<o;)r[u]=t(n[u],e[u]),u+=1;return r})),So=c((function(t){return p(t.length,(function(){var n=arguments;return function(){return t.apply(this,n)}}))}))},function(t,n,e){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),u=this&&this.__exportStar||function(t,n){for(var e in t)"default"===e||n.hasOwnProperty(e)||r(n,t,e)};Object.defineProperty(n,"__esModule",{value:!0}),u(e(3),n),u(e(10),n),u(e(2),n),u(e(11),n),u(e(12),n)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sortStringsAsc=n.objectEqualsByFirstObjectKeys=n.objectEqualsByIntersectionKeys=n.propIsNotNil=n.isNotObject=n.isNotNumber=n.isNotString=n.isObject=n.isNumber=n.isString=n.includesFlipped=n.isNotEmpty=n.isNotNil=void 0;const r=e(0);n.isNotNil=r.complement(r.isNil),n.isNotEmpty=r.complement(r.isEmpty),n.includesFlipped=r.curryN(2,r.flip(r.includes)),n.isString=r.is(String),n.isNumber=r.is(Number),n.isObject=r.is(Object),n.isNotString=r.complement(n.isString),n.isNotNumber=r.complement(n.isNumber),n.isNotObject=r.complement(n.isObject),n.propIsNotNil=r.pipe(r.prop,n.isNotNil),n.objectEqualsByIntersectionKeys=(t,n)=>{const e=r.pick(r.intersection(r.keys(t),r.keys(n)));return r.equals(e(t),e(n))},n.objectEqualsByFirstObjectKeys=(t,n)=>{const e=r.keys(t);return r.equals(r.pick(e,t),r.pick(e,n))};const u=r.invoker(1,"localeCompare");n.sortStringsAsc=r.sort(r.flip(u))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getNodeIdsWithoutParents=n.filterNodeWithParents=n.getNodesFromNetwork=n.hasNotNodeParents=n.getNodeParentsAndId=n.hasNodeParents=n.getNodeStates=n.getNodeId=n.getNodeParents=n.createNetwork=void 0;const r=e(0),u=e(5),o=e(2),i=(t,n)=>t.every(t=>-1!==n.indexOf(t));n.createNetwork=(...t)=>{const n=(t=>{const n=[...t].sort((t,n)=>t.parents.length-n.parents.length),e=[];return()=>{for(let t=0;t<n.length;t++){const r=n[t];if(0===r.parents.length||i(r.parents,e))return e.push(r.id),n.splice(t,1),r}}})(t);return t.reduce(t=>{const e=n();return r.isNil(e)?t:Object.assign({},u.addNode(t,e))},{})},n.getNodeParents=r.prop("parents"),n.getNodeId=r.prop("id"),n.getNodeStates=r.prop("states"),n.hasNodeParents=r.pipe(n.getNodeParents,o.isNotEmpty),n.getNodeParentsAndId=r.converge(r.append,[r.prop("id"),r.prop("parents")]),n.hasNotNodeParents=r.complement(n.hasNodeParents),n.getNodesFromNetwork=r.values,n.filterNodeWithParents=r.filter(n.hasNodeParents),n.getNodeIdsWithoutParents=r.pipe(n.getNodesFromNetwork,r.filter(n.hasNotNodeParents),r.map(n.getNodeId))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.prepareEvidence=void 0,n.prepareEvidence=function(t,n){const e={};if(!n)return e;for(const r of Object.keys(n)){const u=n[r],o=t[r];if(!o)throw new Error(`Evidence refers to unknown node '${r}'.`);const i={};for(const t of o.states)i[t]=0;if("string"==typeof u){if(!o.states.includes(u))throw new Error(`Hard evidence for '${r}' has unknown state '${u}'.`);i[u]=1}else{let t=0;for(const n of o.states){const e=u[n];if(void 0!==e){if(!Number.isFinite(e)||e<0)throw new Error(`Soft evidence for '${r}' state '${n}' must be a non-negative finite number.`);i[n]=e,t+=e}}if(t<=0)throw new Error(`Soft evidence for '${r}' has zero total weight across states.`);for(const n of o.states)i[n]=i[n]/t}e[r]=i}return e}},function(t,n,e){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),u=this&&this.__exportStar||function(t,n){for(var e in t)"default"===e||n.hasOwnProperty(e)||r(n,t,e)};Object.defineProperty(n,"__esModule",{value:!0}),n.infer=n.inferences=void 0;const o=e(8);n.inferences={enumeration:o.enumeration,junctionTree:o.junctionTree,variableElimination:o.variableElimination},u(e(25),n),n.infer=o.junctionTree.infer,u(e(31),n),u(e(55),n)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.infer=void 0;const r=e(1),u=e(15),o=e(20),i=e(0),c=e(4);n.infer=(t,n,e={})=>{const{cliques:s,sepSets:a,junctionTree:f}=u.default(t),l=c.prepareEvidence(t,e);return((t,n,e)=>{const u=r.filterCliquesByNodeCombinations(t,e),o=n[r.getCliqueWithLessNodes(u).id],c=r.filterCliquePotentialsByNodeCombinations(o,e),s=r.mapPotentialsThen(c);return i.sum(s)})(s,o.default(s,t,f,a,e,l),n)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createGraphBuilder=void 0;const r=e(0),u=e(1),o=r.pluck("id"),i=r.reduce((t,n)=>{const e=r.map(t=>[t,n.id],n.parents);return r.concat(t,e)},[]),c=(t=[])=>{let n=t;return{getValue:()=>n,setValue:t=>{n=t},add:t=>{n=r.append(t,n)},reject:t=>{n=r.reject(t,n)},any:t=>r.any(t,n)}},s=r.curry((t,n)=>r.any(r.equals(t),n)),a=r.curry((t,n,e)=>r.equals([t,n],e)||r.equals([n,t],e));n.createGraphBuilder=(t={})=>{const e=u.getNodesFromNetwork(t),f=c(o(e)),l=c(i(e)),d=(t,n)=>l.any(a(t,n));return{getNodes:()=>e,setNodeIds:t=>f.setValue(t),setEdges:t=>l.setValue(t),getNodesId:f.getValue,getEdges:l.getValue,addNodeId:t=>f.add(t),removeNodeId:t=>{l.reject(s(t)),f.reject(r.equals(t))},hasNodeId:t=>f.any(r.equals(t)),addEdge:(t,n)=>l.add([t,n]),removeEdge:(t,n)=>{l.reject(a(t,n))},hasEdge:d,hasNotEdge:r.complement(d),getNodeEdges:t=>r.reduce((n,[e,u])=>r.equals(t,e)?r.append(u,n):r.equals(t,u)?r.append(e,n):n,[],l.getValue()),clone:()=>{const e=n.createGraphBuilder(t);return e.setNodeIds(f.getValue()),e.setEdges(l.getValue()),e}}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.variableElimination=n.junctionTree=n.enumeration=void 0;const r=e(9);n.enumeration=r;const u=e(6);n.junctionTree=u;const o=e(24);n.variableElimination=o},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.infer=void 0;const r=e(1),u=e(0),o=e(4),i=new WeakMap,c=(t,n,e)=>{const r=[];for(let o=0;o<n.length;o++){let i=1;const c=n[o],s=Object.keys(c);for(let n=0;n<s.length;n++){const e=s[n],r=t[e];if(0===r.parents.length){i*=r.cpt[c[e]]}else{const t=r.cpt,n={};for(let t=0;t<r.parents.length;t++){const e=r.parents[t];n[e]=c[e]}for(let r=0;r<t.length;r++){const o=t[r];if(u.equals(o.when,n)){i*=o.then[c[e]];break}}}}const a=Object.keys(e);for(const t of a){const n=e[t],r=c[t];void 0!==r&&(i*=n[r]||0)}r.push(i)}let o=0;for(let t=0;t<r.length;t++)o+=r[t];return o};n.infer=(t,n,e)=>{let u=i.get(t);void 0===u&&(u=r.buildCombinations(t),i.set(t,u));const s=o.prepareEvidence(t,e),a=((t,n)=>{const e=Object.keys(n);return t.filter(t=>{for(let r=0;r<e.length;r++){const u=e[r];if(t[u]!==n[u])return!1}return!0})})(u,n),f=c(t,a,s),l=c(t,u,s);return 0===l?0:f/l}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.buildCombinations=void 0;n.buildCombinations=(t,n)=>((t,n)=>{const e=[],r=(n,u={})=>{if(0===n.length)e.push(u);else{const[e,...o]=n,{states:i}=t[e];for(const t of i)r(o,Object.assign(Object.assign({},u),{[e]:t}))}};return r(n),e})(t,n||Object.keys(t))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeCliquePotentials=n.normalizeCliquePotential=n.filterCliquePotentialsByNodeCombinations=n.filterCliquesByNodeCombinations=n.getCliqueWithLessNodes=n.hasNodeIdAndParentsInClique=n.hasNodeIdsInClique=n.sumCliquePotentials=n.mapPotentialsThen=void 0;const r=e(0),u=e(2),o=e(3),i=r.prop("nodeIds"),c=r.ifElse(r.equals(0),r.always(1),r.identity),s=r.pipe(i,r.length);n.mapPotentialsThen=r.pluck("then"),n.sumCliquePotentials=r.pipe(n.mapPotentialsThen,r.sum,c),n.hasNodeIdsInClique=r.useWith(r.all,[r.pipe(r.prop("nodeIds"),u.includesFlipped),r.identity]),n.hasNodeIdAndParentsInClique=r.useWith(n.hasNodeIdsInClique,[r.identity,o.getNodeParentsAndId]),n.getCliqueWithLessNodes=t=>{const n=r.head(t);if(n)return r.reduce(r.minBy(s),n,r.tail(t));throw new Error("Cliques are empty")},n.filterCliquesByNodeCombinations=(t,n={})=>r.filter(r.pipe(r.prop("nodeIds"),r.intersection(r.keys(n)),u.isNotEmpty),t);const a=r.curry((t,n)=>{const{when:e}=n;return r.all(n=>{const r=e[n],u=t[n];return null==u||r===u},r.keys(e))});n.filterCliquePotentialsByNodeCombinations=(t,n)=>r.filter(a(n),t),n.normalizeCliquePotential=t=>{const e=n.sumCliquePotentials(t);return t.map(t=>(t.then=t.then/e,t))},n.normalizeCliquePotentials=t=>{for(const e of Object.keys(t))t[e]=n.normalizeCliquePotential(t[e]);return t}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createSepSets=void 0;const r=e(0),u=e(2),o=e(13),i=r.addIndex(r.forEach),c=(t,n)=>n.sharedNodes.length-t.sharedNodes.length,s=(t,n,e)=>r.reduce((n,u)=>{const o=r.append(u,n);return((t,n)=>{const e={},u=(t,o)=>{e[t]=!0;const i=r.reduce((n,{ca:e,cb:u})=>r.equals(t,u)?r.append(e,n):r.equals(t,e)?r.append(u,n):n,[],n);return r.any(n=>{if(e[n]){if(n!==o)return!0}else if(u(n,t))return!0;return!1},i)};return r.any(({id:t})=>!e[t]&&u(t),t)})(t,o)?(e(u.ca,u.cb),n):o},[],(t=>{const n=r.clone(t);return o.sort(n,c),n})(n));n.createSepSets=(t,n)=>{const e=[];return i((n,o)=>{const i=r.drop(o+1,t);r.forEach(t=>{const r=((t,n)=>{const e=new Set(t.nodeIds),r=new Set(n.nodeIds);return Array(...new Set([...t.nodeIds,...n.nodeIds])).filter(t=>e.has(t)&&r.has(t))})(n,t);u.isNotEmpty(r)&&e.push({ca:n.id,cb:t.id,sharedNodes:r})},i)},t),s(t,e,n)}},function(t,n,e){t.exports=e(14)},function(t,n,e){var r,u,o;u=[n],void 0===(o="function"==typeof(r=function(t){"use strict";t.__esModule=!0,t.sort=function(t,n,e,i){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");n?"function"!=typeof n&&(i=e,e=n,n=r):n=r,e||(e=0),i||(i=t.length);var c=i-e;if(!(c<2)){var a=0;if(c<32)return a=u(t,e,i,n),void o(t,e,i,e+a,n);var f=new s(t,n),l=function(t){for(var n=0;t>=32;)n|=1&t,t>>=1;return t+n}(c);do{if((a=u(t,e,i,n))<l){var d=c;d>l&&(d=l),o(t,e,e+d,e+a,n),a=d}f.pushRun(e,a),f.mergeRuns(),c-=a,e+=a}while(0!==c);f.forceMergeRuns()}};var n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function e(t){return t<1e5?t<100?t<10?0:1:t<1e4?t<1e3?2:3:4:t<1e7?t<1e6?5:6:t<1e9?t<1e8?7:8:9}function r(t,r){if(t===r)return 0;if(~~t===t&&~~r===r){if(0===t||0===r)return t<r?-1:1;if(t<0||r<0){if(r>=0)return-1;if(t>=0)return 1;t=-t,r=-r}var u=e(t),o=e(r),i=0;return u<o?(t*=n[o-u-1],r/=10,i=-1):u>o&&(r*=n[u-o-1],t/=10,i=1),t===r?i:t<r?-1:1}var c=String(t),s=String(r);return c===s?0:c<s?-1:1}function u(t,n,e,r){var u=n+1;if(u===e)return 1;if(r(t[u++],t[n])<0){for(;u<e&&r(t[u],t[u-1])<0;)u++;!function(t,n,e){for(e--;n<e;){var r=t[n];t[n++]=t[e],t[e--]=r}}(t,n,u)}else for(;u<e&&r(t[u],t[u-1])>=0;)u++;return u-n}function o(t,n,e,r,u){for(r===n&&r++;r<e;r++){for(var o=t[r],i=n,c=r;i<c;){var s=i+c>>>1;u(o,t[s])<0?c=s:i=s+1}var a=r-i;switch(a){case 3:t[i+3]=t[i+2];case 2:t[i+2]=t[i+1];case 1:t[i+1]=t[i];break;default:for(;a>0;)t[i+a]=t[i+a-1],a--}t[i]=o}}function i(t,n,e,r,u,o){var i=0,c=0,s=1;if(o(t,n[e+u])>0){for(c=r-u;s<c&&o(t,n[e+u+s])>0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),i+=u,s+=u}else{for(c=u+1;s<c&&o(t,n[e+u-s])<=0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c);var a=i;i=u-s,s=u-a}for(i++;i<s;){var f=i+(s-i>>>1);o(t,n[e+f])>0?i=f+1:s=f}return s}function c(t,n,e,r,u,o){var i=0,c=0,s=1;if(o(t,n[e+u])<0){for(c=u+1;s<c&&o(t,n[e+u-s])<0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c);var a=i;i=u-s,s=u-a}else{for(c=r-u;s<c&&o(t,n[e+u+s])>=0;)i=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),i+=u,s+=u}for(i++;i<s;){var f=i+(s-i>>>1);o(t,n[e+f])<0?s=f:i=f+1}return s}var s=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.array=null,this.compare=null,this.minGallop=7,this.length=0,this.tmpStorageLength=256,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=n,this.compare=e,this.length=n.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return t.prototype.pushRun=function(t,n){this.runStart[this.stackSize]=t,this.runLength[this.stackSize]=n,this.stackSize+=1},t.prototype.mergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;if(t>=1&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||t>=2&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])this.runLength[t-1]<this.runLength[t+1]&&t--;else if(this.runLength[t]>this.runLength[t+1])break;this.mergeAt(t)}},t.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;t>0&&this.runLength[t-1]<this.runLength[t+1]&&t--,this.mergeAt(t)}},t.prototype.mergeAt=function(t){var n=this.compare,e=this.array,r=this.runStart[t],u=this.runLength[t],o=this.runStart[t+1],s=this.runLength[t+1];this.runLength[t]=u+s,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var a=c(e[o],e,r,u,0,n);r+=a,0!=(u-=a)&&0!==(s=i(e[r+u-1],e,o,s,s-1,n))&&(u<=s?this.mergeLow(r,u,o,s):this.mergeHigh(r,u,o,s))},t.prototype.mergeLow=function(t,n,e,r){var u=this.compare,o=this.array,s=this.tmp,a=0;for(a=0;a<n;a++)s[a]=o[t+a];var f=0,l=e,d=t;if(o[d++]=o[l++],0!=--r)if(1!==n){for(var p=this.minGallop;;){var h=0,y=0,g=!1;do{if(u(o[l],s[f])<0){if(o[d++]=o[l++],y++,h=0,0==--r){g=!0;break}}else if(o[d++]=s[f++],h++,y=0,1==--n){g=!0;break}}while((h|y)<p);if(g)break;do{if(0!==(h=c(o[l],s,f,n,0,u))){for(a=0;a<h;a++)o[d+a]=s[f+a];if(d+=h,f+=h,(n-=h)<=1){g=!0;break}}if(o[d++]=o[l++],0==--r){g=!0;break}if(0!==(y=i(s[f],o,l,r,0,u))){for(a=0;a<y;a++)o[d+a]=o[l+a];if(d+=y,l+=y,0==(r-=y)){g=!0;break}}if(o[d++]=s[f++],1==--n){g=!0;break}p--}while(h>=7||y>=7);if(g)break;p<0&&(p=0),p+=2}if(this.minGallop=p,p<1&&(this.minGallop=1),1===n){for(a=0;a<r;a++)o[d+a]=o[l+a];o[d+r]=s[f]}else{if(0===n)throw new Error("mergeLow preconditions were not respected");for(a=0;a<n;a++)o[d+a]=s[f+a]}}else{for(a=0;a<r;a++)o[d+a]=o[l+a];o[d+r]=s[f]}else for(a=0;a<n;a++)o[d+a]=s[f+a]},t.prototype.mergeHigh=function(t,n,e,r){var u=this.compare,o=this.array,s=this.tmp,a=0;for(a=0;a<r;a++)s[a]=o[e+a];var f=t+n-1,l=r-1,d=e+r-1,p=0,h=0;if(o[d--]=o[f--],0!=--n)if(1!==r){for(var y=this.minGallop;;){var g=0,v=0,m=!1;do{if(u(s[l],o[f])<0){if(o[d--]=o[f--],g++,v=0,0==--n){m=!0;break}}else if(o[d--]=s[l--],v++,g=0,1==--r){m=!0;break}}while((g|v)<y);if(m)break;do{if(0!=(g=n-c(s[l],o,t,n,n-1,u))){for(n-=g,h=1+(d-=g),p=1+(f-=g),a=g-1;a>=0;a--)o[h+a]=o[p+a];if(0===n){m=!0;break}}if(o[d--]=s[l--],1==--r){m=!0;break}if(0!=(v=r-i(o[f],s,0,r,r-1,u))){for(r-=v,h=1+(d-=v),p=1+(l-=v),a=0;a<v;a++)o[h+a]=s[p+a];if(r<=1){m=!0;break}}if(o[d--]=o[f--],0==--n){m=!0;break}y--}while(g>=7||v>=7);if(m)break;y<0&&(y=0),y+=2}if(this.minGallop=y,y<1&&(this.minGallop=1),1===r){for(h=1+(d-=n),p=1+(f-=n),a=n-1;a>=0;a--)o[h+a]=o[p+a];o[d]=s[l]}else{if(0===r)throw new Error("mergeHigh preconditions were not respected");for(p=d-(r-1),a=0;a<r;a++)o[p+a]=s[a]}}else{for(h=1+(d-=n),p=1+(f-=n),a=n-1;a>=0;a--)o[h+a]=o[p+a];o[d]=s[l]}else for(p=d-(r-1),a=0;a<r;a++)o[p+a]=s[a]},t}()})?r.apply(n,u):r)||(t.exports=o)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(16),o=e(7),i=e(18),c=e(1),s=e(19),a=new WeakMap,f=r.pipe(i.createMoralGraph,s.createTriangulatedGraph,u.createCliqueGraph);n.default=t=>{const n=a.get(t);if(r.isNil(n)){const{graph:n,cliques:e}=f(o.createGraphBuilder(t)),r={cliques:e,sepSets:c.createSepSets(e,n.removeEdge),junctionTree:n};return a.set(t,r),r}return n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createCliqueGraph=void 0;const r=e(0),u=e(17),o=e(7),i=r.addIndex(r.forEach);n.createCliqueGraph=t=>{const n=u.createCliques(t),e=o.createGraphBuilder();return i((t,u)=>{const o=r.drop(u+1,n);e.addNodeId(t.id),r.forEach(n=>{((t,n)=>r.any(t=>r.includes(t,n.nodeIds),t.nodeIds))(t,n)&&e.addEdge(t.id,n.id)},o)},n),{graph:e,cliques:n}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createCliques=void 0;const r=e(0),u=(t,n)=>{const e=(t=>(n,e)=>r.reduce((e,u)=>{const o=r.intersection(t.getNodeEdges(u),n);return o.length>e.length?o:e},[],r.union(n,e)))(t),u=(o,i,c)=>{r.isEmpty(i)&&r.isEmpty(c)&&n(o);const s=e(i,c);for(const n of r.difference(i,s)){const e=t.getNodeEdges(n);u(r.append(n,o),r.intersection(i,e),r.intersection(c,e));const s=i.indexOf(n);i.splice(s,1),c.push(n)}};return u};n.createCliques=t=>{let n=0;const e=[];return u(t,t=>{e.push({id:""+n++,nodeIds:t})})([],t.getNodesId(),[]),e}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createMoralGraph=void 0;const r=e(0),u=e(1),o=r.addIndex(r.forEach);n.createMoralGraph=t=>{const n=t.clone();return r.forEach(t=>{o((e,u)=>{const o=r.drop(u+1,t.parents);r.forEach(t=>{n.hasNotEdge(e,t)&&n.addEdge(e,t)},o)},t.parents)},u.filterNodeWithParents(n.getNodes())),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createTriangulatedGraph=void 0;const r=e(0),u=e(1),o=r.addIndex(r.forEach),i=t=>({[Symbol.iterator]:()=>{const n=t.getNodesId(),e=new Set,o=r.filter(t=>!e.has(t));return{next:()=>{const i=o(n);if(u.isNotEmpty(i)){const n=((t,n)=>{const e=r.head(n),u=r.minBy(n=>t.getNodeEdges(n).length);if(e)return r.reduce(u,e,r.tail(n));throw new Error("There are not node ids available.")})(t,i);return e.add(n),{done:!1,value:n}}return{done:!0,value:""}}}}}),c=t=>t.getNodes().filter(n=>(n=>{const e=t.getNodeEdges(n.id);let u=!0;for(let n=0;n<e.length-1&&u;n++){const o=e[n];u=r.drop(n+1,e).every(n=>t.hasEdge(o,n)||t.hasEdge(n,o))}return u})(n)).map(t=>t.id);n.createTriangulatedGraph=t=>{const n=t.clone(),e=n.clone();c(e).forEach(t=>e.removeNodeId(t));const u=(s=e,Array.from(i(s)));var s;return r.forEach(t=>{const u=e.getNodeEdges(t);o((t,o)=>{const i=r.drop(o+1,u);r.forEach(r=>{e.hasNodeId(t)&&e.hasNodeId(r)&&e.hasNotEdge(t,r)&&(e.addEdge(t,r),n.addEdge(t,r))},i)},u),e.removeNodeId(t)},u),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(1),u=e(21),o=e(0),i=e(22),c=new WeakMap,s=new WeakMap;n.default=(t,n,e,a,f,l)=>{const d=((t,n)=>{const e=c.get(t),u=s.get(n);return r.isNotNil(e)&&r.isNotNil(u)?e:null})(t,f);if(o.isNil(d)){const o=u.default(t,n,l||{}),d=i.default(n,e,t,a,o),p=r.normalizeCliquePotentials(d);return((t,n,e)=>{c.set(t,e),s.set(n,!0)})(t,f,p),p}return d}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1),o=(t,n)=>{const e=new Set;return r.reduce((t,o)=>r.assoc(o.id,((t,n,e)=>u.getNodesFromNetwork(t).reduce((t,o)=>u.hasNodeIdAndParentsInClique(n,o)&&!e.has(o.id)?(e.add(o.id),r.append(o.id,t)):t,[]))(n,o,e),t),{},t.sort((t,n)=>t.nodeIds.length-n.nodeIds.length))},i=(t,n)=>{const e=n.cpt,u=((t,n)=>r.reduce((t,e)=>r.assoc(e,n[e],t),{},t.parents))(n,t),o=r.find(r.pipe(r.prop("when"),r.equals(u)),e);if(o)return o.then[t[n.id]];throw new Error("Not found combination in node")},c=(t,n,e)=>{const o=r.map(n=>t[n],e),c=r.map((t=>n=>u.hasNodeParents(n)?i(t,n):((t,n)=>n.cpt[t[n.id]])(t,n))(n),o);return r.reduce(r.multiply,1,c)},s=(t,n,e,r)=>{let u=c(n,t,r);for(const n of Object.keys(e)){const r=e[n],o=t[n];void 0!==o&&(u*=r[o]||0)}return u},a=(t,n,e,o)=>{const i=u.buildCombinations(n,t.nodeIds);return r.map(((t,n,e,r)=>u=>({when:u,then:s(u,n,e,r[t.id])}))(t,n,e,o),i)};n.default=(t,n,e)=>{const r=o(t,n),u={};for(const o of t)u[o.id]=a(o,n,e,r);return u}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.marginalizePotentials=n.findSepSetWithCliques=void 0;const r=e(0),u=e(1),o=e(23),i=r.curry((t,n,e)=>e.ca===n&&e.cb===t);n.findSepSetWithCliques=(t,n,e)=>r.find(r.anyPass([i(t,n),i(n,t)]),e);const c=r.map(t=>({when:t,then:0})),s=r.reduce((t,n)=>r.assoc(n.id,new Map,t),{});n.marginalizePotentials=(t,n,e)=>r.reduce((t,n)=>{const o=r.sum(e.filter(t=>u.objectEqualsByFirstObjectKeys(n.when,t.when)).map(r.prop("then"))),i=r.assoc("then",o,n);return r.append(i,t)},[],c(u.buildCombinations(t,n)));const a=r.pipe(r.path([0,"when"]),r.keys),f=r.curry((t,n,e)=>((t,n,e)=>{const u=r.pick(t);return r.equals(u(n.when),u(e.when))})(t,n,e)?r.assoc("then",r.multiply(e.then,n.then),e):e),l=(t,e,o,i,c,s)=>{const l=c<s?c:s,d=c<s?s:c,p=i[l].get(d),h=((t,e,r,u)=>{const o=n.findSepSetWithCliques(r,u,e);if(o)return o.sharedNodes.sort();throw new Error(`SepSet not found for cliques with id: "${r}" and "${u}"`)})(0,e,c,s),y=n.marginalizePotentials(t,h,o[c]),g=p?(v=y,m=p,r.map(t=>{const{when:n,then:e}=t,o=m.find(t=>u.objectEqualsByFirstObjectKeys(n,t.when));return o?r.assoc("then",r.divide(e,o.then||1),t):t},v)):y;var v,m;o[s]=((t,n)=>{const e=a(n),u=f(e);return r.reduce((t,n)=>r.map(u(n),t),t,n)})(o[s],g),i[l].set(d,y)};n.default=(t,n,e,u,i)=>{const c=s(e),a=o.getConnectedComponents(n);return r.reduce((e,[r])=>{const o=((t,n,e,r,u,o)=>{const i=(o,c)=>{const s=n.getNodeEdges(o);for(const t of s)c&&t===c||i(t,o);c&&l(t,e,u,r,o,c)};return i(o),u})(t,n,u,c,e,r);return((t,n,e,r,u,o)=>{const i=(o,c)=>{const s=n.getNodeEdges(o);for(const n of s)c&&n===c||(l(t,e,u,r,o,n),i(n,o))};return i(o),u})(t,n,u,c,o,r)},i,a)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getConnectedComponents=void 0;const r=e(0);n.getConnectedComponents=t=>{const n=t.getNodesId(),e=new Set,u=[],o=n=>{const u=t.getNodeEdges(n).filter(t=>!e.has(t));return e.add(n),r.reduce((t,n)=>(t.push(...o(n)),t),[n],u)};for(const t of n)e.has(t)||u.push(o(t));return u}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.infer=void 0;const r=e(4);function u(t,n){const e=[];for(let r=0;r<t.length;r++)for(let u=0;u<n.length;u++){const o=Object.assign(Object.assign({},t[r].states),n[u].states),i=Object.keys(o);e.some(t=>i.every(n=>t.states[n]===o[n]))||e.push({states:o,value:0})}const r=Object.keys(t[0].states),u=Object.keys(n[0].states);for(let o=0;o<e.length;o++){const i=e[o],c=t.find(t=>r.every(n=>t.states[n]===i.states[n])),s=n.find(t=>u.every(n=>t.states[n]===i.states[n]));if(void 0===c||void 0===s)throw new Error("Fatal error");i.value=c.value*s.value}return e}function o(t,n){const e=[];for(let r=0;r<t.length;r++){const u=Object.assign({},t[r].states);delete u[n];const o=Object.keys(u),i=e.find(t=>o.every(n=>t.states[n]===u[n]));void 0===i?e.push({states:u,value:t[r].value}):i.value+=t[r].value}return e}n.infer=(t,n={},e)=>{const i=Object.keys(t),c=Object.keys(n),s=r.prepareEvidence(t,e),a=i.map(n=>function(t){const n=[];if(0===t.parents.length){const e=t.cpt;for(let r=0;r<t.states.length;r++){const u=t.states[r];n.push({states:{[t.id]:u},value:e[u]})}}else{const e=t.cpt;for(let r=0;r<e.length;r++)for(let u=0;u<t.states.length;u++){const o=t.states[u];n.push({states:Object.assign(Object.assign({},e[r].when),{[t.id]:o}),value:e[r].then[o]})}}return n}(t[n])),f=Object.keys(s);for(const n of f){const e=s[n],r=t[n],u=[];for(const t of r.states){const r=e[t]||0;u.push({states:{[n]:t},value:r})}a.push(u)}const l=i.filter(t=>!c.some(n=>n===t));for(;l.length>0;){const t=l.shift();if(!t)break;const n=a.filter(n=>Object.keys(n[0].states).some(n=>n===t));if(0===n.length)continue;const e=o(n.reduce((t,n)=>u(t,n)),t);for(let t=0;t<n.length;t++)a.splice(a.indexOf(n[t]),1);a.push(e)}const d=function(t){const n=t.reduce((t,n)=>t+n.value,0);return 0===n?t:t.map(t=>({states:Object.assign({},t.states),value:t.value/n}))}(a.filter(t=>Object.keys(t[0].states).length>0).sort((t,n)=>t.length-n.length).reduce((t,n)=>u(t,n))).find(t=>c.every(e=>t.states[e]===n[e]));return void 0===d?0:d.value}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addNode=void 0;const r=e(0),u=e(26);n.addNode=(t,n)=>(((t,n)=>{if(r.has(t.id,n))throw new Error(`[Node "${t.id}"]: This node is already added to the network.`)})(n,t),u.default(n,t),r.assoc(n.id,n,t))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(27),u=e(28),o=e(29),i=e(30);n.default=(t,n)=>{u.default(t),i.default(t),o.default(t,n),r.default(t,n)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(1),u=e(0),o=u.pluck("when"),i=(t,n,e)=>{u.forEach(n=>{if(u.isNil(e[n]))throw new Error(`[Node "${t}"]: Missing probability for "${n}" state.\n\nNode cpt: ${u.toString(e)}`);if(r.isNotNumber(e[n]))throw new Error(`[Node "${t}"]: All probabilities must be a number.\n\nNode cpt type for "${n}": ${u.type(e[n])}\nNode cpt for "${n}": ${u.toString(e[n])}\nNode cpt: ${u.toString(e)}`)},n)},c=(t,n)=>{const e=r.buildCombinations(n,t.parents),i=o(t.cpt);((t,n,e)=>{u.forEach(r=>{if(u.none(u.equals(r),n))throw new Error(`[Node "${t}"]: The node cpt has one missing combination.\n\nMissing node cpt combination (when): ${u.toString(r)}\nNode cpt combinations (when's): ${u.toString(n)}\nCombinations needed: ${u.toString(e)}`)},e)})(t.id,i,e),((t,n,e)=>{u.forEach(r=>{u.none(u.equals(r),e)&&console.warn(`[Node "${t}"]: The node cpt has one extra/invalid combination.\n\nInvalid node cpt combination (when): ${u.toString(r)}\nNode cpt combinations (when's): ${u.toString(n)}\nCombinations needed: ${u.toString(e)}`)},n)})(t.id,i,e)};n.default=(t,n)=>{if(u.isNil(t.cpt))throw new Error(`[Node "${t.id}"]: The node cpt is required and must be an object or an array.\n\nNode: ${u.toString(t)}`);if(r.isNotObject(t.cpt))throw new Error(`[Node "${t.id}"]: The node cpt must be an object or an array.\n\nNode cpt type: ${u.type(t.cpt)}\nNode cpt: ${u.toString(t.cpt)}`);Array.isArray(t.cpt)?(c(t,n),u.forEach(n=>{i(t.id,t.states,n.then)},t.cpt)):i(t.id,t.states,t.cpt)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1);n.default=t=>{if(r.isNil(t.id))throw new Error("The node id is required and must be a string.\n\nNode: "+r.toString(t));if(u.isNotString(t.id))throw new Error(`The node id must be a string.\n\nNode id type: ${r.type(t.id)}\nNode id: ${r.toString(t.id)}\nNode: ${r.toString(t)}`)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1);n.default=(t,n)=>{if(r.isNil(t.parents))throw new Error(`[Node "${t.id}"]: The node parents is required and must be an array of strings.\n\nNode: ${r.toString(t)}`);if(!Array.isArray(t.parents))throw new Error(`[Node "${t.id}"]: The node parents must be an array of strings.\n\nNode parents type: ${r.type(t.parents)}\nNode parents: ${r.toString(t.parents)}`);(({id:t,parents:n},e)=>{r.forEach(o=>{if(u.isNotString(o))throw new Error(`[Node "${t}"]: All node parents must be strings.\n\nNode parent type: ${r.type(o)}\nNode parent: ${r.toString(o)}\nNode parents: ${r.toString(n)}`);if(!r.has(o,e))throw new Error(`[Node "${t}"]: The node parent "${o}" was not found in the network.`)},n)})(t,n)}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(0),u=e(1);n.default=t=>{if(r.isNil(t.states))throw new Error(`[Node "${t.id}"]: The node states is required and must be an array of strings.\n\nNode: ${r.toString(t)}`);if(!Array.isArray(t.states))throw new Error(`[Node "${t.id}"]: The node states must be an array of strings.\n\nNode states type: ${r.type(t.states)}\nNode states: ${r.toString(t.states)}`);if(r.isEmpty(t.states))throw new Error(`[Node "${t.id}"]: The node states must contain at least one string.\n\nNode states: ${r.toString(t.states)}`);t.states.forEach(n=>{if(u.isNotString(n))throw new Error(`[Node "${t.id}"]: All node states must be strings.\n\nNode state type: ${r.type(n)}\nNode state: ${r.toString(n)}\nNode states: ${r.toString(t.states)}`)})}},function(t,n,e){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),u=this&&this.__exportStar||function(t,n){for(var e in t)"default"===e||n.hasOwnProperty(e)||r(n,t,e)};Object.defineProperty(n,"__esModule",{value:!0}),u(e(32),n),u(e(33),n),u(e(34),n),u(e(35),n),u(e(36),n),u(e(37),n),u(e(38),n),u(e(39),n),u(e(40),n),u(e(41),n),u(e(42),n),u(e(43),n),u(e(44),n),u(e(45),n),u(e(46),n),u(e(47),n),u(e(48),n),u(e(49),n),u(e(50),n),u(e(51),n),u(e(52),n),u(e(53),n),u(e(54),n)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.inferAll=void 0;const r=e(56),u=e(0),o=e(3),i=e(6),c=e(57),s=u.mergeRight({force:!1,precision:8}),a=(t,n,e,c)=>u.reduce((o,s)=>u.assoc(s,((t,n,e,o,c)=>{if("string"==typeof o[n])return u.propEq(n,e,o)?1:0;if(c.clampSoftEvidence&&"object"==typeof o[n]&&null!==o[n]){const t=o[n];let r=0;for(const n in t)r+=t[n]||0;const u=r>0?r:1;return(t[e]||0)/u}const s=void 0!==c.precision?c.precision:8;return r(i.infer(t,{[n]:e},o),s)})(t,n.id,s,e,c),o),{},o.getNodeStates(n)),f=u.ifElse(u.pipe(u.nthArg(1),u.propEq("force",!0)),u.clone,u.identity);n.inferAll=(t,n={},e={})=>{const r=s(e);let i=f(t,r);const l=n;i=r.clampSoftEvidence?c.clampNetwork(i,l):i;const d=r.clampSoftEvidence?{}:l;return u.reduce((t,n)=>u.assoc(n.id,a(i,n,d,r),t),{},o.getNodesFromNetwork(i))}},function(t,n,e){"use strict";function r(t,n,e){if("number"!=typeof n)throw new TypeError("Expected value to be a number");if(e===1/0)return n;if(!Number.isInteger(e))throw new TypeError("Expected precision to be an integer");const r="round"===t&&n<0;let u;r&&(n=Math.abs(n)),[n,u]=(n+"e").split("e");let o=Math[t](`${n}e${Number(u)+e}`);return[n,u]=(o+"e").split("e"),o=Number(`${n}e${Number(u)-e}`),r&&(o=-o),o}t.exports=r.bind(null,"round"),t.exports.up=r.bind(null,"ceil"),t.exports.down=r.bind(null,"floor")},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clampNetwork=void 0,n.clampNetwork=function(t,n){const e=Object.assign({},t);for(const r of Object.keys(n)){const u=t[r];if(!u)continue;const o={};if("string"==typeof n[r]){for(const t of u.states)o[t]=0;o[n[r]]=1}else{let t=0;for(const e of u.states){const u=n[r][e];void 0!==u?(o[e]=u,t+=u):o[e]=0}const e=t>0?t:1;for(const t of u.states)o[t]=o[t]/e}e[r]={id:u.id,states:[...u.states],parents:[],cpt:Object.assign({},o)}}return e}}])}));